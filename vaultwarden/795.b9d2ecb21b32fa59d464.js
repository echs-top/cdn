"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[795],{59795:(e,t,n)=>{n.r(t),n.d(t,{MembersModule:()=>Hi});var i=n(40164),s=n(71146),o=n(64984),r=n(65017),a=n(98645),u=n(54019),c=n(92716),l=n(84598),d=n(30359),p=n(33031),g=n(68362),h=n(58691),m=n(20099),U=n(20698),f=n(87264),Z=n(59281),_=n(15015),v=n(88409),b=n(63078),A=n(14309);function x(e){return""!==e.value&&e.value&&void 0!==e.value.split(",").map((e=>a.kI.email({value:e.trim()}))).find((e=>null!==e))?{multipleEmails:{message:"multipleInputEmails"}}:null}function w(e,t,n){return i=>{if(""===i.value||!i.value)return null;const s=Array.from(new Set(i.value.split(",").filter((e=>e&&""!==e.trim()&&!t.some((t=>t===e.trim()))))));return!(e.planProductType!==f.kv.Free&&e.planProductType!==f.kv.Families&&e.planProductType!==f.kv.TeamsStarter)&&t.length+s.length>e.seats?{seatLimitReached:{message:n}}:null}}var y=n(24852),T=n(78627),q=n(99721),S=n(47244),C=n(73369),k=n(23915),I=n(19419),P=n(33245),N=n(98205),M=n(46246),L=n(36338),J=n(66385),Q=n(81974),z=n(7172),O=n(29465),Y=n(24637),R=n(11512),G=n(75734),j=n(36179),E=n(44358),B=n(21656),D=n(17731),F=n(26536),$=n(90054),K=n(27646),H=n(82933);function W(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",6),y._uU(1,"\n        "),y.TgZ(2,"input",7),y.NdJ("change",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.onChildCheck())})),y.qZA(),y._uU(3,"\n        "),y.TgZ(4,"label",2),y._uU(5),y.ALo(6,"i18n"),y.qZA(),y._uU(7,"\n      "),y.qZA()}if(2&e){const e=y.oxw().$implicit,t=y.oxw();y.xp6(2),y.Q6J("name",t.pascalize(e.key))("id",e.key)("formControl",e.value),y.xp6(2),y.Q6J("for",e.key),y.xp6(1),y.hij("\n          ",y.lcZ(6,5,e.key),"\n        ")}}function V(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n      "),y.YNc(2,W,8,7,"div",5),y._uU(3,"\n    "),y.BQk()),2&e){const e=t.$implicit,n=y.oxw();y.xp6(2),y.Q6J("ngIf",e.key!=n.parentId)}}class X{constructor(){this.destroy$=new u.x,this.onSavedUser=new y.vpe,this.onDeletedUser=new y.vpe}get parentIndeterminate(){return this.children.some((([e,t])=>1==t.value))&&!this.children.every((([e,t])=>1==t.value))}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,g.R)(this.destroy$)).subscribe((e=>{Object.values(this.checkboxes.controls).forEach((t=>t.setValue(e,{emitEvent:!1})))}))}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter((([e,t])=>e!=this.parentId))}onChildCheck(){const e=this.children.every((([e,t])=>1==t.value));this.parentCheckbox.setValue(e,{emitEvent:!1})}key(e,t){return t.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(e){return K.c.camelToPascalCase(e)}}X.ɵfac=function(e){return new(e||X)},X.ɵcmp=y.Xpm({type:X,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:15,vars:13,consts:[[3,"formGroup"],["type","checkbox",3,"name","id","formControlName","indeterminate"],[1,"!tw-font-normal",3,"for"],[1,"tw-ml-6"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","",4,"ngIf"],[1,""],["type","checkbox",1,"",3,"name","id","formControl","change"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y._UZ(2,"input",1),y._uU(3,"\n  "),y.TgZ(4,"label",2),y._uU(5),y.ALo(6,"i18n"),y.qZA(),y._uU(7,"\n  "),y.TgZ(8,"div",3),y._uU(9,"\n    "),y.YNc(10,V,4,1,"ng-container",4),y.ALo(11,"keyvalue"),y._uU(12,"\n  "),y.qZA(),y._uU(13,"\n"),y.qZA(),y._uU(14,"\n")),2&e&&(y.Q6J("formGroup",t.checkboxes),y.xp6(2),y.Q6J("name",t.pascalize(t.parentId))("id",t.parentId)("formControlName",t.parentId)("indeterminate",t.parentIndeterminate),y.xp6(2),y.Q6J("for",t.parentId),y.xp6(1),y.hij("\n    ",y.lcZ(6,9,t.parentId),"\n  "),y.xp6(5),y.Q6J("ngForOf",y.lcZ(11,11,t.checkboxes.controls))("ngForTrackBy",t.key))},dependencies:[I.sg,I.O5,a.Wl,a.JJ,a.JL,a.oH,a.sg,a.u,I.Nd,H.C],encapsulation:2});var ee,te,ne=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function ie(e,t){if(1&e&&(y.TgZ(0,"span",14),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.params.name)}}function se(e,t){1&e&&(y.TgZ(0,"span",15),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"revoked")))}function oe(e,t){1&e&&(y.ynx(0),y._uU(1,"\n        "),y._UZ(2,"i",16),y.ALo(3,"i18n"),y._uU(4,"\n        "),y.TgZ(5,"span",17),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n      "),y.BQk()),2&e&&(y.xp6(2),y.s9C("title",y.lcZ(3,2,"loading")),y.xp6(4),y.Oqu(y.lcZ(7,4,"loading")))}function re(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n            "),y.TgZ(2,"p"),y._uU(3),y.ALo(4,"i18n"),y.qZA(),y._uU(5,"\n            "),y.TgZ(6,"bit-form-field"),y._uU(7,"\n              "),y.TgZ(8,"bit-label"),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n              "),y._UZ(12,"input",42),y._uU(13,"\n              "),y.TgZ(14,"bit-hint"),y._uU(15),y.ALo(16,"i18n"),y.qZA(),y._uU(17,"\n            "),y.qZA(),y._uU(18,"\n          "),y.BQk()),2&e){const e=y.oxw(2);y.xp6(3),y.Oqu(y.lcZ(4,3,"inviteUserDesc")),y.xp6(6),y.Oqu(y.lcZ(10,5,"email")),y.xp6(6),y.Oqu(y.xi3(16,7,"inviteMultipleEmailDesc",e.organization.planProductType===e.ProductType.TeamsStarter?"10":"20"))}}function ae(e,t){if(1&e&&(y.TgZ(0,"div",24),y._uU(1,"\n              "),y._UZ(2,"input",43),y._uU(3,"\n              "),y.TgZ(4,"label",44),y._uU(5),y.ALo(6,"i18n"),y.TgZ(7,"div",27),y._uU(8),y.ALo(9,"i18n"),y.qZA(),y._uU(10,"\n              "),y.qZA(),y._uU(11,"\n            "),y.qZA()),2&e){const e=y.oxw(2);y.xp6(2),y.Q6J("value",e.organizationUserType.Manager),y.xp6(3),y.hij("\n                ",y.lcZ(6,3,"manager"),"\n                "),y.xp6(3),y.hij("\n                  ",y.lcZ(9,5,"managerDesc"),"\n                ")}}function ue(e,t){1&e&&(y.ynx(0),y._uU(1,"\n                  "),y.TgZ(2,"div",27),y._uU(3),y.ALo(4,"i18n"),y.TgZ(5,"a",45),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8),y.ALo(9,"i18n"),y.qZA(),y._uU(10,"\n                "),y.BQk()),2&e&&(y.xp6(3),y.hij("\n                    ",y.lcZ(4,3,"customDescNonEnterpriseStart"),""),y.xp6(3),y.Oqu(y.lcZ(7,5,"customDescNonEnterpriseLink")),y.xp6(2),y.hij("",y.lcZ(9,7,"customDescNonEnterpriseEnd"),"\n                  "))}function ce(e,t){1&e&&(y._uU(0,"\n                  "),y.TgZ(1,"div",27),y._uU(2),y.ALo(3,"i18n"),y.qZA(),y._uU(4,"\n                ")),2&e&&(y.xp6(2),y.hij("\n                    ",y.lcZ(3,1,"customDesc"),"\n                  "))}function le(e,t){if(1&e){const e=y.EpF();y.ynx(0),y._uU(1,"\n              "),y.TgZ(2,"h3",47),y._uU(3),y.ALo(4,"i18n"),y.qZA(),y._uU(5,"\n              "),y.TgZ(6,"div",48),y._uU(7,"\n                "),y.TgZ(8,"div",49),y._uU(9,"\n                  "),y.TgZ(10,"div",50),y._uU(11,"\n                    "),y.TgZ(12,"label",51),y._uU(13),y.ALo(14,"i18n"),y.qZA(),y._uU(15,"\n                    "),y._UZ(16,"hr",52),y._uU(17,"\n                    "),y.TgZ(18,"app-nested-checkbox",53),y._uU(19,"\n                    "),y.qZA(),y._uU(20,"\n                  "),y.qZA(),y._uU(21,"\n                "),y.qZA(),y._uU(22,"\n                "),y.TgZ(23,"div",49),y._uU(24,"\n                  "),y.TgZ(25,"div",50),y._uU(26,"\n                    "),y.TgZ(27,"label",51),y._uU(28),y.ALo(29,"i18n"),y.qZA(),y._uU(30,"\n                    "),y._UZ(31,"hr",52),y._uU(32,"\n                    "),y.TgZ(33,"div"),y._uU(34,"\n                      "),y._UZ(35,"input",54),y._uU(36,"\n                      "),y.TgZ(37,"label",55),y._uU(38),y.ALo(39,"i18n"),y.qZA(),y._uU(40,"\n                    "),y.qZA(),y._uU(41,"\n                    "),y.TgZ(42,"div"),y._uU(43,"\n                      "),y._UZ(44,"input",56),y._uU(45,"\n                      "),y.TgZ(46,"label",57),y._uU(47),y.ALo(48,"i18n"),y.qZA(),y._uU(49,"\n                    "),y.qZA(),y._uU(50,"\n                    "),y.TgZ(51,"div"),y._uU(52,"\n                      "),y._UZ(53,"input",58),y._uU(54,"\n                      "),y.TgZ(55,"label",59),y._uU(56),y.ALo(57,"i18n"),y.qZA(),y._uU(58,"\n                    "),y.qZA(),y._uU(59,"\n                    "),y.TgZ(60,"app-nested-checkbox",60),y._uU(61,"\n                    "),y.qZA(),y._uU(62,"\n                    "),y.TgZ(63,"div"),y._uU(64,"\n                      "),y._UZ(65,"input",61),y._uU(66,"\n                      "),y.TgZ(67,"label",62),y._uU(68),y.ALo(69,"i18n"),y.qZA(),y._uU(70,"\n                    "),y.qZA(),y._uU(71,"\n                    "),y.TgZ(72,"div"),y._uU(73,"\n                      "),y._UZ(74,"input",63),y._uU(75,"\n                      "),y.TgZ(76,"label",64),y._uU(77),y.ALo(78,"i18n"),y.qZA(),y._uU(79,"\n                    "),y.qZA(),y._uU(80,"\n                    "),y.TgZ(81,"div"),y._uU(82,"\n                      "),y._UZ(83,"input",65),y._uU(84,"\n                      "),y.TgZ(85,"label",66),y._uU(86),y.ALo(87,"i18n"),y.qZA(),y._uU(88,"\n                    "),y.qZA(),y._uU(89,"\n                    "),y.TgZ(90,"div"),y._uU(91,"\n                      "),y.TgZ(92,"input",67),y.NdJ("change",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.handleDependentPermissions())})),y.qZA(),y._uU(93,"\n                      "),y.TgZ(94,"label",68),y._uU(95),y.ALo(96,"i18n"),y.qZA(),y._uU(97,"\n                    "),y.qZA(),y._uU(98,"\n                    "),y.TgZ(99,"div"),y._uU(100,"\n                      "),y.TgZ(101,"input",69),y.NdJ("change",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.handleDependentPermissions())})),y.qZA(),y._uU(102,"\n                      "),y.TgZ(103,"label",70),y._uU(104),y.ALo(105,"i18n"),y.qZA(),y._uU(106,"\n                    "),y.qZA(),y._uU(107,"\n                  "),y.qZA(),y._uU(108,"\n                "),y.qZA(),y._uU(109,"\n              "),y.qZA(),y._uU(110,"\n            "),y.BQk()}if(2&e){const e=y.oxw(3);y.xp6(3),y.hij("\n                ",y.lcZ(4,14,"permissions"),"\n              "),y.xp6(3),y.Q6J("formGroup",e.permissionsGroup),y.xp6(7),y.Oqu(y.lcZ(14,16,"managerPermissions")),y.xp6(5),y.Q6J("checkboxes",e.permissionsGroup.controls.manageAssignedCollectionsGroup),y.xp6(10),y.Oqu(y.lcZ(29,18,"adminPermissions")),y.xp6(10),y.hij("\n                        ",y.lcZ(39,20,"accessEventLogs"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(48,22,"accessImportExport"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(57,24,"accessReports"),"\n                      "),y.xp6(4),y.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),y.xp6(8),y.hij("\n                        ",y.lcZ(69,26,"manageGroups"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(78,28,"manageSso"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(87,30,"managePolicies"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(96,32,"manageUsers"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(105,34,"manageAccountRecovery"),"\n                      ")}}function de(e,t){if(1&e){const e=y.EpF();y._uU(0,"\n              "),y.TgZ(1,"div",48),y._uU(2,"\n                "),y.TgZ(3,"div",71),y._uU(4,"\n                  "),y.TgZ(5,"div"),y._uU(6,"\n                    "),y._UZ(7,"input",54),y._uU(8,"\n                    "),y.TgZ(9,"label",55),y._uU(10),y.ALo(11,"i18n"),y.qZA(),y._uU(12,"\n                  "),y.qZA(),y._uU(13,"\n                  "),y.TgZ(14,"div"),y._uU(15,"\n                    "),y._UZ(16,"input",56),y._uU(17,"\n                    "),y.TgZ(18,"label",57),y._uU(19),y.ALo(20,"i18n"),y.qZA(),y._uU(21,"\n                  "),y.qZA(),y._uU(22,"\n                  "),y.TgZ(23,"div"),y._uU(24,"\n                    "),y._UZ(25,"input",58),y._uU(26,"\n                    "),y.TgZ(27,"label",59),y._uU(28),y.ALo(29,"i18n"),y.qZA(),y._uU(30,"\n                  "),y.qZA(),y._uU(31,"\n                "),y.qZA(),y._uU(32,"\n                "),y.TgZ(33,"div",71),y._uU(34,"\n                  "),y.TgZ(35,"app-nested-checkbox",60),y._uU(36,"\n                  "),y.qZA(),y._uU(37,"\n                "),y.qZA(),y._uU(38,"\n                "),y.TgZ(39,"div",71),y._uU(40,"\n                  "),y.TgZ(41,"div",50),y._uU(42,"\n                    "),y.TgZ(43,"div"),y._uU(44,"\n                      "),y._UZ(45,"input",61),y._uU(46,"\n                      "),y.TgZ(47,"label",62),y._uU(48),y.ALo(49,"i18n"),y.qZA(),y._uU(50,"\n                    "),y.qZA(),y._uU(51,"\n                    "),y.TgZ(52,"div"),y._uU(53,"\n                      "),y._UZ(54,"input",63),y._uU(55,"\n                      "),y.TgZ(56,"label",64),y._uU(57),y.ALo(58,"i18n"),y.qZA(),y._uU(59,"\n                    "),y.qZA(),y._uU(60,"\n                    "),y.TgZ(61,"div"),y._uU(62,"\n                      "),y._UZ(63,"input",65),y._uU(64,"\n                      "),y.TgZ(65,"label",66),y._uU(66),y.ALo(67,"i18n"),y.qZA(),y._uU(68,"\n                    "),y.qZA(),y._uU(69,"\n                    "),y.TgZ(70,"div"),y._uU(71,"\n                      "),y.TgZ(72,"input",67),y.NdJ("change",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.handleDependentPermissions())})),y.qZA(),y._uU(73,"\n                      "),y.TgZ(74,"label",68),y._uU(75),y.ALo(76,"i18n"),y.qZA(),y._uU(77,"\n                    "),y.qZA(),y._uU(78,"\n                    "),y.TgZ(79,"div"),y._uU(80,"\n                      "),y.TgZ(81,"input",69),y.NdJ("change",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.handleDependentPermissions())})),y.qZA(),y._uU(82,"\n                      "),y.TgZ(83,"label",70),y._uU(84),y.ALo(85,"i18n"),y.qZA(),y._uU(86,"\n                    "),y.qZA(),y._uU(87,"\n                  "),y.qZA(),y._uU(88,"\n                "),y.qZA(),y._uU(89,"\n              "),y.qZA(),y._uU(90,"\n            ")}if(2&e){const e=y.oxw(3);y.xp6(1),y.Q6J("formGroup",e.permissionsGroup),y.xp6(9),y.hij("\n                      ",y.lcZ(11,10,"accessEventLogs"),"\n                    "),y.xp6(9),y.hij("\n                      ",y.lcZ(20,12,"accessImportExport"),"\n                    "),y.xp6(9),y.hij("\n                      ",y.lcZ(29,14,"accessReports"),"\n                    "),y.xp6(7),y.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),y.xp6(13),y.hij("\n                        ",y.lcZ(49,16,"manageGroups"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(58,18,"manageSso"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(67,20,"managePolicies"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(76,22,"manageUsers"),"\n                      "),y.xp6(9),y.hij("\n                        ",y.lcZ(85,24,"manageAccountRecovery"),"\n                      ")}}function pe(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n            "),y.YNc(2,le,111,36,"ng-container",36),y.ALo(3,"async"),y._uU(4,"\n            "),y.YNc(5,de,91,26,"ng-template",null,46,y.W1O),y._uU(7,"\n          "),y.BQk()),2&e){const e=y.MAs(6),t=y.oxw(2);y.xp6(2),y.Q6J("ngIf",!y.lcZ(3,2,t.flexibleCollectionsEnabled$))("ngIfElse",e)}}function ge(e,t){1&e&&(y.ynx(0),y._uU(1,"\n            "),y.TgZ(2,"h3",72),y._uU(3),y.ALo(4,"i18n"),y.TgZ(5,"a",73),y.ALo(6,"i18n"),y._uU(7,"\n                "),y._UZ(8,"i",23),y._uU(9,"\n              "),y.qZA(),y._uU(10,"\n            "),y.qZA(),y._uU(11,"\n            "),y.TgZ(12,"p",74),y._uU(13),y.ALo(14,"i18n"),y.qZA(),y._uU(15,"\n            "),y.TgZ(16,"bit-form-control"),y._uU(17,"\n              "),y._UZ(18,"input",75),y._uU(19,"\n              "),y.TgZ(20,"bit-label"),y._uU(21),y.ALo(22,"i18n"),y.qZA(),y._uU(23,"\n            "),y.qZA(),y._uU(24,"\n          "),y.BQk()),2&e&&(y.xp6(3),y.hij("\n              ",y.lcZ(4,4,"secretsManager"),"\n              "),y.xp6(2),y.s9C("appA11yTitle",y.lcZ(6,6,"learnMore")),y.xp6(8),y.Oqu(y.lcZ(14,8,"secretsManagerAccessDescription")),y.xp6(8),y.hij("\n                ",y.lcZ(22,10,"userAccessSecretsManagerGA"),"\n              "))}function he(e,t){if(1&e&&(y.TgZ(0,"bit-tab",19),y.ALo(1,"i18n"),y._uU(2,"\n          "),y.TgZ(3,"div",76),y._uU(4),y.ALo(5,"i18n"),y.qZA(),y._uU(6,"\n          "),y._UZ(7,"bit-access-selector",77),y.ALo(8,"i18n"),y.ALo(9,"i18n"),y.ALo(10,"i18n"),y.ALo(11,"async"),y._uU(12,"\n        "),y.qZA()),2&e){const e=y.oxw(2);y.Q6J("label",y.lcZ(1,7,"groups")),y.xp6(4),y.hij("\n            ",y.lcZ(5,9,"groupAccessUserDesc"),"\n          "),y.xp6(3),y.Q6J("items",e.groupAccessItems)("columnHeader",y.lcZ(8,11,"groups"))("selectorLabelText",y.lcZ(9,13,"selectGroups"))("emptySelectionText",y.lcZ(10,15,"noGroupsAdded"))("flexibleCollectionsEnabled",y.lcZ(11,17,e.flexibleCollectionsEnabled$))}}function me(e,t){1&e&&(y.TgZ(0,"div",76),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n            ",y.lcZ(2,1,"userPermissionOverrideHelper"),"\n          "))}function Ue(e,t){1&e&&(y.TgZ(0,"div",76),y._uU(1,"\n            "),y.TgZ(2,"bit-form-control"),y._uU(3,"\n              "),y._UZ(4,"input",78),y._uU(5,"\n              "),y.TgZ(6,"bit-label"),y._uU(7),y.ALo(8,"i18n"),y.TgZ(9,"a",79),y.ALo(10,"i18n"),y._uU(11,"\n                  "),y._UZ(12,"i",23),y._uU(13,"\n                "),y.qZA(),y._uU(14,"\n              "),y.qZA(),y._uU(15,"\n              "),y.TgZ(16,"bit-hint"),y._uU(17),y.ALo(18,"i18n"),y.qZA(),y._uU(19,"\n            "),y.qZA(),y._uU(20,"\n          "),y.qZA()),2&e&&(y.xp6(7),y.hij("\n                ",y.lcZ(8,3,"accessAllCollectionsDesc"),"\n                "),y.xp6(2),y.s9C("appA11yTitle",y.lcZ(10,5,"learnMore")),y.xp6(8),y.Oqu(y.lcZ(18,7,"accessAllCollectionsHelp")))}function fe(e,t){if(1&e&&(y._UZ(0,"bit-access-selector",80),y.ALo(1,"i18n"),y.ALo(2,"i18n"),y.ALo(3,"i18n"),y.ALo(4,"async")),2&e){const e=y.oxw(2);y.Q6J("permissionMode",e.PermissionMode.Edit)("showGroupColumn",e.organization.useGroups)("items",e.collectionAccessItems)("columnHeader",y.lcZ(1,7,"collection"))("selectorLabelText",y.lcZ(2,9,"selectCollections"))("emptySelectionText",y.lcZ(3,11,"noCollectionsAdded"))("flexibleCollectionsEnabled",y.lcZ(4,13,e.flexibleCollectionsEnabled$))}}function Ze(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"bit-tab-group",18),y.NdJ("selectedIndexChange",(function(t){y.CHM(e);const n=y.oxw();return y.KtG(n.tabIndex=t)})),y._uU(1,"\n        "),y.TgZ(2,"bit-tab",19),y.ALo(3,"i18n"),y._uU(4,"\n          "),y.YNc(5,re,19,10,"ng-container",6),y._uU(6,"\n          "),y.TgZ(7,"fieldset",20),y._uU(8,"\n            "),y.TgZ(9,"legend",21),y._uU(10),y.ALo(11,"i18n"),y.TgZ(12,"a",22),y.ALo(13,"i18n"),y._uU(14,"\n                "),y._UZ(15,"i",23),y._uU(16,"\n              "),y.qZA(),y._uU(17,"\n            "),y.qZA(),y._uU(18,"\n            "),y.TgZ(19,"div",24),y._uU(20,"\n              "),y._UZ(21,"input",25),y._uU(22,"\n              "),y.TgZ(23,"label",26),y._uU(24),y.ALo(25,"i18n"),y.TgZ(26,"div",27),y._uU(27),y.ALo(28,"i18n"),y.qZA(),y._uU(29,"\n              "),y.qZA(),y._uU(30,"\n            "),y.qZA(),y._uU(31,"\n            "),y.YNc(32,ae,12,7,"div",28),y.ALo(33,"async"),y._uU(34,"\n            "),y.TgZ(35,"div",24),y._uU(36,"\n              "),y._UZ(37,"input",29),y._uU(38,"\n              "),y.TgZ(39,"label",30),y._uU(40),y.ALo(41,"i18n"),y.TgZ(42,"div",27),y._uU(43),y.ALo(44,"i18n"),y.qZA(),y._uU(45,"\n              "),y.qZA(),y._uU(46,"\n            "),y.qZA(),y._uU(47,"\n            "),y.TgZ(48,"div",24),y._uU(49,"\n              "),y._UZ(50,"input",31),y._uU(51,"\n              "),y.TgZ(52,"label",32),y._uU(53),y.ALo(54,"i18n"),y.TgZ(55,"div",27),y._uU(56),y.ALo(57,"i18n"),y.qZA(),y._uU(58,"\n              "),y.qZA(),y._uU(59,"\n            "),y.qZA(),y._uU(60,"\n            "),y.TgZ(61,"div",33),y._uU(62,"\n              "),y._UZ(63,"input",34),y._uU(64,"\n              "),y.TgZ(65,"label",35),y._uU(66),y.ALo(67,"i18n"),y.YNc(68,ue,11,9,"ng-container",36),y._uU(69,"\n                "),y.YNc(70,ce,5,3,"ng-template",null,37,y.W1O),y._uU(72,"\n              "),y.qZA(),y._uU(73,"\n            "),y.qZA(),y._uU(74,"\n          "),y.qZA(),y._uU(75,"\n          "),y.YNc(76,pe,8,4,"ng-container",6),y._uU(77,"\n          "),y.YNc(78,ge,25,12,"ng-container",6),y._uU(79,"\n          "),y.TgZ(80,"bit-form-field"),y._uU(81,"\n            "),y.TgZ(82,"bit-label"),y._uU(83),y.ALo(84,"i18n"),y.qZA(),y._uU(85,"\n            "),y._UZ(86,"input",38),y._uU(87,"\n            "),y.TgZ(88,"bit-hint"),y._uU(89),y.ALo(90,"i18n"),y.qZA(),y._uU(91,"\n          "),y.qZA(),y._uU(92,"\n        "),y.qZA(),y._uU(93,"\n        "),y.YNc(94,he,13,19,"bit-tab",39),y._uU(95,"\n        "),y.TgZ(96,"bit-tab",19),y.ALo(97,"i18n"),y._uU(98,"\n          "),y.YNc(99,me,3,3,"div",40),y._uU(100,"\n          "),y.YNc(101,Ue,21,9,"div",40),y.ALo(102,"async"),y._uU(103,"\n          "),y.YNc(104,fe,5,15,"bit-access-selector",41),y.qZA(),y._uU(105,"\n      "),y.qZA()}if(2&e){const e=y.MAs(71),t=y.oxw();y.Q6J("selectedIndex",t.tabIndex),y.xp6(2),y.Q6J("label",y.lcZ(3,29,"role")),y.xp6(3),y.Q6J("ngIf",!t.editMode),y.xp6(5),y.hij("\n              ",y.lcZ(11,31,"memberRole"),"\n              "),y.xp6(2),y.s9C("appA11yTitle",y.lcZ(13,33,"learnMore")),y.xp6(9),y.Q6J("value",t.organizationUserType.User),y.xp6(3),y.hij("\n                ",y.lcZ(25,35,"user"),"\n                "),y.xp6(3),y.hij("\n                  ",y.lcZ(28,37,"userDesc"),"\n                "),y.xp6(5),y.Q6J("ngIf",!y.lcZ(33,39,t.flexibleCollectionsEnabled$)),y.xp6(5),y.Q6J("value",t.organizationUserType.Admin),y.xp6(3),y.hij("\n                ",y.lcZ(41,41,"admin"),"\n                "),y.xp6(3),y.hij("\n                  ",y.lcZ(44,43,"adminDesc"),"\n                "),y.xp6(7),y.Q6J("value",t.organizationUserType.Owner),y.xp6(3),y.hij("\n                ",y.lcZ(54,45,"owner"),"\n                "),y.xp6(3),y.hij("\n                  ",y.lcZ(57,47,"ownerDesc"),"\n                "),y.xp6(7),y.Q6J("value",t.organizationUserType.Custom),y.uIk("disabled",!t.canUseCustomPermissions||null),y.xp6(3),y.hij("\n                ",y.lcZ(67,49,"custom"),"\n                "),y.xp6(2),y.Q6J("ngIf",!t.canUseCustomPermissions)("ngIfElse",e),y.xp6(8),y.Q6J("ngIf",t.customUserTypeSelected),y.xp6(2),y.Q6J("ngIf",t.canUseSecretsManager),y.xp6(5),y.Oqu(y.lcZ(84,51,"externalId")),y.xp6(6),y.Oqu(y.lcZ(90,53,"externalIdDesc")),y.xp6(5),y.Q6J("ngIf",t.organization.useGroups),y.xp6(2),y.Q6J("label",y.lcZ(97,55,"collections")),y.xp6(3),y.Q6J("ngIf",t.organization.useGroups),y.xp6(2),y.Q6J("ngIf",!y.lcZ(102,57,t.flexibleCollectionsEnabled$)),y.xp6(3),y.Q6J("ngIf",!t.accessAllCollections)}}function _e(e,t){if(1&e&&(y.TgZ(0,"button",81),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e){const e=y.oxw();y.Q6J("bitAction",e.restore)("disabled",e.loading),y.xp6(1),y.hij("\n          ",y.lcZ(2,3,"restoreAccess"),"\n        ")}}function ve(e,t){if(1&e&&(y.TgZ(0,"button",81),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e){const e=y.oxw();y.Q6J("bitAction",e.revoke)("disabled",e.loading),y.xp6(1),y.hij("\n          ",y.lcZ(2,3,"revokeAccess"),"\n        ")}}function be(e,t){if(1&e&&(y._UZ(0,"button",82),y.ALo(1,"i18n")),2&e){const e=y.oxw();y.Q6J("appA11yTitle",y.lcZ(1,3,"delete"))("bitAction",e.delete)("disabled",e.loading)}}!function(e){e[e.Role=0]="Role",e[e.Groups=1]="Groups",e[e.Collections=2]="Collections"}(ee||(ee={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted",e.Revoked="revoked",e.Restored="restored"}(te||(te={}));class Ae{get customUserTypeSelected(){return this.formGroup.value.type===m.je.Custom}get accessAllCollections(){return this.formGroup.value.accessAllCollections}constructor(e,t,n,i,s,o,r,a,c,l,d,p){this.params=e,this.dialogRef=t,this.i18nService=n,this.platformUtilsService=i,this.organizationService=s,this.formBuilder=o,this.collectionAdminService=r,this.groupService=a,this.userService=c,this.organizationUserService=l,this.dialogService=d,this.configService=p,this.flexibleCollectionsEnabled$=this.configService.getFeatureFlag$(Z.T.FlexibleCollections,!1),this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=m.je,this.PermissionMode=A.R9,this.showNoMasterPasswordWarning=!1,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:["",{updateOn:"blur"}],type:m.je.User,externalId:this.formBuilder.control({value:"",disabled:!0}),accessAllCollections:!1,accessSecretsManager:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAssignedCollectionsGroup:this.formBuilder.group({manageAssignedCollections:!1,editAssignedCollections:!1,deleteAssignedCollections:!1}),manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new u.x,this.submit=()=>ne(this,void 0,void 0,(function*(){var e;if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex!==ee.Role&&this.platformUtilsService.showToast("error",null,this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("role"))));if(!this.canUseCustomPermissions&&this.customUserTypeSelected)return void this.platformUtilsService.showToast("error",null,this.i18nService.t("customNonEnterpriseError"));const t=new b.Qg;if(t.id=this.params.organizationUserId,t.organizationId=this.params.organizationId,t.accessAll=this.accessAllCollections,t.type=this.formGroup.value.type,t.permissions=this.setRequestPermissions(null!==(e=t.permissions)&&void 0!==e?e:new U.Q,t.type!==m.je.Custom),t.collections=this.formGroup.value.access.filter((e=>e.type===A.zD.Collection)).map(A.E2),t.groups=this.formGroup.value.groups.map((e=>e.id)),t.accessSecretsManager=this.formGroup.value.accessSecretsManager,this.editMode)yield this.userService.save(t);else{t.id=this.params.organizationUserId;const e=this.organization.planProductType===f.kv.TeamsStarter?10:20,n=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];if(n.length>e)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("tooManyEmails",e)}});if(this.organization.hasReseller&&this.params.numConfirmedMembers+n.length>this.organization.seats)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("seatLimitReachedContactYourProvider")}});yield this.userService.invite(n,t)}this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.params.name)),this.close(te.Saved)})),this.delete=()=>ne(this,void 0,void 0,(function*(){if(!this.editMode)return;const e=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";let t=yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.params.name]},content:{key:e},type:"warning"});return!!t&&(!(this.showNoMasterPasswordWarning&&(t=yield this.noMasterPasswordConfirmationDialog(),!t))&&(yield this.organizationUserService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.params.name)),void this.close(te.Deleted)))})),this.revoke=()=>ne(this,void 0,void 0,(function*(){if(!this.editMode)return;let e=yield this.dialogService.openSimpleDialog({title:{key:"revokeUserId",placeholders:[this.params.name]},content:{key:"revokeUserConfirmation"},acceptButtonText:{key:"revokeAccess"},type:"warning"});return!!e&&(!(this.showNoMasterPasswordWarning&&(e=yield this.noMasterPasswordConfirmationDialog(),!e))&&(yield this.organizationUserService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.params.name)),this.isRevoked=!0,void this.close(te.Revoked)))})),this.restore=()=>ne(this,void 0,void 0,(function*(){this.editMode&&(yield this.organizationUserService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.params.name)),this.isRevoked=!1,this.close(te.Restored))})),this.ProductType=f.kv}ngOnInit(){var e;return ne(this,void 0,void 0,(function*(){this.editMode=null!=this.params.organizationUserId,this.tabIndex=null!==(e=this.params.initialTab)&&void 0!==e?e:ee.Role,this.title=this.i18nService.t(this.editMode?"editMember":"inviteMember");const t=(0,c.of)(this.organizationService.get(this.params.organizationId)).pipe((0,l.d)({refCount:!0,bufferSize:1})),n=t.pipe((0,d.w)((e=>e.useGroups?this.groupService.getAll(this.params.organizationId):(0,c.of)([]))));(0,p.a)({organization:t,collections:this.collectionAdminService.getAll(this.params.organizationId),userDetails:this.params.organizationUserId?this.userService.get(this.params.organizationId,this.params.organizationUserId):(0,c.of)(null),groups:n}).pipe((0,g.R)(this.destroy$)).subscribe((({organization:e,collections:t,userDetails:n,groups:i})=>{this.organization=e,this.canUseCustomPermissions=e.useCustomPermissions,this.canUseSecretsManager=e.useSecretsManager&&(0,_.Sp)("secretsManager");const s=[a.kI.required,x,w(this.organization,this.params.allOrganizationUserEmails,this.i18nService.t("subscriptionUpgrade",e.seats))],o=this.formGroup.get("emails");if(o.setValidators(s),o.updateValueAndValidity(),this.collectionAccessItems=[].concat(t.map((e=>xe(e)))),this.groupAccessItems=[].concat(i.map((e=>{return t=e,{type:A.zD.Group,id:t.id,labelName:t.name,listName:t.name};var t}))),this.params.organizationUserId){if(!n)throw new Error("Could not find user to edit.");this.isRevoked=n.status===m.Dn.Revoked,this.showNoMasterPasswordWarning=n.status>m.Dn.Invited&&!1===n.hasMasterPassword;const e={editAssignedCollections:n.permissions.editAssignedCollections,deleteAssignedCollections:n.permissions.deleteAssignedCollections,manageAssignedCollections:n.permissions.editAssignedCollections&&n.permissions.deleteAssignedCollections},s={createNewCollections:n.permissions.createNewCollections,editAnyCollection:n.permissions.editAnyCollection,deleteAnyCollection:n.permissions.deleteAnyCollection,manageAllCollections:n.permissions.createNewCollections&&n.permissions.editAnyCollection&&n.permissions.deleteAnyCollection};n.type===m.je.Custom&&this.permissionsGroup.patchValue({accessEventLogs:n.permissions.accessEventLogs,accessImportExport:n.permissions.accessImportExport,accessReports:n.permissions.accessReports,manageGroups:n.permissions.manageGroups,manageSso:n.permissions.manageSso,managePolicies:n.permissions.managePolicies,manageUsers:n.permissions.manageUsers,manageResetPassword:n.permissions.manageResetPassword,manageAssignedCollectionsGroup:e,manageAllCollectionsGroup:s});const o=i.filter((e=>n.groups.includes(e.id))).flatMap((e=>e.collections.map((n=>{const i=t.find((e=>e.id===n.id));return{group:e,collection:i,accessSelection:n}}))));this.collectionAccessItems=this.collectionAccessItems.concat(o.map((({collection:e,accessSelection:t,group:n})=>xe(e,t,n))));const r=function(e){if(null==e)return[];return[].concat(e.collections.map((e=>({id:e.id,type:A.zD.Collection,permission:(0,A.d4)(e)}))))}(n),a=function(e){if(null==e)return[];return[].concat(e.map((e=>({id:e,type:A.zD.Group}))))}(n.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:n.type,externalId:n.externalId,accessAllCollections:n.accessAll,access:r,accessSecretsManager:n.accessSecretsManager,groups:a})}this.loading=!1}))}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}setRequestPermissions(e,t){if(t)return new U.Q;const n={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection,editAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.editAssignedCollections,deleteAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.deleteAssignedCollections};return Object.assign(e,n)}handleDependentPermissions(){this.permissionsGroup.value.manageResetPassword&&!this.permissionsGroup.value.manageUsers&&(this.permissionsGroup.value.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.platformUtilsService.showToast("info",null,this.i18nService.t("accountRecoveryManageUsers")))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return ne(this,void 0,void 0,(function*(){this.close(te.Canceled)}))}close(e){this.dialogRef.close(e)}noMasterPasswordConfirmationDialog(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.params.name]},type:"warning"})}}function xe(e,t,n){return{type:A.zD.Collection,id:n?`${e.id}-${n.id}`:e.id,labelName:e.name,listName:e.name,readonly:void 0!==n,readonlyPermission:t?(0,A.d4)(t):void 0,viaGroupName:null==n?void 0:n.name}}Ae.ɵfac=function(e){return new(e||Ae)(y.Y36(r.Kt),y.Y36(r.zj),y.Y36(T.D),y.Y36(q.P),y.Y36(h.Mn),y.Y36(a.qu),y.Y36(v.m),y.Y36(b.lT),y.Y36(b.XD),y.Y36(S.t),y.Y36(C.x),y.Y36(k.i))},Ae.ɵcmp=y.Xpm({type:Ae,selectors:[["ng-component"]],decls:40,vars:19,consts:[[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","variant","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"disabled","click"],[1,"tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","variant","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["role","radiogroup","aria-labelledby","roleGroupLabel",1,"tw-mb-6"],["id","roleGroupLabel",1,"tw-mb-2","tw-block","tw-text-base","tw-font-semibold","tw-text-main"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"tw-mb-2","tw-flex","tw-items-baseline"],["type","radio","id","userTypeUser","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeUser",1,"tw-m-0"],[1,"text-base","tw-block","tw-font-normal","tw-text-muted"],["class","tw-mb-2 tw-flex tw-items-baseline",4,"ngIf"],["type","radio","id","userTypeAdmin","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeAdmin",1,"tw-m-0"],["type","radio","id","userTypeOwner","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeOwner",1,"tw-m-0"],[1,"tw-flex","tw-items-baseline"],["type","radio","id","userTypeCustom","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeCustom",1,"tw-m-0"],[4,"ngIf","ngIfElse"],["enterprise",""],["bitInput","","type","text","formControlName","externalId"],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled",4,"ngIf"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["type","radio","id","userTypeManager","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeManager",1,"tw-m-0"],["href","https://bitwarden.com/contact/","target","_blank"],["customPermissionsFC",""],[1,"mt-4","d-flex","tw-font-semibold"],[1,"row",3,"formGroup"],[1,"col-6"],[1,"mb-3"],[1,"tw-font-semibold"],[1,"tw-mb-2","tw-mr-2","tw-mt-0"],["parentId","manageAssignedCollections",3,"checkboxes"],["type","checkbox","name","accessEventLogs","id","accessEventLogs","formControlName","accessEventLogs"],["for","accessEventLogs",1,"!tw-font-normal"],["type","checkbox","name","accessImportExport","id","accessImportExport","formControlName","accessImportExport"],["for","accessImportExport",1,"!tw-font-normal"],["type","checkbox","name","accessReports","id","accessReports","formControlName","accessReports"],["for","accessReports",1,"!tw-font-normal"],["parentId","manageAllCollections",3,"checkboxes"],["type","checkbox","name","manageGroups","id","manageGroups","formControlName","manageGroups"],["for","manageGroups",1,"!tw-font-normal"],["type","checkbox","name","manageSso","id","manageSso","formControlName","manageSso"],["for","manageSso",1,"!tw-font-normal"],["type","checkbox","name","managePolicies","id","managePolicies","formControlName","managePolicies"],["for","managePolicies",1,"!tw-font-normal"],["type","checkbox","name","manageUsers","id","manageUsers","formControlName","manageUsers",3,"change"],["for","manageUsers",1,"!tw-font-normal"],["type","checkbox","name","manageResetPassword","id","manageResetPassword","formControlName","manageResetPassword",3,"change"],["for","manageResetPassword",1,"!tw-font-normal"],[1,"col-4"],[1,"mt-4"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager",3,"appA11yTitle"],[1,"tw-text-muted"],["type","checkbox","bitCheckbox","","formControlName","accessSecretsManager"],[1,"tw-mb-6"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled"],["type","checkbox","bitCheckbox","","formControlName","accessAllCollections"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled"]],template:function(e,t){1&e&&(y.TgZ(0,"form",0),y._uU(1,"\n  "),y.TgZ(2,"bit-dialog",1),y._uU(3,"\n    "),y.TgZ(4,"span",2),y._uU(5),y.YNc(6,ie,2,1,"span",3),y._uU(7,"\n      "),y.YNc(8,se,3,3,"span",4),y._uU(9,"\n    "),y.qZA(),y._uU(10,"\n    "),y.TgZ(11,"div",5),y._uU(12,"\n      "),y.YNc(13,oe,9,6,"ng-container",6),y._uU(14,"\n      "),y.YNc(15,Ze,106,59,"bit-tab-group",7),y._uU(16,"\n    "),y.qZA(),y._uU(17,"\n    "),y.ynx(18,8),y._uU(19,"\n      "),y.TgZ(20,"button",9),y._uU(21),y.ALo(22,"i18n"),y.qZA(),y._uU(23,"\n      "),y.TgZ(24,"button",10),y.NdJ("click",(function(){return t.cancel()})),y._uU(25),y.ALo(26,"i18n"),y.qZA(),y._uU(27,"\n      "),y.TgZ(28,"div",11),y._uU(29,"\n        "),y.YNc(30,_e,3,5,"button",12),y._uU(31,"\n        "),y.YNc(32,ve,3,5,"button",12),y._uU(33,"\n        "),y.YNc(34,be,2,5,"button",13),y._uU(35,"\n      "),y.qZA(),y._uU(36,"\n    "),y.BQk(),y._uU(37,"\n  "),y.qZA(),y._uU(38,"\n"),y.qZA(),y._uU(39,"\n")),2&e&&(y.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),y.xp6(2),y.Q6J("disablePadding",!t.loading),y.xp6(3),y.hij("\n      ",t.title,"\n      "),y.xp6(1),y.Q6J("ngIf",!t.loading&&t.params.name),y.xp6(2),y.Q6J("ngIf",t.isRevoked),y.xp6(5),y.Q6J("ngIf",t.loading),y.xp6(2),y.Q6J("ngIf",!t.loading),y.xp6(5),y.Q6J("disabled",t.loading),y.xp6(1),y.hij("\n        ",y.lcZ(22,15,"save"),"\n      "),y.xp6(3),y.Q6J("disabled",t.loading),y.xp6(1),y.hij("\n        ",y.lcZ(26,17,"cancel"),"\n      "),y.xp6(5),y.Q6J("ngIf",t.editMode&&t.isRevoked),y.xp6(2),y.Q6J("ngIf",t.editMode&&!t.isRevoked),y.xp6(2),y.Q6J("ngIf",t.editMode))},dependencies:[I.O5,a._Y,a.Fj,a.Wl,a._,a.JJ,a.JL,a.sg,a.u,P.B,N.Q,M.b,L.u,J.l,Q.r,z.b,O.a,Y.d,R.G,G.A,j.u,E.M,B.Q,D.Q,F.i,$.f,X,I.Ov,H.C],encapsulation:2});var we=n(20953);class ye{}ye.ɵfac=function(e){return new(e||ye)},ye.ɵmod=y.oAB({type:ye}),ye.ɵinj=y.cJS({imports:[o.P,we.c]});var Te=n(75557),qe=n(47064),Se=n(92786),Ce=n(59260),ke=n(59157),Ie=n(99042),Pe=n(70032),Ne=n(5712),Me=n(19576),Le=n(77494);class Je{}var Qe=n(44882),ze=n(68134),Oe=n(54193),Ye=n(33287),Re=n(42844),Ge=n(76528),je=n(66459),Ee=n(58172),Be=n(24610),De=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Fe(e,t){if(1&e&&(y.TgZ(0,"small",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.name)}}class $e{constructor(e,t,n){this.cryptoService=e,this.logService=t,this.stateService=n,this.onConfirmedUser=new y.vpe,this.dontAskAgain=!1,this.loading=!0}ngOnInit(){return De(this,void 0,void 0,(function*(){try{if(null!=this.publicKey){const e=yield this.cryptoService.getFingerprint(this.userId,this.publicKey);null!=e&&(this.fingerprint=e.join("-"))}}catch(e){this.logService.error(e)}this.loading=!1}))}submit(){return De(this,void 0,void 0,(function*(){this.loading||(this.dontAskAgain&&(yield this.stateService.setAutoConfirmFingerprints(!0)),this.onConfirmedUser.emit())}))}}$e.ɵfac=function(e){return new(e||$e)(y.Y36(Ge.$),y.Y36(je.$),y.Y36(Ee.b))},$e.ɵcmp=y.Xpm({type:$e,selectors:[["app-user-confirm"]],inputs:{name:"name",userId:"userId",publicKey:"publicKey"},outputs:{onConfirmedUser:"onConfirmedUser"},decls:69,vars:29,consts:[["role","dialog","aria-modal","true","aria-labelledby","confirmUserTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","confirmUserTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener"],[1,"form-check"],["type","checkbox","id","dontAskAgain","name","DontAskAgain",1,"form-check-input",3,"ngModel","ngModelChange"],["for","dontAskAgain",1,"form-check-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"]],template:function(e,t){if(1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y.TgZ(2,"div",1),y._uU(3,"\n    "),y.TgZ(4,"form",2,3),y.NdJ("ngSubmit",(function(){return t.submit()})),y._uU(6,"\n      "),y.TgZ(7,"div",4),y._uU(8,"\n        "),y.TgZ(9,"h1",5),y._uU(10),y.ALo(11,"i18n"),y.YNc(12,Fe,2,1,"small",6),y._uU(13,"\n        "),y.qZA(),y._uU(14,"\n        "),y.TgZ(15,"button",7),y.ALo(16,"i18n"),y._uU(17,"\n          "),y.TgZ(18,"span",8),y._uU(19,"×"),y.qZA(),y._uU(20,"\n        "),y.qZA(),y._uU(21,"\n      "),y.qZA(),y._uU(22,"\n      "),y.TgZ(23,"div",9),y._uU(24,"\n        "),y.TgZ(25,"p"),y._uU(26),y.ALo(27,"i18n"),y.TgZ(28,"a",10),y._uU(29),y.ALo(30,"i18n"),y.qZA(),y._uU(31,"\n        "),y.qZA(),y._uU(32,"\n        "),y.TgZ(33,"p"),y._uU(34,"\n          "),y.TgZ(35,"code"),y._uU(36),y.qZA(),y._uU(37,"\n        "),y.qZA(),y._uU(38,"\n        "),y.TgZ(39,"div",11),y._uU(40,"\n          "),y.TgZ(41,"input",12),y.NdJ("ngModelChange",(function(e){return t.dontAskAgain=e})),y.qZA(),y._uU(42,"\n          "),y.TgZ(43,"label",13),y._uU(44),y.ALo(45,"i18n"),y.qZA(),y._uU(46,"\n        "),y.qZA(),y._uU(47,"\n      "),y.qZA(),y._uU(48,"\n      "),y.TgZ(49,"div",14),y._uU(50,"\n        "),y.TgZ(51,"button",15),y._uU(52,"\n          "),y._UZ(53,"i",16),y.ALo(54,"i18n"),y._uU(55,"\n          "),y.TgZ(56,"span"),y._uU(57),y.ALo(58,"i18n"),y.qZA(),y._uU(59,"\n        "),y.qZA(),y._uU(60,"\n        "),y.TgZ(61,"button",17),y._uU(62),y.ALo(63,"i18n"),y.qZA(),y._uU(64,"\n      "),y.qZA(),y._uU(65,"\n    "),y.qZA(),y._uU(66,"\n  "),y.qZA(),y._uU(67,"\n"),y.qZA(),y._uU(68,"\n")),2&e){const e=y.MAs(5);y.xp6(4),y.Q6J("appApiAction",t.formPromise),y.xp6(6),y.hij("\n          ",y.lcZ(11,13,"confirmUser"),"\n          "),y.xp6(2),y.Q6J("ngIf",t.name),y.xp6(3),y.s9C("appA11yTitle",y.lcZ(16,15,"close")),y.xp6(11),y.hij("\n          ",y.lcZ(27,17,"fingerprintEnsureIntegrityVerify"),"\n          "),y.xp6(3),y.hij("\n            ",y.lcZ(30,19,"learnMore"),""),y.xp6(7),y.Oqu(t.fingerprint),y.xp6(5),y.Q6J("ngModel",t.dontAskAgain),y.xp6(3),y.hij("\n            ",y.lcZ(45,21,"dontAskFingerprintAgain"),"\n          "),y.xp6(7),y.Q6J("disabled",e.loading),y.xp6(2),y.s9C("title",y.lcZ(54,23,"loading")),y.xp6(4),y.Oqu(y.lcZ(58,25,"confirm")),y.xp6(5),y.hij("\n          ",y.lcZ(63,27,"cancel"),"\n        ")}},dependencies:[I.O5,a._Y,a.Wl,a.JJ,a.JL,a.On,a.F,P.B,Be.b,H.C],encapsulation:2});var Ke=n(55602),He=n(51430),We=n(14494),Ve=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};const Xe=["confirmTemplate"];class et{get allCount(){return null!=this.activeUsers?this.activeUsers.length:0}get invitedCount(){return this.statusMap.has(this.userStatusType.Invited)?this.statusMap.get(this.userStatusType.Invited).length:0}get acceptedCount(){return this.statusMap.has(this.userStatusType.Accepted)?this.statusMap.get(this.userStatusType.Accepted).length:0}get confirmedCount(){return this.statusMap.has(this.userStatusType.Confirmed)?this.statusMap.get(this.userStatusType.Confirmed).length:0}get revokedCount(){return this.statusMap.has(this.userStatusType.Revoked)?this.statusMap.get(this.userStatusType.Revoked).length:0}get showConfirmUsers(){return null!=this.activeUsers&&null!=this.statusMap&&this.activeUsers.length>1&&this.confirmedCount>0&&this.confirmedCount<3&&this.acceptedCount>0}get showBulkConfirmUsers(){return this.acceptedCount>0}constructor(e,t,n,i,s,o,r,a,u,c,l,d){this.apiService=e,this.searchService=t,this.i18nService=n,this.platformUtilsService=i,this.cryptoService=s,this.validationService=o,this.modalService=r,this.logService=a,this.searchPipe=u,this.userNamePipe=c,this.stateService=l,this.dialogService=d,this.loading=!0,this.statusMap=new Map,this.users=[],this.pagedUsers=[],this.allUsers=[],this.activeUsers=[],this.didScroll=!1,this.pageSize=100,this.pagedUsersCount=0}load(){return Ve(this,void 0,void 0,(function*(){const e=yield this.getUsers();this.statusMap.clear(),this.activeUsers=[];for(const t of K.c.iterateEnum(this.userStatusType))this.statusMap.set(t,[]);e instanceof Re.L?this.allUsers=null!=e.data&&e.data.length>0?e.data:[]:Array.isArray(e)&&(this.allUsers=e),this.allUsers.sort(K.c.getSortFunction(this.i18nService,"email")),this.allUsers.forEach((e=>{this.statusMap.has(e.status)?this.statusMap.get(e.status).push(e):this.statusMap.set(e.status,[e]),e.status!==this.userStatusType.Revoked&&this.activeUsers.push(e)})),this.filter(this.status),this.loading=!1}))}filter(e){this.status=e,null!=this.status?this.users=this.statusMap.get(this.status):this.users=this.activeUsers,this.selectAll(!1),this.resetPaging()}loadMore(){if(!this.users||this.users.length<=this.pageSize)return;const e=this.pagedUsers.length;let t=this.pageSize;0===e&&this.pagedUsersCount>this.pageSize&&(t=this.pagedUsersCount),this.users.length>e&&(this.pagedUsers=this.pagedUsers.concat(this.users.slice(e,e+t))),this.pagedUsersCount=this.pagedUsers.length,this.didScroll=this.pagedUsers.length>this.pageSize}checkUser(e,t){e.checked=null==t?!e.checked:t}selectAll(e){e&&this.selectAll(!1);const t=this.searchPipe.transform(this.users,this.searchText,"name","email","id"),n=e&&t.length>500?500:t.length;for(let i=0;i<n;i++)this.checkUser(t[i],e)}resetPaging(){return Ve(this,void 0,void 0,(function*(){this.pagedUsers=[],this.loadMore()}))}invite(){this.edit(null)}removeUserConfirmationDialog(e){return Ve(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:this.userNamePipe.transform(e),content:{key:"removeUserConfirmation"},type:"warning"})}))}remove(e){return Ve(this,void 0,void 0,(function*(){if(!(yield this.removeUserConfirmationDialog(e)))return!1;this.actionPromise=this.deleteUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.userNamePipe.transform(e))),this.removeUser(e)}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}revokeUserConfirmationDialog(e){return Ve(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(e)]},content:this.revokeWarningMessage(),acceptButtonText:{key:"revokeAccess"},type:"warning"})}))}revoke(e){return Ve(this,void 0,void 0,(function*(){if(!(yield this.revokeUserConfirmationDialog(e)))return!1;this.actionPromise=this.revokeUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.userNamePipe.transform(e))),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}restore(e){return Ve(this,void 0,void 0,(function*(){this.actionPromise=this.restoreUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.userNamePipe.transform(e))),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}reinvite(e){return Ve(this,void 0,void 0,(function*(){if(null==this.actionPromise){this.actionPromise=this.reinviteUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenReinvited",this.userNamePipe.transform(e)))}catch(t){this.validationService.showError(t)}this.actionPromise=null}}))}confirm(e){return Ve(this,void 0,void 0,(function*(){const t=t=>Ve(this,void 0,void 0,(function*(){try{this.actionPromise=this.confirmUser(e,t),yield this.actionPromise,function(t){e.status=t.userStatusType.Confirmed;const n=t.statusMap.get(t.userStatusType.Accepted).indexOf(e);n>-1&&(t.statusMap.get(t.userStatusType.Accepted).splice(n,1),t.statusMap.get(t.userStatusType.Confirmed).push(e))}(this),this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(e)))}catch(n){throw this.validationService.showError(n),n}finally{this.actionPromise=null}}));if(null==this.actionPromise)try{const i=yield this.apiService.getUserPublicKey(e.userId),s=K.c.fromB64ToArray(i.publicKey),o=yield this.stateService.getAutoConfirmFingerPrints();if(null==o||!o){const[n]=yield this.modalService.openViewRef($e,this.confirmModalRef,(i=>{i.name=this.userNamePipe.transform(e),i.userId=null!=e?e.userId:null,i.publicKey=s,i.onConfirmedUser.subscribe((()=>Ve(this,void 0,void 0,(function*(){try{i.formPromise=t(s),yield i.formPromise,n.close()}catch(e){this.logService.error(e)}}))))}));return}try{const t=yield this.cryptoService.getFingerprint(e.userId,s);this.logService.info(`User's fingerprint: ${t.join("-")}`)}catch(n){this.logService.error(n)}yield t(s)}catch(n){this.logService.error(`Handled exception: ${n}`)}}))}isSearching(){return this.searchService.isSearchable(this.searchText)}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.users&&this.users.length>this.pageSize}revokeWarningMessage(){return this.i18nService.t("revokeUserConfirmation")}getCheckedUsers(){return this.users.filter((e=>e.checked))}removeUser(e){let t=this.users.indexOf(e);t>-1&&(this.users.splice(t,1),this.resetPaging()),t=this.allUsers.indexOf(e),t>-1&&this.allUsers.splice(t,1),this.statusMap.has(e.status)&&(t=this.statusMap.get(e.status).indexOf(e),t>-1&&this.statusMap.get(e.status).splice(t,1))}}et.ɵfac=function(e){return new(e||et)(y.Y36(Ke.s),y.Y36(He.o),y.Y36(T.D),y.Y36(q.P),y.Y36(Ge.$),y.Y36(We.R),y.Y36(Le.Z),y.Y36(je.$),y.Y36(Ne.C),y.Y36(Me.z),y.Y36(Ee.b),y.Y36(C.x))},et.ɵdir=y.lG2({type:et,viewQuery:function(e,t){if(1&e&&y.Gf(Xe,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.confirmModalRef=e.first)}}});var tt=n(50342);class nt{constructor(){this.collections=[],this.groups=[],this.groupNames=[],this.collectionNames=[]}static fromResponse(e){const t=Object.assign(new nt,e);return null!=e.collections&&(t.collections=e.collections.map((e=>new tt.K(e)))),null!=e.groups&&(t.groups=e.groups),t}}class it{constructor(e){this.keys=e}}var st=n(53707),ot=n(14970),rt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function at(e,t){1&e&&(y.TgZ(0,"div",15),y._uU(1,"\n          "),y._UZ(2,"i",16),y.ALo(3,"i18n"),y._uU(4),y.ALo(5,"i18n"),y.qZA()),2&e&&(y.xp6(2),y.s9C("title",y.lcZ(3,2,"loading")),y.xp6(2),y.hij("\n          ",y.lcZ(5,4,"loading"),"\n        "))}function ut(e,t){1&e&&(y.TgZ(0,"app-callout",17),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n          ",y.lcZ(2,1,"noSelectedUsersApplicable"),"\n        "))}function ct(e,t){if(1&e&&(y.TgZ(0,"app-callout",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij("\n          ",e.error,"\n        ")}}function lt(e,t){if(1&e&&(y.TgZ(0,"small",26),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function dt(e,t){if(1&e&&(y.TgZ(0,"tr"),y._uU(1,"\n              "),y.TgZ(2,"td",23),y._uU(3,"\n                "),y._UZ(4,"bit-avatar",24),y.ALo(5,"userName"),y._uU(6,"\n              "),y.qZA(),y._uU(7,"\n              "),y.TgZ(8,"td"),y._uU(9),y.YNc(10,lt,2,1,"small",25),y._uU(11,"\n              "),y.qZA(),y._uU(12,"\n              "),y.TgZ(13,"td"),y._uU(14),y.qZA(),y._uU(15,"\n            "),y.qZA()),2&e){const e=t.$implicit,n=y.oxw(2);y.xp6(4),y.Q6J("text",y.lcZ(5,5,e))("id",e.id),y.xp6(5),y.hij("\n                ",e.email,"\n                "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(4),y.hij("\n                ",n.fingerprints.get(e.id),"\n              ")}}function pt(e,t){if(1&e&&(y.TgZ(0,"small",26),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function gt(e,t){if(1&e&&(y.TgZ(0,"tr"),y._uU(1,"\n              "),y.TgZ(2,"td",23),y._uU(3,"\n                "),y._UZ(4,"bit-avatar",24),y.ALo(5,"userName"),y._uU(6,"\n              "),y.qZA(),y._uU(7,"\n              "),y.TgZ(8,"td"),y._uU(9),y.YNc(10,pt,2,1,"small",25),y._uU(11,"\n              "),y.qZA(),y._uU(12,"\n              "),y.TgZ(13,"td"),y._uU(14),y.ALo(15,"i18n"),y.qZA(),y._uU(16,"\n            "),y.qZA()),2&e){const e=t.$implicit;y.xp6(4),y.Q6J("text",y.lcZ(5,5,e))("id",e.id),y.xp6(5),y.hij("\n                ",e.email,"\n                "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(4),y.hij("\n                ",y.lcZ(15,7,"bulkFilteredMessage"),"\n              ")}}function ht(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n          "),y.TgZ(2,"p"),y._uU(3),y.ALo(4,"i18n"),y.TgZ(5,"a",19),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n          "),y.qZA(),y._uU(9,"\n          "),y.TgZ(10,"table",20),y._uU(11,"\n            "),y.TgZ(12,"thead"),y._uU(13,"\n              "),y.TgZ(14,"tr"),y._uU(15,"\n                "),y.TgZ(16,"th",21),y._uU(17),y.ALo(18,"i18n"),y.qZA(),y._uU(19,"\n                "),y.TgZ(20,"th"),y._uU(21),y.ALo(22,"i18n"),y.qZA(),y._uU(23,"\n              "),y.qZA(),y._uU(24,"\n            "),y.qZA(),y._uU(25,"\n            "),y.YNc(26,dt,16,7,"tr",22),y._uU(27,"\n            "),y.YNc(28,gt,17,9,"tr",22),y._uU(29,"\n          "),y.qZA(),y._uU(30,"\n        "),y.BQk()),2&e){const e=y.oxw();y.xp6(3),y.hij("\n            ",y.lcZ(4,6,"fingerprintEnsureIntegrityVerify"),"\n            "),y.xp6(3),y.hij("\n              ",y.lcZ(7,8,"learnMore"),""),y.xp6(11),y.Oqu(y.lcZ(18,10,"user")),y.xp6(4),y.Oqu(y.lcZ(22,12,"fingerprint")),y.xp6(5),y.Q6J("ngForOf",e.filteredUsers),y.xp6(2),y.Q6J("ngForOf",e.excludedUsers)}}function mt(e,t){if(1&e&&(y.TgZ(0,"small",26),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function Ut(e,t){if(1&e&&(y.TgZ(0,"td"),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit,t=y.oxw(2);y.xp6(1),y.hij("\n                ",t.statuses.get(e.id),"\n              ")}}function ft(e,t){1&e&&(y.TgZ(0,"td"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n                ",y.lcZ(2,1,"bulkFilteredMessage"),"\n              "))}function Zt(e,t){if(1&e&&(y.TgZ(0,"tr"),y._uU(1,"\n              "),y.TgZ(2,"td",23),y._uU(3,"\n                "),y._UZ(4,"bit-avatar",24),y.ALo(5,"userName"),y._uU(6,"\n              "),y.qZA(),y._uU(7,"\n              "),y.TgZ(8,"td"),y._uU(9),y.YNc(10,mt,2,1,"small",25),y._uU(11,"\n              "),y.qZA(),y._uU(12,"\n              "),y.YNc(13,Ut,2,1,"td",11),y._uU(14,"\n              "),y.YNc(15,ft,3,3,"td",11),y._uU(16,"\n            "),y.qZA()),2&e){const e=t.$implicit,n=y.oxw(2);y.xp6(4),y.Q6J("text",y.lcZ(5,6,e))("id",e.id),y.xp6(5),y.hij("\n                ",e.email,"\n                "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(3),y.Q6J("ngIf",n.statuses.has(e.id)),y.xp6(2),y.Q6J("ngIf",!n.statuses.has(e.id))}}function _t(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n          "),y.TgZ(2,"table",20),y._uU(3,"\n            "),y.TgZ(4,"thead"),y._uU(5,"\n              "),y.TgZ(6,"tr"),y._uU(7,"\n                "),y.TgZ(8,"th",21),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n                "),y.TgZ(12,"th"),y._uU(13),y.ALo(14,"i18n"),y.qZA(),y._uU(15,"\n              "),y.qZA(),y._uU(16,"\n            "),y.qZA(),y._uU(17,"\n            "),y.YNc(18,Zt,17,8,"tr",22),y._uU(19,"\n          "),y.qZA(),y._uU(20,"\n        "),y.BQk()),2&e){const e=y.oxw();y.xp6(9),y.Oqu(y.lcZ(10,3,"user")),y.xp6(4),y.Oqu(y.lcZ(14,5,"status")),y.xp6(5),y.Q6J("ngForOf",e.filteredUsers)}}function vt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",27),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.submit())})),y._uU(1,"\n          "),y._UZ(2,"i",16),y.ALo(3,"i18n"),y._uU(4,"\n          "),y.TgZ(5,"span"),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n        "),y.qZA()}if(2&e){const e=y.oxw();y.Q6J("disabled",e.loading),y.xp6(2),y.s9C("title",y.lcZ(3,3,"loading")),y.xp6(4),y.Oqu(y.lcZ(7,5,"confirm"))}}class bt{constructor(e,t,n,i){this.cryptoService=e,this.apiService=t,this.organizationUserService=n,this.i18nService=i,this.publicKeys=new Map,this.fingerprints=new Map,this.statuses=new Map,this.loading=!0,this.done=!1}ngOnInit(){return rt(this,void 0,void 0,(function*(){this.excludedUsers=this.users.filter((e=>!this.isAccepted(e))),this.filteredUsers=this.users.filter((e=>this.isAccepted(e))),this.filteredUsers.length<=0&&(this.done=!0);const e=yield this.getPublicKeys();for(const t of e.data){const e=K.c.fromB64ToArray(t.key),n=yield this.cryptoService.getFingerprint(t.userId,e);null!=n&&(this.publicKeys.set(t.id,e),this.fingerprints.set(t.id,n.join("-")))}this.loading=!1}))}submit(){return rt(this,void 0,void 0,(function*(){this.loading=!0;try{const e=yield this.getCryptoKey(),t=[];for(const n of this.filteredUsers){const i=this.publicKeys.get(n.id);if(null==i)continue;const s=yield this.cryptoService.rsaEncrypt(e.key,i);t.push({id:n.id,key:s.encryptedString})}(yield this.postConfirmRequest(t)).data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkConfirmMessage");this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}isAccepted(e){return e.status===m.Dn.Accepted}getPublicKeys(){return rt(this,void 0,void 0,(function*(){return yield this.organizationUserService.postOrganizationUsersPublicKey(this.organizationId,this.filteredUsers.map((e=>e.id)))}))}getCryptoKey(){return this.cryptoService.getOrgKey(this.organizationId)}postConfirmRequest(e){return rt(this,void 0,void 0,(function*(){const t=new it(e);return yield this.organizationUserService.postOrganizationUserBulkConfirm(this.organizationId,t)}))}}bt.ɵfac=function(e){return new(e||bt)(y.Y36(Ge.$),y.Y36(Ke.s),y.Y36(S.t),y.Y36(T.D))},bt.ɵcmp=y.Xpm({type:bt,selectors:[["app-bulk-confirm"]],inputs:{organizationId:"organizationId",users:"users"},decls:45,vars:15,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center",4,"ngIf"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","danger"],["type","error"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["width","30"],["size","small",3,"text","id"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y.TgZ(2,"div",1),y._uU(3,"\n    "),y.TgZ(4,"div",2),y._uU(5,"\n      "),y.TgZ(6,"div",3),y._uU(7,"\n        "),y.TgZ(8,"h1",4),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n        "),y.TgZ(12,"button",5),y.ALo(13,"i18n"),y._uU(14,"\n          "),y.TgZ(15,"span",6),y._uU(16,"×"),y.qZA(),y._uU(17,"\n        "),y.qZA(),y._uU(18,"\n      "),y.qZA(),y._uU(19,"\n      "),y.TgZ(20,"div",7),y._uU(21,"\n        "),y.YNc(22,at,6,6,"div",8),y._uU(23,"\n        "),y.YNc(24,ut,3,3,"app-callout",9),y._uU(25,"\n        "),y.YNc(26,ct,2,1,"app-callout",10),y._uU(27,"\n        "),y.YNc(28,ht,31,14,"ng-container",11),y._uU(29,"\n        "),y.YNc(30,_t,21,7,"ng-container",11),y._uU(31,"\n      "),y.qZA(),y._uU(32,"\n      "),y.TgZ(33,"div",12),y._uU(34,"\n        "),y.YNc(35,vt,9,7,"button",13),y._uU(36,"\n        "),y.TgZ(37,"button",14),y._uU(38),y.ALo(39,"i18n"),y.qZA(),y._uU(40,"\n      "),y.qZA(),y._uU(41,"\n    "),y.qZA(),y._uU(42,"\n  "),y.qZA(),y._uU(43,"\n"),y.qZA(),y._uU(44,"\n")),2&e&&(y.xp6(9),y.hij("\n          ",y.lcZ(10,9,"confirmUsers"),"\n        "),y.xp6(3),y.s9C("appA11yTitle",y.lcZ(13,11,"close")),y.xp6(10),y.Q6J("ngIf",t.loading),y.xp6(2),y.Q6J("ngIf",t.filteredUsers.length<=0),y.xp6(2),y.Q6J("ngIf",t.error),y.xp6(2),y.Q6J("ngIf",!t.loading&&!t.done),y.xp6(2),y.Q6J("ngIf",!t.loading&&t.done),y.xp6(5),y.Q6J("ngIf",!t.done),y.xp6(3),y.hij("\n          ",y.lcZ(39,13,"close"),"\n        "))},dependencies:[I.sg,I.O5,P.B,st.O,ot.A,H.C,Me.z],encapsulation:2});var At=n(2138),xt=n(18362),wt=n(54735),yt=n(50941),Tt=n(26361),qt=n(73672),St=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Ct(e,t){if(1&e&&(y.TgZ(0,"div",16),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.hij("\n                  ",e.email,"\n                ")}}function kt(e,t){if(1&e&&(y.TgZ(0,"tr",11),y._uU(1,"\n          "),y.TgZ(2,"td",5),y._uU(3,"\n            "),y.TgZ(4,"div",12),y._uU(5,"\n              "),y._UZ(6,"bit-avatar",13),y.ALo(7,"userName"),y._uU(8,"\n              "),y.TgZ(9,"div",14),y._uU(10,"\n                "),y.TgZ(11,"div"),y._uU(12),y.ALo(13,"userName"),y.qZA(),y._uU(14,"\n                "),y.YNc(15,Ct,2,1,"div",15),y._uU(16,"\n              "),y.qZA(),y._uU(17,"\n            "),y.qZA(),y._uU(18,"\n          "),y.qZA(),y._uU(19,"\n          "),y.TgZ(20,"td",5),y._uU(21),y.ALo(22,"userType"),y.qZA(),y._uU(23,"\n        "),y.qZA()),2&e){const e=t.$implicit;y.xp6(6),y.Q6J("text",y.lcZ(7,6,e))("id",e.userId)("color",e.avatarColor),y.xp6(6),y.hij("\n                  ",y.lcZ(13,8,e),"\n                "),y.xp6(3),y.Q6J("ngIf",e.name),y.xp6(6),y.Oqu(y.lcZ(22,10,e.type))}}function It(e,t){if(1&e&&(y._uU(0,"\n        "),y.YNc(1,kt,24,12,"tr",10),y.ALo(2,"async"),y._uU(3,"\n      ")),2&e){const e=t.$implicit;y.xp6(1),y.Q6J("ngForOf",y.lcZ(2,1,e))}}class Pt{constructor(e,t,n,i,s){this.dialogRef=e,this.data=t,this.organizationUserService=n,this.platformUtilsService=i,this.i18nService=s,this.dataSource=new At.G,this.submit=()=>St(this,void 0,void 0,(function*(){yield this.organizationUserService.putOrganizationUserBulkEnableSecretsManager(this.data.orgId,this.dataSource.data.map((e=>e.id))),this.platformUtilsService.showToast("success",null,this.i18nService.t("activatedAccessToSecretsManager")),this.dialogRef.close()}))}ngOnInit(){this.dataSource.data=this.data.users}static open(e,t){return e.open(Pt,{data:t})}}Pt.ɵfac=function(e){return new(e||Pt)(y.Y36(r.zj),y.Y36(r.Kt),y.Y36(S.t),y.Y36(q.P),y.Y36(T.D))},Pt.ɵcmp=y.Xpm({type:Pt,selectors:[["ng-component"]],decls:44,vars:20,consts:[["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],[3,"dataSource"],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["class","tw-text-sm tw-text-muted",4,"ngIf"],[1,"tw-text-sm","tw-text-muted"]],template:function(e,t){1&e&&(y.TgZ(0,"bit-dialog",0),y._uU(1,"\n  "),y.TgZ(2,"span",1),y._uU(3),y.ALo(4,"i18n"),y.qZA(),y._uU(5,"\n  "),y.TgZ(6,"span",2),y._uU(7,"\n    "),y.TgZ(8,"p"),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n    "),y.TgZ(12,"bit-table",3),y._uU(13,"\n      "),y.ynx(14,4),y._uU(15,"\n        "),y.TgZ(16,"tr"),y._uU(17,"\n          "),y.TgZ(18,"th",5),y._uU(19),y.ALo(20,"i18n"),y.qZA(),y._uU(21,"\n          "),y.TgZ(22,"th",5),y._uU(23),y.ALo(24,"i18n"),y.qZA(),y._uU(25,"\n        "),y.qZA(),y._uU(26,"\n      "),y.BQk(),y._uU(27,"\n      "),y.YNc(28,It,4,3,"ng-template",6),y._uU(29,"\n    "),y.qZA(),y._uU(30,"\n  "),y.qZA(),y._uU(31,"\n  "),y.ynx(32,7),y._uU(33,"\n    "),y.TgZ(34,"button",8),y._uU(35),y.ALo(36,"i18n"),y.qZA(),y._uU(37,"\n    "),y.TgZ(38,"button",9),y._uU(39),y.ALo(40,"i18n"),y.qZA(),y._uU(41,"\n  "),y.BQk(),y._uU(42,"\n"),y.qZA(),y._uU(43,"\n")),2&e&&(y.xp6(3),y.Oqu(y.lcZ(4,8,"activateSecretsManager")),y.xp6(6),y.Oqu(y.lcZ(10,10,"bulkEnableSecretsManagerDescription")),y.xp6(3),y.Q6J("dataSource",t.dataSource),y.xp6(7),y.Oqu(y.lcZ(20,12,"member")),y.xp6(4),y.Oqu(y.lcZ(24,14,"role")),y.xp6(11),y.Q6J("bitAction",t.submit),y.xp6(1),y.hij("\n      ",y.lcZ(36,16,"activateAccess"),"\n    "),y.xp6(4),y.hij("\n      ",y.lcZ(40,18,"close"),"\n    "))},dependencies:[I.sg,I.O5,N.Q,ot.A,Q.r,O.a,xt.f,wt.a,yt.Y,Tt.v,wt.f,I.Ov,H.C,Me.z,qt.t],encapsulation:2});var Nt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Mt(e,t){1&e&&(y.TgZ(0,"app-callout",14),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n          ",y.lcZ(2,1,"noSelectedUsersApplicable"),"\n        "))}function Lt(e,t){if(1&e&&(y.TgZ(0,"app-callout",15),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij("\n          ",e.error,"\n        ")}}function Jt(e,t){1&e&&(y.TgZ(0,"p"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n              ",y.lcZ(2,1,"removeMembersWithoutMasterPasswordWarning"),"\n            "))}function Qt(e,t){if(1&e&&(y.TgZ(0,"app-callout",20),y._uU(1,"\n            "),y.TgZ(2,"p"),y._uU(3),y.qZA(),y._uU(4,"\n            "),y.YNc(5,Jt,3,3,"p",10),y._uU(6,"\n          "),y.qZA()),2&e){const e=y.oxw(2);y.xp6(3),y.Oqu(e.removeUsersWarning),y.xp6(2),y.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function zt(e,t){1&e&&(y.TgZ(0,"th"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"details")))}function Ot(e,t){if(1&e&&(y.TgZ(0,"small",24),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function Yt(e,t){1&e&&(y.ynx(0),y._uU(1," - "),y.BQk())}function Rt(e,t){1&e&&(y.ynx(0),y._uU(1,"\n                    "),y._UZ(2,"i",26),y._uU(3),y.ALo(4,"i18n"),y.BQk()),2&e&&(y.xp6(3),y.hij("\n                    ",y.lcZ(4,1,"noMasterPassword"),"\n                  "))}function Gt(e,t){if(1&e&&(y.TgZ(0,"td"),y._uU(1,"\n                "),y.TgZ(2,"span",25),y._uU(3,"\n                  "),y.YNc(4,Yt,2,0,"ng-container",10),y._uU(5,"\n                  "),y.YNc(6,Rt,5,3,"ng-container",10),y._uU(7,"\n                "),y.qZA(),y._uU(8,"\n              "),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(4),y.Q6J("ngIf",!0===e.hasMasterPassword),y.xp6(2),y.Q6J("ngIf",!1===e.hasMasterPassword)}}function jt(e,t){if(1&e&&(y.TgZ(0,"tr"),y._uU(1,"\n              "),y.TgZ(2,"td",21),y._uU(3,"\n                "),y._UZ(4,"bit-avatar",22),y.ALo(5,"userName"),y._uU(6,"\n              "),y.qZA(),y._uU(7,"\n              "),y.TgZ(8,"td"),y._uU(9),y.YNc(10,Ot,2,1,"small",23),y._uU(11,"\n              "),y.qZA(),y._uU(12,"\n              "),y.YNc(13,Gt,9,2,"td",10),y._uU(14,"\n            "),y.qZA()),2&e){const e=t.$implicit,n=y.oxw(2);y.xp6(4),y.Q6J("text",y.lcZ(5,5,e))("id",e.id),y.xp6(5),y.hij("\n                ",e.email,"\n                "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(3),y.Q6J("ngIf",n.showNoMasterPasswordWarning)}}function Et(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n          "),y.YNc(2,Qt,7,2,"app-callout",16),y._uU(3,"\n          "),y.TgZ(4,"table",17),y._uU(5,"\n            "),y.TgZ(6,"thead"),y._uU(7,"\n              "),y.TgZ(8,"tr"),y._uU(9,"\n                "),y.TgZ(10,"th",18),y._uU(11),y.ALo(12,"i18n"),y.qZA(),y._uU(13,"\n                "),y.YNc(14,zt,3,3,"th",10),y._uU(15,"\n              "),y.qZA(),y._uU(16,"\n            "),y.qZA(),y._uU(17,"\n            "),y.YNc(18,jt,15,7,"tr",19),y._uU(19,"\n          "),y.qZA(),y._uU(20,"\n        "),y.BQk()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.users.length>0&&!e.error),y.xp6(9),y.Oqu(y.lcZ(12,4,"user")),y.xp6(3),y.Q6J("ngIf",e.showNoMasterPasswordWarning),y.xp6(4),y.Q6J("ngForOf",e.users)}}function Bt(e,t){if(1&e&&(y.TgZ(0,"small",24),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function Dt(e,t){if(1&e&&(y.TgZ(0,"td"),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit,t=y.oxw(2);y.xp6(1),y.hij("\n                ",t.statuses.get(e.id),"\n              ")}}function Ft(e,t){1&e&&(y.TgZ(0,"td"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n                ",y.lcZ(2,1,"bulkFilteredMessage"),"\n              "))}function $t(e,t){if(1&e&&(y.TgZ(0,"tr"),y._uU(1,"\n              "),y.TgZ(2,"td",21),y._uU(3,"\n                "),y._UZ(4,"bit-avatar",22),y.ALo(5,"userName"),y._uU(6,"\n              "),y.qZA(),y._uU(7,"\n              "),y.TgZ(8,"td"),y._uU(9),y.YNc(10,Bt,2,1,"small",23),y._uU(11,"\n              "),y.qZA(),y._uU(12,"\n              "),y.YNc(13,Dt,2,1,"td",10),y._uU(14,"\n              "),y.YNc(15,Ft,3,3,"td",10),y._uU(16,"\n            "),y.qZA()),2&e){const e=t.$implicit,n=y.oxw(2);y.xp6(4),y.Q6J("text",y.lcZ(5,6,e))("id",e.id),y.xp6(5),y.hij("\n                ",e.email,"\n                "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(3),y.Q6J("ngIf",n.statuses.has(e.id)),y.xp6(2),y.Q6J("ngIf",!n.statuses.has(e.id))}}function Kt(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n          "),y.TgZ(2,"table",17),y._uU(3,"\n            "),y.TgZ(4,"thead"),y._uU(5,"\n              "),y.TgZ(6,"tr"),y._uU(7,"\n                "),y.TgZ(8,"th",18),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n                "),y.TgZ(12,"th"),y._uU(13),y.ALo(14,"i18n"),y.qZA(),y._uU(15,"\n              "),y.qZA(),y._uU(16,"\n            "),y.qZA(),y._uU(17,"\n            "),y.YNc(18,$t,17,8,"tr",19),y._uU(19,"\n          "),y.qZA(),y._uU(20,"\n        "),y.BQk()),2&e){const e=y.oxw();y.xp6(9),y.Oqu(y.lcZ(10,3,"user")),y.xp6(4),y.Oqu(y.lcZ(14,5,"status")),y.xp6(5),y.Q6J("ngForOf",e.users)}}function Ht(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",27),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.submit())})),y._uU(1,"\n          "),y._UZ(2,"i",28),y.ALo(3,"i18n"),y._uU(4,"\n          "),y.TgZ(5,"span"),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n        "),y.qZA()}if(2&e){const e=y.oxw();y.Q6J("disabled",e.loading),y.xp6(2),y.s9C("title",y.lcZ(3,3,"loading")),y.xp6(4),y.Oqu(y.lcZ(7,5,"removeUsers"))}}class Wt{set users(e){this._users=e,this.showNoMasterPasswordWarning=this._users.some((e=>!1===e.hasMasterPassword))}get users(){return this._users}constructor(e,t,n){this.apiService=e,this.i18nService=t,this.organizationUserService=n,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1}submit(){return Nt(this,void 0,void 0,(function*(){this.loading=!0;try{(yield this.deleteUsers()).data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkRemovedMessage");this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}deleteUsers(){return Nt(this,void 0,void 0,(function*(){return yield this.organizationUserService.deleteManyOrganizationUsers(this.organizationId,this.users.map((e=>e.id)))}))}get removeUsersWarning(){return this.i18nService.t("removeOrgUsersConfirmation")}}Wt.ɵfac=function(e){return new(e||Wt)(y.Y36(Ke.s),y.Y36(T.D),y.Y36(S.t))},Wt.ɵcmp=y.Xpm({type:Wt,selectors:[["app-bulk-remove"]],inputs:{organizationId:"organizationId",users:"users"},decls:43,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","danger"],["type","error"],["type","warning",4,"ngIf"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["type","warning"],["width","30"],["size","small",3,"text","id"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],[1,"text-muted","d-block","tw-lowercase"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y.TgZ(2,"div",1),y._uU(3,"\n    "),y.TgZ(4,"div",2),y._uU(5,"\n      "),y.TgZ(6,"div",3),y._uU(7,"\n        "),y.TgZ(8,"h1",4),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n        "),y.TgZ(12,"button",5),y.ALo(13,"i18n"),y._uU(14,"\n          "),y.TgZ(15,"span",6),y._uU(16,"×"),y.qZA(),y._uU(17,"\n        "),y.qZA(),y._uU(18,"\n      "),y.qZA(),y._uU(19,"\n      "),y.TgZ(20,"div",7),y._uU(21,"\n        "),y.YNc(22,Mt,3,3,"app-callout",8),y._uU(23,"\n        "),y.YNc(24,Lt,2,1,"app-callout",9),y._uU(25,"\n        "),y.YNc(26,Et,21,6,"ng-container",10),y._uU(27,"\n        "),y.YNc(28,Kt,21,7,"ng-container",10),y._uU(29,"\n      "),y.qZA(),y._uU(30,"\n      "),y.TgZ(31,"div",11),y._uU(32,"\n        "),y.YNc(33,Ht,9,7,"button",12),y._uU(34,"\n        "),y.TgZ(35,"button",13),y._uU(36),y.ALo(37,"i18n"),y.qZA(),y._uU(38,"\n      "),y.qZA(),y._uU(39,"\n    "),y.qZA(),y._uU(40,"\n  "),y.qZA(),y._uU(41,"\n"),y.qZA(),y._uU(42,"\n")),2&e&&(y.xp6(9),y.hij("\n          ",y.lcZ(10,8,"removeUsers"),"\n        "),y.xp6(3),y.s9C("appA11yTitle",y.lcZ(13,10,"close")),y.xp6(10),y.Q6J("ngIf",t.users.length<=0),y.xp6(2),y.Q6J("ngIf",t.error),y.xp6(2),y.Q6J("ngIf",!t.done),y.xp6(2),y.Q6J("ngIf",t.done),y.xp6(5),y.Q6J("ngIf",!t.done&&t.users.length>0),y.xp6(3),y.hij("\n          ",y.lcZ(37,12,"close"),"\n        "))},dependencies:[I.sg,I.O5,P.B,st.O,ot.A,H.C,Me.z],encapsulation:2});var Vt=n(24083),Xt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function en(e,t){1&e&&(y.TgZ(0,"bit-callout",7),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n      ",y.lcZ(2,1,"noSelectedUsersApplicable"),"\n    "))}function tn(e,t){if(1&e&&(y.TgZ(0,"bit-callout",7),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij("\n      ",e.error,"\n    ")}}function nn(e,t){1&e&&(y.TgZ(0,"p"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n          ",y.lcZ(2,1,"removeMembersWithoutMasterPasswordWarning"),"\n        "))}function sn(e,t){if(1&e&&(y.TgZ(0,"bit-callout",13),y._uU(1,"\n        "),y.TgZ(2,"p"),y._uU(3),y.ALo(4,"i18n"),y.qZA(),y._uU(5,"\n        "),y.YNc(6,nn,3,3,"p",3),y._uU(7,"\n      "),y.qZA()),2&e){const e=y.oxw(2);y.xp6(3),y.Oqu(y.lcZ(4,2,"revokeUsersWarning")),y.xp6(3),y.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function on(e,t){1&e&&(y.TgZ(0,"th",14),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"details")))}function rn(e,t){if(1&e&&(y.TgZ(0,"small",20),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function an(e,t){1&e&&(y.ynx(0),y._uU(1," - "),y.BQk())}function un(e,t){1&e&&(y.ynx(0),y._uU(1,"\n                  "),y._UZ(2,"i",22),y._uU(3),y.ALo(4,"i18n"),y.BQk()),2&e&&(y.xp6(3),y.hij("\n                  ",y.lcZ(4,1,"noMasterPassword"),"\n                "))}function cn(e,t){if(1&e&&(y.TgZ(0,"td",14),y._uU(1,"\n              "),y.TgZ(2,"span",21),y._uU(3,"\n                "),y.YNc(4,an,2,0,"ng-container",3),y._uU(5,"\n                "),y.YNc(6,un,5,3,"ng-container",3),y._uU(7,"\n              "),y.qZA(),y._uU(8,"\n            "),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(4),y.Q6J("ngIf",!0===e.hasMasterPassword),y.xp6(2),y.Q6J("ngIf",!1===e.hasMasterPassword)}}function ln(e,t){if(1&e&&(y.TgZ(0,"tr",16),y._uU(1,"\n            "),y.TgZ(2,"td",17),y._uU(3,"\n              "),y._UZ(4,"bit-avatar",18),y.ALo(5,"userName"),y._uU(6,"\n            "),y.qZA(),y._uU(7,"\n            "),y.TgZ(8,"td",14),y._uU(9),y.YNc(10,rn,2,1,"small",19),y._uU(11,"\n            "),y.qZA(),y._uU(12,"\n            "),y.YNc(13,cn,9,2,"td",11),y._uU(14,"\n          "),y.qZA()),2&e){const e=t.$implicit,n=y.oxw(3);y.xp6(4),y.Q6J("text",y.lcZ(5,5,e))("id",e.id),y.xp6(5),y.hij("\n              ",e.email,"\n              "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(3),y.Q6J("ngIf",n.showNoMasterPasswordWarning)}}function dn(e,t){if(1&e&&(y._uU(0,"\n          "),y.YNc(1,ln,15,7,"tr",15),y._uU(2,"\n        ")),2&e){const e=y.oxw(2);y.xp6(1),y.Q6J("ngForOf",e.users)}}function pn(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n      "),y.YNc(2,sn,8,4,"bit-callout",8),y._uU(3,"\n\n      "),y.TgZ(4,"bit-table"),y._uU(5,"\n        "),y.ynx(6,9),y._uU(7,"\n          "),y.TgZ(8,"tr"),y._uU(9,"\n            "),y.TgZ(10,"th",10),y._uU(11),y.ALo(12,"i18n"),y.qZA(),y._uU(13,"\n            "),y.YNc(14,on,3,3,"th",11),y._uU(15,"\n          "),y.qZA(),y._uU(16,"\n        "),y.BQk(),y._uU(17,"\n        "),y.YNc(18,dn,3,1,"ng-template",12),y._uU(19,"\n      "),y.qZA(),y._uU(20,"\n    "),y.BQk()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.users.length>0&&!e.error&&e.isRevoking),y.xp6(9),y.Oqu(y.lcZ(12,3,"user")),y.xp6(3),y.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function gn(e,t){if(1&e&&(y.TgZ(0,"small",20),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.name)}}function hn(e,t){if(1&e&&(y.TgZ(0,"td",14),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit,t=y.oxw(3);y.xp6(1),y.hij("\n              ",t.statuses.get(e.id),"\n            ")}}function mn(e,t){1&e&&(y.TgZ(0,"td",14),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.hij("\n              ",y.lcZ(2,1,"bulkFilteredMessage"),"\n            "))}function Un(e,t){if(1&e&&(y.TgZ(0,"tr",16),y._uU(1,"\n            "),y.TgZ(2,"td",17),y._uU(3,"\n              "),y._UZ(4,"bit-avatar",18),y.ALo(5,"userName"),y._uU(6,"\n            "),y.qZA(),y._uU(7,"\n            "),y.TgZ(8,"td",14),y._uU(9),y.YNc(10,gn,2,1,"small",19),y._uU(11,"\n            "),y.qZA(),y._uU(12,"\n            "),y.YNc(13,hn,2,1,"td",11),y._uU(14,"\n            "),y.YNc(15,mn,3,3,"td",11),y._uU(16,"\n          "),y.qZA()),2&e){const e=t.$implicit,n=y.oxw(3);y.xp6(4),y.Q6J("text",y.lcZ(5,6,e))("id",e.id),y.xp6(5),y.hij("\n              ",e.email,"\n              "),y.xp6(1),y.Q6J("ngIf",e.name),y.xp6(3),y.Q6J("ngIf",n.statuses.has(e.id)),y.xp6(2),y.Q6J("ngIf",!n.statuses.has(e.id))}}function fn(e,t){if(1&e&&(y._uU(0,"\n          "),y.YNc(1,Un,17,8,"tr",15),y._uU(2,"\n        ")),2&e){const e=y.oxw(2);y.xp6(1),y.Q6J("ngForOf",e.users)}}function Zn(e,t){1&e&&(y.ynx(0),y._uU(1,"\n      "),y.TgZ(2,"bit-table"),y._uU(3,"\n        "),y.ynx(4,9),y._uU(5,"\n          "),y.TgZ(6,"tr"),y._uU(7,"\n            "),y.TgZ(8,"th",10),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n            "),y.TgZ(12,"th"),y._uU(13),y.ALo(14,"i18n"),y.qZA(),y._uU(15,"\n          "),y.qZA(),y._uU(16,"\n        "),y.BQk(),y._uU(17,"\n        "),y.YNc(18,fn,3,1,"ng-template",12),y._uU(19,"\n      "),y.qZA(),y._uU(20,"\n    "),y.BQk()),2&e&&(y.xp6(9),y.Oqu(y.lcZ(10,2,"user")),y.xp6(4),y.Oqu(y.lcZ(14,4,"status")))}function _n(e,t){if(1&e&&(y.TgZ(0,"button",23),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.Q6J("bitAction",e.submit),y.xp6(1),y.hij("\n      ",e.bulkTitle,"\n    ")}}class vn{constructor(e,t,n){this.i18nService=e,this.organizationUserService=t,this.data=n,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1,this.submit=()=>Xt(this,void 0,void 0,(function*(){try{const e=yield this.performBulkUserAction(),t=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";e.data.forEach((e=>{const n=""!==e.error?e.error:this.i18nService.t(t);this.statuses.set(e.id,n)})),this.done=!0}catch(e){this.error=e.message}})),this.isRevoking=n.isRevoking,this.organizationId=n.organizationId,this.users=n.users,this.showNoMasterPasswordWarning=this.users.some((e=>!1===e.hasMasterPassword))}get bulkTitle(){const e=this.isRevoking?"revokeUsers":"restoreUsers";return this.i18nService.t(e)}performBulkUserAction(){return Xt(this,void 0,void 0,(function*(){const e=this.users.map((e=>e.id));return this.isRevoking?yield this.organizationUserService.revokeManyOrganizationUsers(this.organizationId,e):yield this.organizationUserService.restoreManyOrganizationUsers(this.organizationId,e)}))}static open(e,t){return e.open(vn,{data:t})}}function bn(e,t){1&e&&(y.TgZ(0,"div",12),y._uU(1,"\n          "),y._UZ(2,"i",13),y.ALo(3,"i18n"),y._uU(4),y.ALo(5,"i18n"),y.qZA()),2&e&&(y.xp6(2),y.s9C("title",y.lcZ(3,2,"loading")),y.xp6(2),y.hij("\n          ",y.lcZ(5,4,"loading"),"\n        "))}function An(e,t){if(1&e&&(y.TgZ(0,"small",22),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.Oqu(e.user.name)}}function xn(e,t){if(1&e&&(y.TgZ(0,"td",23),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.hij("\n              ",e.message,"\n            ")}}function wn(e,t){if(1&e&&(y.TgZ(0,"td"),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.hij("\n              ",e.message,"\n            ")}}function yn(e,t){if(1&e&&(y.TgZ(0,"tr"),y._uU(1,"\n            "),y.TgZ(2,"td",17),y._uU(3,"\n              "),y._UZ(4,"bit-avatar",18),y.ALo(5,"userName"),y._uU(6,"\n            "),y.qZA(),y._uU(7,"\n            "),y.TgZ(8,"td"),y._uU(9),y.YNc(10,An,2,1,"small",19),y._uU(11,"\n            "),y.qZA(),y._uU(12,"\n            "),y.YNc(13,xn,2,1,"td",20),y._uU(14,"\n            "),y.YNc(15,wn,2,1,"td",21),y._uU(16,"\n          "),y.qZA()),2&e){const e=t.$implicit;y.xp6(4),y.Q6J("text",y.lcZ(5,6,e.user))("id",e.user.id),y.xp6(5),y.hij("\n              ",e.user.email,"\n              "),y.xp6(1),y.Q6J("ngIf",e.user.name),y.xp6(3),y.Q6J("ngIf",e.error),y.xp6(2),y.Q6J("ngIf",!e.error)}}function Tn(e,t){if(1&e&&(y.TgZ(0,"table",14),y._uU(1,"\n          "),y.TgZ(2,"thead"),y._uU(3,"\n            "),y.TgZ(4,"tr"),y._uU(5,"\n              "),y.TgZ(6,"th",15),y._uU(7),y.ALo(8,"i18n"),y.qZA(),y._uU(9,"\n              "),y.TgZ(10,"th"),y._uU(11),y.ALo(12,"i18n"),y.qZA(),y._uU(13,"\n            "),y.qZA(),y._uU(14,"\n          "),y.qZA(),y._uU(15,"\n          "),y.YNc(16,yn,17,8,"tr",16),y._uU(17,"\n        "),y.qZA()),2&e){const e=y.oxw();y.xp6(7),y.Oqu(y.lcZ(8,3,"user")),y.xp6(4),y.Oqu(y.lcZ(12,5,"status")),y.xp6(5),y.Q6J("ngForOf",e.users)}}vn.ɵfac=function(e){return new(e||vn)(y.Y36(T.D),y.Y36(S.t),y.Y36(r.Kt))},vn.ɵcmp=y.Xpm({type:vn,selectors:[["app-bulk-restore-revoke"]],decls:29,vars:9,consts:[["bitDialogTitle",""],["bitDialogContent",""],["type","danger",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["type","button","bitButton","",3,"bitAction",4,"ngIf"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","warning",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["bitCell","",4,"ngIf"],["body",""],["type","warning"],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","","width","30"],["size","small",3,"text","id"],["class","tw-block tw-text-muted",4,"ngIf"],[1,"tw-block","tw-text-muted"],[1,"tw-block","tw-lowercase","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["type","button","bitButton","",3,"bitAction"]],template:function(e,t){1&e&&(y.TgZ(0,"bit-dialog"),y._uU(1,"\n  "),y.ynx(2,0),y._uU(3,"\n    "),y.TgZ(4,"h1"),y._uU(5),y.qZA(),y._uU(6,"\n  "),y.BQk(),y._uU(7,"\n  "),y.TgZ(8,"div",1),y._uU(9,"\n    "),y.YNc(10,en,3,3,"bit-callout",2),y._uU(11,"\n\n    "),y.YNc(12,tn,2,1,"bit-callout",2),y._uU(13,"\n\n    "),y.YNc(14,pn,21,5,"ng-container",3),y._uU(15,"\n\n    "),y.YNc(16,Zn,21,6,"ng-container",3),y._uU(17,"\n  "),y.qZA(),y._uU(18,"\n  "),y.ynx(19,4),y._uU(20,"\n    "),y.YNc(21,_n,2,2,"button",5),y._uU(22,"\n    "),y.TgZ(23,"button",6),y._uU(24),y.ALo(25,"i18n"),y.qZA(),y._uU(26,"\n  "),y.BQk(),y._uU(27,"\n"),y.qZA(),y._uU(28,"\n")),2&e&&(y.xp6(5),y.Oqu(t.bulkTitle),y.xp6(5),y.Q6J("ngIf",t.users.length<=0),y.xp6(2),y.Q6J("ngIf",t.error),y.xp6(2),y.Q6J("ngIf",!t.done),y.xp6(2),y.Q6J("ngIf",t.done),y.xp6(5),y.Q6J("ngIf",!t.done&&t.users.length>0),y.xp6(3),y.hij("\n      ",y.lcZ(25,7,"close"),"\n    "))},dependencies:[I.sg,I.O5,N.Q,ot.A,Q.r,Vt.O,O.a,xt.f,wt.a,yt.Y,Tt.v,wt.f,H.C,Me.z],encapsulation:2});class qn{constructor(){this.loading=!1}}qn.ɵfac=function(e){return new(e||qn)},qn.ɵcmp=y.Xpm({type:qn,selectors:[["app-bulk-status"]],decls:37,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center",4,"ngIf"],["class","table table-hover table-list",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["width","30"],["size","small",3,"text","id"],["class","text-muted d-block",4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngIf"],[1,"text-muted","d-block"],[1,"text-danger"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y.TgZ(2,"div",1),y._uU(3,"\n    "),y.TgZ(4,"div",2),y._uU(5,"\n      "),y.TgZ(6,"div",3),y._uU(7,"\n        "),y.TgZ(8,"h1",4),y._uU(9),y.ALo(10,"i18n"),y.qZA(),y._uU(11,"\n        "),y.TgZ(12,"button",5),y.ALo(13,"i18n"),y._uU(14,"\n          "),y.TgZ(15,"span",6),y._uU(16,"×"),y.qZA(),y._uU(17,"\n        "),y.qZA(),y._uU(18,"\n      "),y.qZA(),y._uU(19,"\n      "),y.TgZ(20,"div",7),y._uU(21,"\n        "),y.YNc(22,bn,6,6,"div",8),y._uU(23,"\n        "),y.YNc(24,Tn,18,7,"table",9),y._uU(25,"\n      "),y.qZA(),y._uU(26,"\n      "),y.TgZ(27,"div",10),y._uU(28,"\n        "),y.TgZ(29,"button",11),y._uU(30),y.ALo(31,"i18n"),y.qZA(),y._uU(32,"\n      "),y.qZA(),y._uU(33,"\n    "),y.qZA(),y._uU(34,"\n  "),y.qZA(),y._uU(35,"\n"),y.qZA(),y._uU(36,"\n")),2&e&&(y.xp6(9),y.hij("\n          ",y.lcZ(10,5,"bulkConfirmStatus"),"\n        "),y.xp6(3),y.s9C("appA11yTitle",y.lcZ(13,7,"close")),y.xp6(10),y.Q6J("ngIf",t.loading),y.xp6(2),y.Q6J("ngIf",!t.loading),y.xp6(6),y.hij("\n          ",y.lcZ(31,9,"close"),"\n        "))},dependencies:[I.sg,I.O5,P.B,ot.A,H.C,Me.z],encapsulation:2});var Sn=n(56945),Cn=n(66137),kn=n(98157),In=n(83924),Pn=n(62357),Nn=n(85356),Mn=n(2051),Ln=n(14422),Jn=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Qn(e,t){if(1&e&&(y.TgZ(0,"small",30),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.name)}}function zn(e,t){if(1&e&&(y.TgZ(0,"auth-password-callout",31),y._uU(1,"\n        "),y.qZA()),2&e){const e=y.oxw();y.Q6J("policy",e.enforcedPolicyOptions)}}const On=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class Yn{constructor(e,t,n,i,s,o,r){this.resetPasswordService=e,this.i18nService=t,this.platformUtilsService=n,this.passwordGenerationService=i,this.policyService=s,this.logService=o,this.dialogService=r,this.onPasswordReset=new y.vpe,this.newPassword=null,this.showPassword=!1,this.destroy$=new u.x}ngOnInit(){return Jn(this,void 0,void 0,(function*(){this.policyService.masterPasswordPolicyOptions$().pipe((0,g.R)(this.destroy$)).subscribe((e=>this.enforcedPolicyOptions=e))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get loggedOutWarningName(){return null!=this.name?this.name:this.i18nService.t("thisUser")}generatePassword(){var e,t;return Jn(this,void 0,void 0,(function*(){const n=null!==(t=null===(e=yield this.passwordGenerationService.getOptions())||void 0===e?void 0:e[0])&&void 0!==t?t:{};this.newPassword=yield this.passwordGenerationService.generatePassword(n),this.passwordStrengthComponent.updatePasswordStrength(this.newPassword)}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(e){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password"))))}submit(){return Jn(this,void 0,void 0,(function*(){if(null==this.newPassword||""===this.newPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordRequired")),!1;if(this.newPassword.length<K.c.minimumPasswordLength)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordMinlength",K.c.minimumPasswordLength)),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.passwordStrengthResult.score,this.newPassword,this.enforcedPolicyOptions)){if(this.passwordStrengthResult.score<3){if(!(yield this.dialogService.openSimpleDialog({title:{key:"weakMasterPassword"},content:{key:"weakMasterPasswordDesc"},type:"warning"})))return!1}try{this.formPromise=this.resetPasswordService.resetMasterPassword(this.newPassword,this.email,this.id,this.organizationId),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("resetPasswordSuccess")),this.onPasswordReset.emit()}catch(e){this.logService.error(e)}this.formPromise=null}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}getStrengthResult(e){this.passwordStrengthResult=e}}Yn.ɵfac=function(e){return new(e||Yn)(y.Y36(kn.v),y.Y36(T.D),y.Y36(q.P),y.Y36(Cn.UW),y.Y36(In.d),y.Y36(je.$),y.Y36(C.x))},Yn.ɵcmp=y.Xpm({type:Yn,selectors:[["app-reset-password"]],viewQuery:function(e,t){if(1&e&&y.Gf(Sn.Z,5),2&e){let e;y.iGM(e=y.CRH())&&(t.passwordStrengthComponent=e.first)}},inputs:{name:"name",email:"email",id:"id",organizationId:"organizationId"},outputs:{onPasswordReset:"onPasswordReset"},decls:97,vars:44,consts:[["role","dialog","aria-modal","true","aria-labelledby","resetPasswordTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","resetPasswordTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy",4,"ngIf"],[1,"row"],[1,"col","form-group"],[1,"d-flex"],["for","newPassword"],[1,"ml-auto","d-flex"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-refresh"],[1,"input-group","mb-1"],["id","newPassword","appAutofocus","","name","NewPassword","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],[3,"password","email","showText","passwordStrengthResult"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy"]],template:function(e,t){if(1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y.TgZ(2,"div",1),y._uU(3,"\n    "),y.TgZ(4,"form",2,3),y.NdJ("ngSubmit",(function(){return t.submit()})),y._uU(6,"\n      "),y.TgZ(7,"div",4),y._uU(8,"\n        "),y.TgZ(9,"h1",5),y._uU(10),y.ALo(11,"i18n"),y.YNc(12,Qn,2,1,"small",6),y._uU(13,"\n        "),y.qZA(),y._uU(14,"\n        "),y.TgZ(15,"button",7),y.ALo(16,"i18n"),y._uU(17,"\n          "),y.TgZ(18,"span",8),y._uU(19,"×"),y.qZA(),y._uU(20,"\n        "),y.qZA(),y._uU(21,"\n      "),y.qZA(),y._uU(22,"\n      "),y.TgZ(23,"div",9),y._uU(24,"\n        "),y.TgZ(25,"app-callout",10),y._uU(26),y.ALo(27,"i18n"),y.qZA(),y._uU(28,"\n        "),y.YNc(29,zn,2,1,"auth-password-callout",11),y._uU(30,"\n        "),y.TgZ(31,"div",12),y._uU(32,"\n          "),y.TgZ(33,"div",13),y._uU(34,"\n            "),y.TgZ(35,"div",14),y._uU(36,"\n              "),y.TgZ(37,"label",15),y._uU(38),y.ALo(39,"i18n"),y.qZA(),y._uU(40,"\n              "),y.TgZ(41,"div",16),y._uU(42,"\n                "),y.TgZ(43,"a",17),y.NdJ("click",(function(){return t.generatePassword()})),y.ALo(44,"i18n"),y._uU(45,"\n                  "),y._UZ(46,"i",18),y._uU(47,"\n                "),y.qZA(),y._uU(48,"\n              "),y.qZA(),y._uU(49,"\n            "),y.qZA(),y._uU(50,"\n            "),y.TgZ(51,"div",19),y._uU(52,"\n              "),y.TgZ(53,"input",20),y.NdJ("ngModelChange",(function(e){return t.newPassword=e})),y.qZA(),y._uU(54,"\n              "),y.TgZ(55,"div",21),y._uU(56,"\n                "),y.TgZ(57,"button",22),y.NdJ("click",(function(){return t.togglePassword()})),y.ALo(58,"i18n"),y._uU(59,"\n                  "),y._UZ(60,"i",23),y._uU(61,"\n                "),y.qZA(),y._uU(62,"\n                "),y.TgZ(63,"button",22),y.NdJ("click",(function(){return t.copy(t.newPassword)})),y.ALo(64,"i18n"),y._uU(65,"\n                  "),y._UZ(66,"i",24),y._uU(67,"\n                "),y.qZA(),y._uU(68,"\n              "),y.qZA(),y._uU(69,"\n            "),y.qZA(),y._uU(70,"\n            "),y.TgZ(71,"app-password-strength",25),y.NdJ("passwordStrengthResult",(function(e){return t.getStrengthResult(e)})),y._uU(72,"\n            "),y.qZA(),y._uU(73,"\n          "),y.qZA(),y._uU(74,"\n        "),y.qZA(),y._uU(75,"\n      "),y.qZA(),y._uU(76,"\n      "),y.TgZ(77,"div",26),y._uU(78,"\n        "),y.TgZ(79,"button",27),y._uU(80,"\n          "),y._UZ(81,"i",28),y.ALo(82,"i18n"),y._uU(83,"\n          "),y.TgZ(84,"span"),y._uU(85),y.ALo(86,"i18n"),y.qZA(),y._uU(87,"\n        "),y.qZA(),y._uU(88,"\n        "),y.TgZ(89,"button",29),y._uU(90),y.ALo(91,"i18n"),y.qZA(),y._uU(92,"\n      "),y.qZA(),y._uU(93,"\n    "),y.qZA(),y._uU(94,"\n  "),y.qZA(),y._uU(95,"\n"),y.qZA(),y._uU(96,"\n")),2&e){const e=y.MAs(5);y.xp6(4),y.Q6J("appApiAction",t.formPromise),y.xp6(6),y.hij("\n          ",y.lcZ(11,20,"recoverAccount"),"\n          "),y.xp6(2),y.Q6J("ngIf",t.name),y.xp6(3),y.s9C("appA11yTitle",y.lcZ(16,22,"close")),y.xp6(11),y.hij("",y.xi3(27,24,"resetPasswordLoggedOutWarning",t.loggedOutWarningName),"\n        "),y.xp6(3),y.Q6J("ngIf",t.enforcedPolicyOptions),y.xp6(9),y.Oqu(y.lcZ(39,27,"newPassword")),y.xp6(5),y.s9C("appA11yTitle",y.lcZ(44,29,"generatePassword")),y.xp6(10),y.s9C("type",t.showPassword?"text":"password"),y.Q6J("ngModel",t.newPassword),y.xp6(4),y.s9C("appA11yTitle",y.lcZ(58,31,"toggleVisibility")),y.xp6(3),y.Q6J("ngClass",y.WLB(41,On,!t.showPassword,t.showPassword)),y.xp6(3),y.s9C("appA11yTitle",y.lcZ(64,33,"copyPassword")),y.xp6(8),y.Q6J("password",t.newPassword)("email",t.email)("showText",!0),y.xp6(8),y.Q6J("disabled",e.loading),y.xp6(2),y.s9C("title",y.lcZ(82,35,"loading")),y.xp6(4),y.Oqu(y.lcZ(86,37,"save")),y.xp6(5),y.hij("\n          ",y.lcZ(91,39,"cancel"),"\n        ")}},dependencies:[I.mk,I.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,P.B,Be.b,Pn.U,st.O,Nn.b,Mn.O,Sn.Z,Ln.e,H.C],encapsulation:2});var Rn=n(50137),Gn=n(4871),jn=n(97360),En=n(31754),Bn=n(56617),Dn=n(1874),Fn=n(12492),$n=n(73974),Kn=n(26194),Hn=n(44234),Wn=n(91849);let Vn=0;class Xn{constructor(){this.id=Vn++,this.name=`bit-toggle-group-${this.id}`,this.selectedChange=new y.vpe,this.role="radiogroup",this.classList=["tw-flex"]}onInputInteraction(e){this.selected=e,this.selectedChange.emit(e)}}Xn.ɵfac=function(e){return new(e||Xn)},Xn.ɵcmp=y.Xpm({type:Xn,selectors:[["bit-toggle-group"]],hostVars:3,hostBindings:function(e,t){2&e&&(y.uIk("role",t.role),y.Tol(t.classList))},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(y.F$t(),y.Hsn(0))},encapsulation:2});let ei=0;class ti{constructor(e){this.groupComponent=e,this.id=ei++,this.tabIndex="-1",this.classList=["tw-group"]}get name(){return this.groupComponent.name}get selected(){return this.groupComponent.selected===this.value}get inputClasses(){return["tw-peer","tw-appearance-none","tw-outline-none"]}get labelClasses(){return["!tw-font-semibold","tw-transition","tw-text-center","tw-border-text-muted","!tw-text-muted","tw-border-solid","tw-border-y","tw-border-r","tw-border-l-0","tw-cursor-pointer","group-first-of-type:tw-border-l","group-first-of-type:tw-rounded-l","group-last-of-type:tw-rounded-r","peer-focus:tw-outline-none","peer-focus:tw-ring","peer-focus:tw-ring-offset-2","peer-focus:tw-ring-primary-500","peer-focus:tw-z-10","peer-focus:tw-bg-primary-500","peer-focus:tw-border-primary-500","peer-focus:!tw-text-contrast","hover:tw-no-underline","hover:tw-bg-text-muted","hover:tw-border-text-muted","hover:!tw-text-contrast","peer-checked:tw-bg-primary-500","peer-checked:tw-border-primary-500","peer-checked:!tw-text-contrast","tw-py-1.5","tw-px-3","!tw-mb-0","[&>[bitBadge]]:tw-relative","[&>[bitBadge]]:tw--top-px"]}onInputInteraction(){this.groupComponent.onInputInteraction(this.value)}}ti.ɵfac=function(e){return new(e||ti)(y.Y36(Xn))},ti.ɵcmp=y.Xpm({type:ti,selectors:[["bit-toggle"]],hostVars:3,hostBindings:function(e,t){2&e&&(y.Ikx("tabIndex",t.tabIndex),y.Tol(t.classList))},inputs:{value:"value"},ngContentSelectors:["*"],decls:3,vars:6,consts:[["type","radio",3,"id","name","ngClass","checked","change"],[3,"for","ngClass"]],template:function(e,t){1&e&&(y.F$t(),y.TgZ(0,"input",0),y.NdJ("change",(function(){return t.onInputInteraction()})),y.qZA(),y.TgZ(1,"label",1),y.Hsn(2),y.qZA()),2&e&&(y.MGl("id","bit-toggle-",t.id,""),y.Q6J("name",t.name)("ngClass",t.inputClasses)("checked",t.selected),y.xp6(1),y.MGl("for","bit-toggle-",t.id,""),y.Q6J("ngClass",t.labelClasses))},dependencies:[I.mk],encapsulation:2});var ni=n(94239),ii=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};const si=["groupsTemplate"],oi=["confirmTemplate"],ri=["resetPasswordTemplate"],ai=["bulkStatusTemplate"],ui=["bulkConfirmTemplate"],ci=["bulkRemoveTemplate"];function li(e,t){if(1&e&&(y.TgZ(0,"span",17),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.allCount)}}function di(e,t){if(1&e&&(y.TgZ(0,"span",17),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.invitedCount)}}function pi(e,t){if(1&e&&(y.TgZ(0,"span",17),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.acceptedCount)}}function gi(e,t){if(1&e&&(y.TgZ(0,"span",17),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.revokedCount)}}function hi(e,t){1&e&&(y.ynx(0),y._uU(1,"\n    "),y._UZ(2,"i",18),y.ALo(3,"i18n"),y._uU(4,"\n    "),y.TgZ(5,"span",19),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n  "),y.BQk()),2&e&&(y.xp6(2),y.s9C("title",y.lcZ(3,2,"loading")),y.xp6(4),y.Oqu(y.lcZ(7,4,"loading")))}function mi(e,t){1&e&&(y.TgZ(0,"p"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"noMembersInList")))}function Ui(e,t){1&e&&(y.TgZ(0,"app-callout",38),y.ALo(1,"i18n"),y._uU(2),y.ALo(3,"i18n"),y.qZA()),2&e&&(y.s9C("title",y.lcZ(1,2,"confirmUsers")),y.xp6(2),y.hij("\n        ",y.lcZ(3,4,"usersNeedConfirmed"),"\n      "))}function fi(e,t){if(1&e){const e=y.EpF();y.ynx(0),y._uU(1,"\n                  "),y.TgZ(2,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.bulkEnableSM())})),y._uU(3),y.ALo(4,"i18n"),y.qZA(),y._uU(5,"\n                  "),y._UZ(6,"bit-menu-divider"),y._uU(7,"\n                "),y.BQk()}2&e&&(y.xp6(3),y.hij("\n                    ",y.lcZ(4,1,"activateSecretsManager"),"\n                  "))}function Zi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.bulkConfirm())})),y._uU(1,"\n                  "),y.TgZ(2,"span",39),y._uU(3,"\n                    "),y._UZ(4,"i",40),y._uU(5),y.ALo(6,"i18n"),y.qZA(),y._uU(7,"\n                "),y.qZA()}2&e&&(y.xp6(5),y.hij("\n                    ",y.lcZ(6,1,"confirmSelected"),"\n                  "))}function _i(e,t){1&e&&(y.TgZ(0,"span",59),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"invited")))}function vi(e,t){1&e&&(y.TgZ(0,"span",60),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"needsConfirmation")))}function bi(e,t){1&e&&(y.TgZ(0,"span",59),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"revoked")))}function Ai(e,t){if(1&e&&(y.TgZ(0,"div",61),y._uU(1),y.qZA()),2&e){const e=y.oxw().$implicit;y.xp6(1),y.hij("\n                    ",e.email,"\n                  ")}}function xi(e,t){if(1&e&&y._UZ(0,"bit-badge-list",62),2&e){const e=y.oxw().$implicit,t=y.oxw(4);y.Q6J("items",t.organization.useGroups?e.groupNames:e.collectionNames)("maxItems",3)}}function wi(e,t){1&e&&(y.TgZ(0,"span"),y._uU(1),y.ALo(2,"i18n"),y.qZA()),2&e&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"all")))}function yi(e,t){1&e&&(y.ynx(0),y._uU(1,"\n                "),y._UZ(2,"i",63),y.ALo(3,"i18n"),y._uU(4,"\n                "),y.TgZ(5,"span",64),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n              "),y.BQk()),2&e&&(y.xp6(2),y.s9C("title",y.lcZ(3,2,"userUsingTwoStep")),y.xp6(4),y.Oqu(y.lcZ(7,4,"userUsingTwoStep")))}function Ti(e,t){1&e&&(y.ynx(0),y._uU(1,"\n                "),y._UZ(2,"i",65),y.ALo(3,"i18n"),y._uU(4,"\n                "),y.TgZ(5,"span",64),y._uU(6),y.ALo(7,"i18n"),y.qZA(),y._uU(8,"\n              "),y.BQk()),2&e&&(y.xp6(2),y.s9C("title",y.lcZ(3,2,"enrolledAccountRecovery")),y.xp6(4),y.Oqu(y.lcZ(7,4,"enrolledAccountRecovery")))}function qi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.reinvite(t))})),y._uU(1,"\n                  "),y._UZ(2,"i",66),y._uU(3),y.ALo(4,"i18n"),y.qZA()}2&e&&(y.xp6(3),y.hij("\n                  ",y.lcZ(4,1,"resendInvitation"),"\n                "))}function Si(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.confirm(t))})),y._uU(1,"\n                  "),y.TgZ(2,"span",39),y._uU(3,"\n                    "),y._UZ(4,"i",67),y._uU(5),y.ALo(6,"i18n"),y.qZA(),y._uU(7,"\n                "),y.qZA()}2&e&&(y.xp6(5),y.hij(" ",y.lcZ(6,1,"confirm"),"\n                  "))}function Ci(e,t){1&e&&y._UZ(0,"bit-menu-divider")}function ki(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.edit(t,n.memberTab.Groups))})),y._uU(1,"\n                  "),y._UZ(2,"i",68),y._uU(3),y.ALo(4,"i18n"),y.qZA()}2&e&&(y.xp6(3),y.hij(" ",y.lcZ(4,1,"groups"),"\n                "))}function Ii(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.events(t))})),y._uU(1,"\n                  "),y._UZ(2,"i",69),y._uU(3),y.ALo(4,"i18n"),y.qZA()}2&e&&(y.xp6(3),y.hij(" ",y.lcZ(4,1,"eventLogs"),"\n                "))}function Pi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.resetPassword(t))})),y._uU(1,"\n                  "),y._UZ(2,"i",70),y._uU(3),y.ALo(4,"i18n"),y.qZA()}2&e&&(y.xp6(3),y.hij(" ",y.lcZ(4,1,"recoverAccount"),"\n                "))}function Ni(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.restore(t))})),y._uU(1,"\n                  "),y._UZ(2,"i",71),y._uU(3),y.ALo(4,"i18n"),y.qZA()}2&e&&(y.xp6(3),y.hij("\n                  ",y.lcZ(4,1,"restoreAccess"),"\n                "))}function Mi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw().$implicit,n=y.oxw(4);return y.KtG(n.revoke(t))})),y._uU(1,"\n                  "),y._UZ(2,"i",72),y._uU(3),y.ALo(4,"i18n"),y.qZA()}2&e&&(y.xp6(3),y.hij("\n                  ",y.lcZ(4,1,"revokeAccess"),"\n                "))}function Li(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"tr",42),y._uU(1,"\n            "),y.TgZ(2,"td",43),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.checkUser(t))})),y._uU(3,"\n              "),y.TgZ(4,"input",44),y.NdJ("ngModelChange",(function(t){const n=y.CHM(e).$implicit;return y.KtG(n.checked=t)})),y.qZA(),y._uU(5,"\n            "),y.qZA(),y._uU(6,"\n            "),y.TgZ(7,"td",45),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.edit(t))})),y._uU(8,"\n              "),y.TgZ(9,"div",46),y._uU(10,"\n                "),y._UZ(11,"bit-avatar",47),y.ALo(12,"userName"),y._uU(13,"\n                "),y.TgZ(14,"div",48),y._uU(15,"\n                  "),y.TgZ(16,"div"),y._uU(17,"\n                    "),y.TgZ(18,"button",49),y._uU(19),y.qZA(),y._uU(20,"\n                    "),y.YNc(21,_i,3,3,"span",50),y._uU(22,"\n                    "),y.YNc(23,vi,3,3,"span",51),y._uU(24,"\n                    "),y.YNc(25,bi,3,3,"span",50),y._uU(26,"\n                  "),y.qZA(),y._uU(27,"\n                  "),y.YNc(28,Ai,2,1,"div",52),y._uU(29,"\n                "),y.qZA(),y._uU(30,"\n              "),y.qZA(),y._uU(31,"\n            "),y.qZA(),y._uU(32,"\n\n            "),y.TgZ(33,"td",45),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.edit(t,n.organization.useGroups?n.memberTab.Groups:n.memberTab.Collections))})),y._uU(34,"\n              "),y.YNc(35,xi,1,2,"bit-badge-list",53),y._uU(36,"\n              "),y.YNc(37,wi,3,3,"span",9),y._uU(38,"\n            "),y.qZA(),y._uU(39,"\n\n            "),y.TgZ(40,"td",54),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.edit(t,n.memberTab.Role))})),y._uU(41),y.ALo(42,"userType"),y.qZA(),y._uU(43,"\n\n            "),y.TgZ(44,"td",55),y._uU(45,"\n              "),y.YNc(46,yi,9,6,"ng-container",9),y._uU(47,"\n              "),y.YNc(48,Ti,9,6,"ng-container",9),y._uU(49,"\n            "),y.qZA(),y._uU(50,"\n            "),y.TgZ(51,"td",26),y._uU(52,"\n              "),y._UZ(53,"button",28),y.ALo(54,"i18n"),y._uU(55,"\n\n              "),y.TgZ(56,"bit-menu",null,56),y._uU(58,"\n                "),y.YNc(59,qi,5,3,"button",32),y._uU(60,"\n                "),y.YNc(61,Si,8,3,"button",32),y._uU(62,"\n                "),y.YNc(63,Ci,1,0,"bit-menu-divider",9),y._uU(64,"\n                "),y.TgZ(65,"button",30),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.edit(t,n.memberTab.Role))})),y._uU(66,"\n                  "),y._UZ(67,"i",57),y._uU(68),y.ALo(69,"i18n"),y.qZA(),y._uU(70,"\n                "),y.YNc(71,ki,5,3,"button",32),y._uU(72,"\n                "),y.TgZ(73,"button",30),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.edit(t,n.memberTab.Collections))})),y._uU(74,"\n                  "),y._UZ(75,"i",58),y._uU(76),y.ALo(77,"i18n"),y.qZA(),y._uU(78,"\n                "),y._UZ(79,"bit-menu-divider"),y._uU(80,"\n                "),y.YNc(81,Ii,5,3,"button",32),y._uU(82,"\n                "),y.YNc(83,Pi,5,3,"button",32),y._uU(84,"\n                "),y.YNc(85,Ni,5,3,"button",32),y._uU(86,"\n                "),y.YNc(87,Mi,5,3,"button",32),y._uU(88,"\n                "),y.TgZ(89,"button",30),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,n=y.oxw(4);return y.KtG(n.remove(t))})),y._uU(90,"\n                  "),y.TgZ(91,"span",35),y._uU(92,"\n                    "),y._UZ(93,"i",36),y._uU(94),y.ALo(95,"i18n"),y.qZA(),y._uU(96,"\n                "),y.qZA(),y._uU(97,"\n              "),y.qZA(),y._uU(98,"\n            "),y.qZA(),y._uU(99,"\n          "),y.qZA()}if(2&e){const e=t.$implicit,n=y.MAs(57),i=y.oxw(4);let s;y.xp6(4),y.Q6J("ngModel",e.checked),y.xp6(7),y.Q6J("text",y.lcZ(12,27,e))("id",e.userId)("color",e.avatarColor),y.xp6(8),y.hij("\n                      ",null!==(s=e.name)&&void 0!==s?s:e.email,"\n                    "),y.xp6(2),y.Q6J("ngIf",e.status===i.userStatusType.Invited),y.xp6(2),y.Q6J("ngIf",e.status===i.userStatusType.Accepted),y.xp6(2),y.Q6J("ngIf",e.status===i.userStatusType.Revoked),y.xp6(3),y.Q6J("ngIf",e.name),y.xp6(7),y.Q6J("ngIf",i.organization.useGroups||!e.accessAll),y.xp6(2),y.Q6J("ngIf",!i.organization.useGroups&&e.accessAll),y.xp6(4),y.hij("\n              ",y.lcZ(42,29,e.type),"\n            "),y.xp6(5),y.Q6J("ngIf",e.twoFactorEnabled),y.xp6(2),y.Q6J("ngIf",i.showEnrolledStatus(e)),y.xp6(5),y.s9C("appA11yTitle",y.lcZ(54,31,"options")),y.Q6J("bitMenuTriggerFor",n),y.xp6(6),y.Q6J("ngIf",e.status===i.userStatusType.Invited),y.xp6(2),y.Q6J("ngIf",e.status===i.userStatusType.Accepted),y.xp6(2),y.Q6J("ngIf",e.status===i.userStatusType.Accepted||e.status===i.userStatusType.Invited),y.xp6(5),y.hij(" ",y.lcZ(69,33,"memberRole"),"\n                "),y.xp6(3),y.Q6J("ngIf",i.organization.useGroups),y.xp6(5),y.hij(" ",y.lcZ(77,35,"collections"),"\n                "),y.xp6(5),y.Q6J("ngIf",i.organization.useEvents&&e.status===i.userStatusType.Confirmed),y.xp6(2),y.Q6J("ngIf",i.allowResetPassword(e)),y.xp6(2),y.Q6J("ngIf",e.status===i.userStatusType.Revoked),y.xp6(2),y.Q6J("ngIf",e.status!==i.userStatusType.Revoked),y.xp6(7),y.hij(" ",y.lcZ(95,37,"remove"),"\n                  ")}}function Ji(e,t){if(1&e&&(y._uU(0,"\n          "),y.YNc(1,Li,100,39,"tr",41),y._uU(2,"\n        ")),2&e){const e=y.oxw(2).ngIf;y.xp6(1),y.Q6J("ngForOf",e)}}function Qi(e,t){if(1&e){const e=y.EpF();y.ynx(0),y._uU(1,"\n      "),y.YNc(2,Ui,4,6,"app-callout",20),y._uU(3,"\n      "),y.TgZ(4,"bit-table",21),y.NdJ("scrolled",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.loadMore())})),y._uU(5,"\n        "),y.ynx(6,22),y._uU(7,"\n          "),y.TgZ(8,"tr"),y._uU(9,"\n            "),y.TgZ(10,"th",23),y._uU(11,"\n              "),y.TgZ(12,"input",24),y.NdJ("change",(function(t){y.CHM(e);const n=y.oxw(2);return y.KtG(n.selectAll(t.target.checked))})),y.qZA(),y._uU(13,"\n              "),y.TgZ(14,"label",25),y._uU(15),y.ALo(16,"i18n"),y.qZA(),y._uU(17,"\n            "),y.qZA(),y._uU(18,"\n            "),y.TgZ(19,"th",26),y._uU(20),y.ALo(21,"i18n"),y.qZA(),y._uU(22,"\n            "),y.TgZ(23,"th",26),y._uU(24),y.ALo(25,"i18n"),y.qZA(),y._uU(26,"\n            "),y.TgZ(27,"th",26),y._uU(28),y.ALo(29,"i18n"),y.qZA(),y._uU(30,"\n            "),y.TgZ(31,"th",26),y._uU(32),y.ALo(33,"i18n"),y.qZA(),y._uU(34,"\n            "),y.TgZ(35,"th",27),y._uU(36,"\n              "),y._UZ(37,"button",28),y.ALo(38,"i18n"),y._uU(39,"\n\n              "),y.TgZ(40,"bit-menu",null,29),y._uU(42,"\n                "),y.YNc(43,fi,8,3,"ng-container",9),y.ALo(44,"async"),y._uU(45,"\n                "),y.TgZ(46,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.bulkReinvite())})),y._uU(47,"\n                  "),y._UZ(48,"i",31),y._uU(49),y.ALo(50,"i18n"),y.qZA(),y._uU(51,"\n                "),y.YNc(52,Zi,8,3,"button",32),y._uU(53,"\n                "),y.TgZ(54,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.bulkRestore())})),y._uU(55,"\n                  "),y._UZ(56,"i",33),y._uU(57),y.ALo(58,"i18n"),y.qZA(),y._uU(59,"\n                "),y.TgZ(60,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.bulkRevoke())})),y._uU(61,"\n                  "),y._UZ(62,"i",34),y._uU(63),y.ALo(64,"i18n"),y.qZA(),y._uU(65,"\n                "),y.TgZ(66,"button",30),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.bulkRemove())})),y._uU(67,"\n                  "),y.TgZ(68,"span",35),y._uU(69,"\n                    "),y._UZ(70,"i",36),y._uU(71),y.ALo(72,"i18n"),y.qZA(),y._uU(73,"\n                "),y.qZA(),y._uU(74,"\n              "),y.qZA(),y._uU(75,"\n            "),y.qZA(),y._uU(76,"\n          "),y.qZA(),y._uU(77,"\n        "),y.BQk(),y._uU(78,"\n        "),y.YNc(79,Ji,3,1,"ng-template",37),y._uU(80,"\n      "),y.qZA(),y._uU(81,"\n    "),y.BQk()}if(2&e){const e=y.MAs(41),t=y.oxw(2);y.xp6(2),y.Q6J("ngIf",t.showConfirmUsers),y.xp6(2),y.Q6J("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),y.xp6(11),y.Oqu(y.lcZ(16,16,"all")),y.xp6(5),y.Oqu(y.lcZ(21,18,"name")),y.xp6(4),y.Oqu(y.lcZ(25,20,t.organization.useGroups?"groups":"collections")),y.xp6(4),y.Oqu(y.lcZ(29,22,"role")),y.xp6(4),y.Oqu(y.lcZ(33,24,"policies")),y.xp6(5),y.s9C("appA11yTitle",y.lcZ(38,26,"options")),y.Q6J("bitMenuTriggerFor",e),y.xp6(6),y.Q6J("ngIf",y.lcZ(44,28,t.canUseSecretsManager$)),y.xp6(6),y.hij("\n                  ",y.lcZ(50,30,"reinviteSelected"),"\n                "),y.xp6(3),y.Q6J("ngIf",t.showBulkConfirmUsers),y.xp6(5),y.hij("\n                  ",y.lcZ(58,32,"restoreAccess"),"\n                "),y.xp6(6),y.hij("\n                  ",y.lcZ(64,34,"revokeAccess"),"\n                "),y.xp6(8),y.hij("\n                    ",y.lcZ(72,36,"remove"),"\n                  ")}}function zi(e,t){if(1&e&&(y.ynx(0),y._uU(1,"\n    "),y.YNc(2,mi,3,3,"p",9),y._uU(3,"\n    "),y.YNc(4,Qi,82,38,"ng-container",9),y._uU(5,"\n  "),y.BQk()),2&e){const e=t.ngIf;y.xp6(2),y.Q6J("ngIf",!e.length),y.xp6(2),y.Q6J("ngIf",e.length)}}function Oi(e,t){}function Yi(e,t){}function Ri(e,t){}function Gi(e,t){}function ji(e,t){}function Ei(e,t){}function Bi(e,t){}const Di=function(e,t){return[e,t,"name","email","id"]};class Fi extends et{constructor(e,t,n,i,s,o,r,a,c,l,d,p,g,h,U,f,Z,_,v,b,A,x,w){super(e,r,n,s,o,a,i,d,p,g,U,v),this.route=t,this.policyService=c,this.policyApiService=l,this.syncService=h,this.organizationService=f,this.organizationApiService=Z,this.organizationUserService=_,this.router=b,this.groupService=A,this.collectionService=x,this.configService=w,this.userType=m.je,this.userStatusType=m.Dn,this.memberTab=ee,this.status=null,this.orgResetPasswordPolicyEnabled=!1,this.destroy$=new u.x}ngOnInit(){return ii(this,void 0,void 0,(function*(){const e=this.route.params.pipe((0,Se.U)((e=>this.organizationService.get(e.organizationId))),(0,l.d)({refCount:!0,bufferSize:1}));this.canUseSecretsManager$=e.pipe((0,Se.U)((e=>e.useSecretsManager&&(0,_.Sp)("secretsManager"))));const t=e.pipe((0,d.w)((e=>e.isProviderUser?(0,Ce.D)(this.policyApiService.getPolicies(e.id)).pipe((0,Se.U)((e=>this.policyService.mapPoliciesFromToken(e)))):this.policyService.policies$)));(0,p.a)([this.route.queryParams,t,e]).pipe((0,ke.b)((([e,t,n])=>ii(this,void 0,void 0,(function*(){if(this.organization=n,this.organization.canManageUsersPassword&&!this.organization.hasPublicAndPrivateKeys){const e=yield this.cryptoService.getOrgKey(this.organization.id),t=yield this.cryptoService.makeKeyPair(e),n=new Qe.u(t[0],t[1].encryptedString),i=yield this.organizationApiService.updateKeys(this.organization.id,n);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.organization.hasPublicAndPrivateKeys=null!=i.publicKey&&null!=i.privateKey,yield this.syncService.fullSync(!0)}const i=t.filter((e=>e.type===m.Mi.ResetPassword)).find((e=>e.organizationId===this.organization.id));if(this.orgResetPasswordPolicyEnabled=null==i?void 0:i.enabled,yield this.load(),this.searchText=e.search,null!=e.viewEvents){const t=this.users.filter((t=>t.id===e.viewEvents));t.length>0&&t[0].status===m.Dn.Confirmed&&this.events(t[0])}})))),(0,g.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){const e=Object.create(null,{load:{get:()=>super.load}});return ii(this,void 0,void 0,(function*(){yield e.load.call(this)}))}getUsers(){var e;return ii(this,void 0,void 0,(function*(){let t,n;const i=this.organizationUserService.getAllUsers(this.organization.id,{includeGroups:this.organization.useGroups,includeCollections:!this.organization.useGroups});this.organization.useGroups?t=this.getGroupNameMap():n=this.getCollectionNameMap();const[s,o,r]=yield Promise.all([i,t,n]),a=yield this.configService.getFeatureFlag(Z.T.FlexibleCollections,!1);return null===(e=s.data)||void 0===e?void 0:e.map((e=>{var t,n;const i=nt.fromResponse(e);return a&&(i.accessAll=!1),i.groupNames=i.groups.map((e=>o.get(e))).sort(null===(t=this.i18nService.collator)||void 0===t?void 0:t.compare),i.collectionNames=i.collections.map((e=>r.get(e.id))).sort(null===(n=this.i18nService.collator)||void 0===n?void 0:n.compare),i}))}))}getGroupNameMap(){return ii(this,void 0,void 0,(function*(){const e=yield this.groupService.getAll(this.organization.id),t=new Map;return e.forEach((e=>t.set(e.id,e.name))),t}))}getCollectionNameMap(){return ii(this,void 0,void 0,(function*(){const e=new Map,t=(yield this.apiService.getCollections(this.organization.id)).data.map((e=>new Oe.F(new ze.Z(e))));return(yield this.collectionService.decryptMany(t)).forEach((t=>e.set(t.id,t.name))),e}))}deleteUser(e){return this.organizationUserService.deleteOrganizationUser(this.organization.id,e)}revokeUser(e){return this.organizationUserService.revokeOrganizationUser(this.organization.id,e)}restoreUser(e){return this.organizationUserService.restoreOrganizationUser(this.organization.id,e)}reinviteUser(e){return this.organizationUserService.postOrganizationUserReinvite(this.organization.id,e)}confirmUser(e,t){return ii(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(this.organization.id),i=yield this.cryptoService.rsaEncrypt(n.key,t),s=new Je;s.key=i.encryptedString,yield this.organizationUserService.postOrganizationUserConfirm(this.organization.id,e.id,s)}))}allowResetPassword(e){let t=!1;switch(this.organization.type){case m.je.Owner:t=!0;break;case m.je.Admin:t=e.type!==m.je.Owner;break;case m.je.Custom:t=e.type!==m.je.Owner&&e.type!==m.je.Admin}return this.organization.canManageUsersPassword&&t&&this.organization.useResetPassword&&this.organization.hasPublicAndPrivateKeys&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&e.status===m.Dn.Confirmed}showEnrolledStatus(e){return this.organization.useResetPassword&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}getManageBillingText(){return this.organization.canEditSubscription?"ManageBilling":"NoManageBilling"}getProductKey(e){let t="";switch(e){case f.kv.Free:t="freeOrg";break;case f.kv.TeamsStarter:t="teamsStarterPlan";break;default:throw new Error(`Unsupported product type: ${e}`)}return`${t}InvLimitReached${this.getManageBillingText()}`}getDialogContent(){return this.i18nService.t(this.getProductKey(this.organization.planProductType),this.organization.seats)}getAcceptButtonText(){if(!this.organization.canEditSubscription)return this.i18nService.t("ok");const e=this.organization.planProductType;if(e!==f.kv.Free&&e!==f.kv.TeamsStarter)throw new Error(`Unsupported product type: ${e}`);return this.i18nService.t("upgrade")}handleDialogClose(e){return ii(this,void 0,void 0,(function*(){if(!e||!this.organization.canEditSubscription)return;const t=this.organization.planProductType;if(t!==f.kv.Free&&t!==f.kv.TeamsStarter)throw new Error(`Unsupported product type: ${this.organization.planProductType}`);yield this.router.navigate(["/organizations",this.organization.id,"billing","subscription"],{queryParams:{upgrade:!0}})}))}showSeatLimitReachedDialog(){return ii(this,void 0,void 0,(function*(){const e={title:this.i18nService.t("upgradeOrganization"),content:this.getDialogContent(),type:"primary",acceptButtonText:this.getAcceptButtonText()};this.organization.canEditSubscription||(e.cancelButtonText=null);const t=this.dialogService.openSimpleDialogRef(e);(0,Ie.z)(t.closed).then(this.handleDialogClose.bind(this))}))}edit(e,t=ee.Role){var n,i;return ii(this,void 0,void 0,(function*(){if(!e&&this.organization.hasReseller&&this.organization.seats===this.confirmedCount)return void this.platformUtilsService.showToast("error",this.i18nService.t("seatLimitReached"),this.i18nService.t("contactYourProvider"));if(!e&&this.allUsers.length===this.organization.seats&&(this.organization.planProductType===f.kv.Free||this.organization.planProductType===f.kv.TeamsStarter))return void(yield this.showSeatLimitReachedDialog());const s=(o=this.dialogService,r={data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,organizationUserId:null!=e?e.id:null,allOrganizationUserEmails:null!==(i=null===(n=this.allUsers)||void 0===n?void 0:n.map((e=>e.email)))&&void 0!==i?i:[],usesKeyConnector:null==e?void 0:e.usesKeyConnector,initialTab:t,numConfirmedMembers:this.confirmedCount}},o.open(Ae,r));var o,r;switch(yield(0,Pe.n)(s.closed)){case te.Deleted:this.removeUser(e);break;case te.Saved:case te.Revoked:case te.Restored:this.load()}}))}bulkRemove(){return ii(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(Wt,this.bulkRemoveModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkRevoke(){return ii(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!0)}))}bulkRestore(){return ii(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!1)}))}bulkRevokeOrRestore(e){return ii(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=vn.open(this.dialogService,{organizationId:this.organization.id,users:this.getCheckedUsers(),isRevoking:e});yield(0,Ie.z)(t.closed),yield this.load()}))}bulkReinvite(){return ii(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),t=e.filter((e=>e.status===m.Dn.Invited));if(t.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const n=this.organizationUserService.postManyOrganizationUserReinvite(this.organization.id,t.map((e=>e.id)));this.showBulkStatus(e,t,n,this.i18nService.t("bulkReinviteMessage"))}catch(n){this.validationService.showError(n)}this.actionPromise=null}}))}bulkConfirm(){return ii(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(bt,this.bulkConfirmModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkEnableSM(){return ii(this,void 0,void 0,(function*(){const e=this.getCheckedUsers();if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));const t=Pt.open(this.dialogService,{orgId:this.organization.id,users:e});yield(0,Pe.n)(t.closed),this.selectAll(!1)}))}events(e){return ii(this,void 0,void 0,(function*(){yield(0,Ye.Z)(this.dialogService,{data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,entityId:e.id,showUser:!1,entity:"user"}})}))}resetPassword(e){return ii(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Yn,this.resetPasswordModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.email=null!=e?e.email:null,n.organizationId=this.organization.id,n.id=null!=e?e.id:null,n.onPasswordReset.subscribe((()=>{t.close(),this.load()}))}))}))}removeUserConfirmationDialog(e){return ii(this,void 0,void 0,(function*(){const t=e.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";return!!(yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.userNamePipe.transform(e)]},content:{key:t},type:"warning"}))&&(!(e.status>m.Dn.Invited&&!1===e.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(e)))}))}revokeUserConfirmationDialog(e){return ii(this,void 0,void 0,(function*(){return!!(yield this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(e)]},content:this.revokeWarningMessage(),acceptButtonText:{key:"revokeAccess"},type:"warning"}))&&(!(e.status>m.Dn.Invited&&!1===e.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(e)))}))}showBulkStatus(e,t,n,i){return ii(this,void 0,void 0,(function*(){const[s,o]=yield this.modalService.openViewRef(qn,this.bulkStatusModalRef,(e=>{e.loading=!0}));let r=!1;s.onShown.subscribe((()=>{r&&s.close()}));try{const r=yield n;if(s){const n=r.data.filter((e=>""!==e.error)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error})),{}),s=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});o.users=e.map((e=>{var t;let o=null!==(t=n[e.id])&&void 0!==t?t:i;return s.hasOwnProperty(e.id)||(o=this.i18nService.t("bulkFilteredMessage")),{user:e,error:n.hasOwnProperty(e.id),message:o}})),o.loading=!1}}catch(a){r=!0,s.close()}}))}noMasterPasswordConfirmationDialog(e){return ii(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.userNamePipe.transform(e)]},type:"warning"})}))}}Fi.ɵfac=function(e){return new(e||Fi)(y.Y36(Ke.s),y.Y36(Te.gz),y.Y36(T.D),y.Y36(Le.Z),y.Y36(q.P),y.Y36(Ge.$),y.Y36(He.o),y.Y36(We.R),y.Y36(In.d),y.Y36(Rn.P),y.Y36(je.$),y.Y36(Ne.C),y.Y36(Me.z),y.Y36(Gn._),y.Y36(Ee.b),y.Y36(h.Mn),y.Y36(jn.M),y.Y36(S.t),y.Y36(C.x),y.Y36(Te.F0),y.Y36(b.lT),y.Y36(En.a),y.Y36(k.i))},Fi.ɵcmp=y.Xpm({type:Fi,selectors:[["app-org-people"]],viewQuery:function(e,t){if(1&e&&(y.Gf(si,7,y.s_b),y.Gf(oi,7,y.s_b),y.Gf(ri,7,y.s_b),y.Gf(ai,7,y.s_b),y.Gf(ui,7,y.s_b),y.Gf(ci,7,y.s_b)),2&e){let e;y.iGM(e=y.CRH())&&(t.groupsModalRef=e.first),y.iGM(e=y.CRH())&&(t.confirmModalRef=e.first),y.iGM(e=y.CRH())&&(t.resetPasswordModalRef=e.first),y.iGM(e=y.CRH())&&(t.bulkStatusModalRef=e.first),y.iGM(e=y.CRH())&&(t.bulkConfirmModalRef=e.first),y.iGM(e=y.CRH())&&(t.bulkRemoveModalRef=e.first)}},features:[y.qOj],decls:76,vars:45,consts:[[1,"container","page-content"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[1,"tw-flex","tw-items-center","tw-justify-end","tw-space-x-3"],[3,"selected","selectedChange"],[3,"value"],["bitBadge","","variant","info",4,"ngIf"],[1,"tw-grow",3,"ngModel","placeholder","ngModelChange"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["groupsTemplate",""],["confirmTemplate",""],["resetPasswordTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","variant","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],["header",""],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["bitCell",""],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["headerMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-close"],["body",""],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["bitRow","","alignContent","middle"],["bitCell","",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModel","ngModelChange"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["type","button","bitLink",""],["bitBadge","","class","tw-text-xs","variant","secondary",4,"ngIf"],["bitBadge","","class","tw-text-xs","variant","warning",4,"ngIf"],["class","tw-text-sm tw-text-muted",4,"ngIf"],["variant","secondary",3,"items","maxItems",4,"ngIf"],["bitCell","",1,"tw-cursor-pointer","tw-text-sm","tw-text-muted",3,"click"],["bitCell","",1,"tw-text-muted"],["rowMenu",""],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection"],["bitBadge","","variant","secondary",1,"tw-text-xs"],["bitBadge","","variant","warning",1,"tw-text-xs"],[1,"tw-text-sm","tw-text-muted"],["variant","secondary",3,"items","maxItems"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],[1,"tw-sr-only"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._uU(1,"\n  "),y.TgZ(2,"div",1),y._uU(3,"\n    "),y.TgZ(4,"h1"),y._uU(5),y.ALo(6,"i18n"),y.qZA(),y._uU(7,"\n    "),y.TgZ(8,"div",2),y._uU(9,"\n      "),y.TgZ(10,"bit-toggle-group",3),y.NdJ("selectedChange",(function(e){return t.filter(e)})),y.ALo(11,"i18n"),y._uU(12,"\n        "),y.TgZ(13,"bit-toggle",4),y._uU(14),y.ALo(15,"i18n"),y.YNc(16,li,2,1,"span",5),y._uU(17,"\n        "),y.qZA(),y._uU(18,"\n\n        "),y.TgZ(19,"bit-toggle",4),y._uU(20),y.ALo(21,"i18n"),y.YNc(22,di,2,1,"span",5),y._uU(23,"\n        "),y.qZA(),y._uU(24,"\n\n        "),y.TgZ(25,"bit-toggle",4),y._uU(26),y.ALo(27,"i18n"),y.YNc(28,pi,2,1,"span",5),y._uU(29,"\n        "),y.qZA(),y._uU(30,"\n\n        "),y.TgZ(31,"bit-toggle",4),y._uU(32),y.ALo(33,"i18n"),y.YNc(34,gi,2,1,"span",5),y._uU(35,"\n        "),y.qZA(),y._uU(36,"\n      "),y.qZA(),y._uU(37,"\n\n      "),y.TgZ(38,"bit-search",6),y.NdJ("ngModelChange",(function(e){return t.searchText=e})),y.ALo(39,"i18n"),y.qZA(),y._uU(40,"\n\n      "),y.TgZ(41,"button",7),y.NdJ("click",(function(){return t.invite()})),y._uU(42,"\n        "),y._UZ(43,"i",8),y._uU(44),y.ALo(45,"i18n"),y.qZA(),y._uU(46,"\n    "),y.qZA(),y._uU(47,"\n  "),y.qZA(),y._uU(48,"\n  "),y.YNc(49,hi,9,6,"ng-container",9),y._uU(50,"\n  "),y.YNc(51,zi,6,2,"ng-container",9),y.ALo(52,"search"),y._uU(53,"\n  "),y.YNc(54,Oi,0,0,"ng-template",null,10,y.W1O),y._uU(56,"\n  "),y.YNc(57,Yi,0,0,"ng-template",null,11,y.W1O),y._uU(59,"\n  "),y.YNc(60,Ri,0,0,"ng-template",null,12,y.W1O),y._uU(62,"\n  "),y.YNc(63,Gi,0,0,"ng-template",null,13,y.W1O),y._uU(65,"\n  "),y.YNc(66,ji,0,0,"ng-template",null,14,y.W1O),y._uU(68,"\n  "),y.YNc(69,Ei,0,0,"ng-template",null,15,y.W1O),y._uU(71,"\n  "),y.YNc(72,Bi,0,0,"ng-template",null,16,y.W1O),y._uU(74,"\n"),y.qZA(),y._uU(75,"\n")),2&e&&(y.xp6(5),y.Oqu(y.lcZ(6,20,"members")),y.xp6(5),y.Q6J("selected",t.status),y.uIk("aria-label",y.lcZ(11,22,"memberStatusFilter")),y.xp6(3),y.Q6J("value",null),y.xp6(1),y.hij("\n          ",y.lcZ(15,24,"all")," "),y.xp6(2),y.Q6J("ngIf",t.allCount),y.xp6(3),y.Q6J("value",t.userStatusType.Invited),y.xp6(1),y.hij("\n          ",y.lcZ(21,26,"invited"),"\n          "),y.xp6(2),y.Q6J("ngIf",t.invitedCount),y.xp6(3),y.Q6J("value",t.userStatusType.Accepted),y.xp6(1),y.hij("\n          ",y.lcZ(27,28,"needsConfirmation"),"\n          "),y.xp6(2),y.Q6J("ngIf",t.acceptedCount),y.xp6(3),y.Q6J("value",t.userStatusType.Revoked),y.xp6(1),y.hij("\n          ",y.lcZ(33,30,"revoked"),"\n          "),y.xp6(2),y.Q6J("ngIf",t.revokedCount),y.xp6(4),y.Q6J("ngModel",t.searchText)("placeholder",y.lcZ(39,32,"searchMembers")),y.xp6(6),y.hij("\n        ",y.lcZ(45,34,"inviteMember"),"\n      "),y.xp6(5),y.Q6J("ngIf",t.loading),y.xp6(2),y.Q6J("ngIf",!t.loading&&(t.isPaging()?t.pagedUsers:y.G7q(52,36,y.WLB(42,Di,t.users,t.searchText)))))},dependencies:[I.sg,I.O5,a.Wl,a.JJ,a.On,Bn.Ry,P.B,st.O,ot.A,Dn.b,J.l,Q.r,z.b,B.Q,Fn._,$n.M,Kn.t,Hn.e,Wn.n,wt.a,yt.Y,Tt.v,wt.f,Xn,ti,ni.g,I.Ov,H.C,Ne.C,Me.z,qt.t],encapsulation:2});const $i=[{path:"",component:Fi,canActivate:[qe.G],data:{titleId:"members",organizationPermissions:h.tt}}];class Ki{}Ki.ɵfac=function(e){return new(e||Ki)},Ki.ɵmod=y.oAB({type:Ki}),Ki.ɵinj=y.cJS({imports:[Te.Bz.forChild($i),Te.Bz]});class Hi{}Hi.ɵfac=function(e){return new(e||Hi)},Hi.ɵmod=y.oAB({type:Hi}),Hi.ɵinj=y.cJS({imports:[o.P,s.f,Ki,ye,i.ey]})}}]);
//# sourceMappingURL=795.b9d2ecb21b32fa59d464.js.map