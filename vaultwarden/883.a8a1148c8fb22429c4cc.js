"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[883],{71837:(n,t,e)=>{e.d(t,{H:()=>A});var i=e(24852);class o{}var a=e(42759),s=e(55602),r=e(78627),c=e(99721),u=e(75557),l=e(66459),d=e(97360),p=e(19419),g=e(98645),h=e(33245),f=e(24610),m=e(82933),Z=function(n,t,e,i){return new(e||(e=Promise))((function(o,a){function s(n){try{c(i.next(n))}catch(t){a(t)}}function r(n){try{c(i.throw(n))}catch(t){a(t)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(s,r)}c((i=i.apply(n,t||[])).next())}))};function U(n,t){if(1&n&&(i.TgZ(0,"div",16),i._uU(1,"\n      "),i.TgZ(2,"strong"),i._uU(3),i.ALo(4,"i18n"),i.qZA(),i._uU(5),i.ALo(6,"currency"),i.ALo(7,"currency"),i.ALo(8,"i18n"),i.qZA()),2&n){const n=i.oxw();i.xp6(3),i.hij("",i.lcZ(4,5,"total"),":"),i.xp6(2),i.HOy(" ",n.storageAdjustment||0," GB ×\n      ",i.xi3(6,7,n.storageGbPrice,"$")," = ",i.xi3(7,10,n.adjustedStorageTotal,"$")," /",i.lcZ(8,13,n.interval),"\n    ")}}class A{constructor(n,t,e,o,a,s,r){this.apiService=n,this.i18nService=t,this.platformUtilsService=e,this.router=o,this.activatedRoute=a,this.logService=s,this.organizationApiService=r,this.storageGbPrice=0,this.add=!0,this.interval="year",this.onAdjusted=new i.vpe,this.onCanceled=new i.vpe,this.storageAdjustment=0}submit(){return Z(this,void 0,void 0,(function*(){try{const n=new o;n.storageGbAdjustment=this.storageAdjustment,this.add||(n.storageGbAdjustment*=-1);let t=!1;const e=()=>Z(this,void 0,void 0,(function*(){let e;e=null==this.organizationId?this.formPromise=this.apiService.postAccountStorage(n):this.formPromise=this.organizationApiService.updateStorage(this.organizationId,n);const i=yield e;if(null!=i&&null!=i.paymentIntentClientSecret)try{yield this.paymentComponent.handleStripeCardPayment(i.paymentIntentClientSecret,null)}catch(o){t=!0}}));this.formPromise=e(),yield this.formPromise,this.onAdjusted.emit(this.storageAdjustment),t?(this.platformUtilsService.showToast("warning",null,this.i18nService.t("couldNotChargeCardPayInvoice"),{timeout:1e4}),this.router.navigate(["../billing"],{relativeTo:this.activatedRoute})):this.platformUtilsService.showToast("success",null,this.i18nService.t("adjustedStorage",n.storageGbAdjustment.toString()))}catch(n){this.logService.error(n)}}))}cancel(){this.onCanceled.emit()}get adjustedStorageTotal(){return this.storageGbPrice*this.storageAdjustment}}A.ɵfac=function(n){return new(n||A)(i.Y36(s.s),i.Y36(r.D),i.Y36(c.P),i.Y36(u.F0),i.Y36(u.gz),i.Y36(l.$),i.Y36(d.M))},A.ɵcmp=i.Xpm({type:A,selectors:[["app-adjust-storage"]],viewQuery:function(n,t){if(1&n&&i.Gf(a.p,7),2&n){let n;i.iGM(n=i.CRH())&&(t.paymentComponent=n.first)}},inputs:{storageGbPrice:"storageGbPrice",add:"add",organizationId:"organizationId",interval:"interval"},outputs:{onAdjusted:"onAdjusted",onCanceled:"onCanceled"},decls:52,vars:26,consts:[["ngNativeValidate","",1,"card",3,"appApiAction","ngSubmit"],["form",""],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[1,"row"],[1,"form-group","col-6"],["for","storageAdjustment"],["id","storageAdjustment","type","number","name","StorageGbAdjustment","min","0","max","99","step","1","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"d-block","text-muted","mt-3"],[3,"showMethods"],[1,"mb-3"]],template:function(n,t){if(1&n&&(i.TgZ(0,"form",0,1),i.NdJ("ngSubmit",(function(){return t.submit()})),i._uU(2,"\n  "),i.TgZ(3,"div",2),i._uU(4,"\n    "),i.TgZ(5,"button",3),i.NdJ("click",(function(){return t.cancel()})),i.ALo(6,"i18n"),i._uU(7,"\n      "),i.TgZ(8,"span",4),i._uU(9,"×"),i.qZA(),i._uU(10,"\n    "),i.qZA(),i._uU(11,"\n    "),i.TgZ(12,"h3",5),i._uU(13),i.ALo(14,"i18n"),i.qZA(),i._uU(15,"\n    "),i.TgZ(16,"div",6),i._uU(17,"\n      "),i.TgZ(18,"div",7),i._uU(19,"\n        "),i.TgZ(20,"label",8),i._uU(21),i.ALo(22,"i18n"),i.qZA(),i._uU(23,"\n        "),i.TgZ(24,"input",9),i.NdJ("ngModelChange",(function(n){return t.storageAdjustment=n})),i.qZA(),i._uU(25,"\n      "),i.qZA(),i._uU(26,"\n    "),i.qZA(),i._uU(27,"\n    "),i.YNc(28,U,9,15,"div",10),i._uU(29,"\n    "),i.TgZ(30,"button",11),i._uU(31,"\n      "),i._UZ(32,"i",12),i.ALo(33,"i18n"),i._uU(34,"\n      "),i.TgZ(35,"span"),i._uU(36),i.ALo(37,"i18n"),i.qZA(),i._uU(38,"\n    "),i.qZA(),i._uU(39,"\n    "),i.TgZ(40,"button",13),i.NdJ("click",(function(){return t.cancel()})),i._uU(41),i.ALo(42,"i18n"),i.qZA(),i._uU(43,"\n    "),i.TgZ(44,"small",14),i._uU(45),i.ALo(46,"i18n"),i.qZA(),i._uU(47,"\n  "),i.qZA(),i._uU(48,"\n"),i.qZA(),i._uU(49,"\n"),i._UZ(50,"app-payment",15),i._uU(51,"\n")),2&n){const n=i.MAs(1);i.Q6J("appApiAction",t.formPromise),i.xp6(5),i.s9C("appA11yTitle",i.lcZ(6,12,"cancel")),i.xp6(8),i.Oqu(i.lcZ(14,14,t.add?"addStorage":"removeStorage")),i.xp6(8),i.Oqu(i.lcZ(22,16,t.add?"gbStorageAdd":"gbStorageRemove")),i.xp6(3),i.Q6J("ngModel",t.storageAdjustment),i.xp6(4),i.Q6J("ngIf",t.add),i.xp6(2),i.Q6J("disabled",n.loading),i.xp6(2),i.s9C("title",i.lcZ(33,18,"loading")),i.xp6(4),i.Oqu(i.lcZ(37,20,"submit")),i.xp6(5),i.hij("\n      ",i.lcZ(42,22,"cancel"),"\n    "),i.xp6(4),i.hij("\n      ",i.lcZ(46,24,t.add?"storageAddNote":"storageRemoveNote"),"\n    "),i.xp6(5),i.Q6J("showMethods",!1)}},dependencies:[p.O5,g.Fj,g.wV,g.JJ,g.JL,g.Q7,g.qQ,g.Fd,g.On,g.F,h.B,f.b,a.p,p.H9,m.C],encapsulation:2})},72081:(n,t,e)=>{e.d(t,{Z:()=>_});var i=e(69485),o=e(24852),a=e(19419),s=e(33245),r=e(82933);function c(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"i18n"),o.qZA()),2&n&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"noInvoices")))}function u(n,t){1&n&&(o.TgZ(0,"span"),o._uU(1,"\n          "),o._UZ(2,"i",10),o._uU(3),o.ALo(4,"i18n"),o.qZA()),2&n&&(o.xp6(3),o.hij("\n          ",o.lcZ(4,1,"paid"),"\n        "))}function l(n,t){1&n&&(o.TgZ(0,"span"),o._uU(1,"\n          "),o._UZ(2,"i",11),o._uU(3),o.ALo(4,"i18n"),o.qZA()),2&n&&(o.xp6(3),o.hij("\n          ",o.lcZ(4,1,"unpaid"),"\n        "))}function d(n,t){if(1&n&&(o.TgZ(0,"tr"),o._uU(1,"\n      "),o.TgZ(2,"td"),o._uU(3),o.ALo(4,"date"),o.qZA(),o._uU(5,"\n      "),o.TgZ(6,"td"),o._uU(7,"\n        "),o.TgZ(8,"a",7),o.ALo(9,"i18n"),o._uU(10,"\n          "),o._UZ(11,"i",8),o.qZA(),o._uU(12,"\n        "),o.TgZ(13,"a",9),o.ALo(14,"i18n"),o._uU(15),o.ALo(16,"i18n"),o.qZA(),o._uU(17,"\n      "),o.qZA(),o._uU(18,"\n      "),o.TgZ(19,"td"),o._uU(20),o.ALo(21,"currency"),o.qZA(),o._uU(22,"\n      "),o.TgZ(23,"td"),o._uU(24,"\n        "),o.YNc(25,u,5,3,"span",1),o._uU(26,"\n        "),o.YNc(27,l,5,3,"span",1),o._uU(28,"\n      "),o.qZA(),o._uU(29,"\n    "),o.qZA()),2&n){const n=t.$implicit;o.xp6(3),o.Oqu(o.xi3(4,9,n.date,"mediumDate")),o.xp6(5),o.s9C("href",n.pdfUrl,o.LSH),o.s9C("appA11yTitle",o.lcZ(9,12,"downloadInvoice")),o.xp6(5),o.s9C("href",n.url,o.LSH),o.s9C("title",o.lcZ(14,14,"viewInvoice")),o.xp6(2),o.hij("\n          ",o.xi3(16,16,"invoiceNumber",n.number),""),o.xp6(5),o.Oqu(o.xi3(21,19,n.amount,"$")),o.xp6(5),o.Q6J("ngIf",n.paid),o.xp6(2),o.Q6J("ngIf",!n.paid)}}function p(n,t){if(1&n&&(o.TgZ(0,"table",5),o._uU(1,"\n  "),o.TgZ(2,"tbody"),o._uU(3,"\n    "),o.YNc(4,d,30,22,"tr",6),o._uU(5,"\n  "),o.qZA(),o._uU(6,"\n"),o.qZA()),2&n){const n=o.oxw();o.xp6(4),o.Q6J("ngForOf",n.invoices)}}function g(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"i18n"),o.qZA()),2&n&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"noTransactions")))}function h(n,t){1&n&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"i18n"),o.qZA()),2&n&&(o.xp6(1),o.hij("\n          ",o.lcZ(2,1,"chargeNoun"),"\n        "))}function f(n,t){1&n&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"i18n"),o.qZA()),2&n&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"refundNoun")))}function m(n,t){if(1&n&&o._UZ(0,"i",14),2&n){const n=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngClass",t.paymentMethodClasses(n.paymentMethodType))}}const Z=function(n){return{"text-strike":n}};function U(n,t){if(1&n&&(o.TgZ(0,"tr"),o._uU(1,"\n      "),o.TgZ(2,"td"),o._uU(3),o.ALo(4,"date"),o.qZA(),o._uU(5,"\n      "),o.TgZ(6,"td"),o._uU(7,"\n        "),o.YNc(8,h,3,3,"span",1),o._uU(9,"\n        "),o.YNc(10,f,3,3,"span",1),o._uU(11,"\n      "),o.qZA(),o._uU(12,"\n      "),o.TgZ(13,"td"),o._uU(14,"\n        "),o.YNc(15,m,1,1,"i",12),o._uU(16),o.qZA(),o._uU(17,"\n      "),o.TgZ(18,"td",13),o.ALo(19,"i18n"),o._uU(20),o.ALo(21,"currency"),o.qZA(),o._uU(22,"\n    "),o.qZA()),2&n){const n=t.$implicit,e=o.oxw(2);o.xp6(3),o.Oqu(o.xi3(4,8,n.createdDate,"mediumDate")),o.xp6(5),o.Q6J("ngIf",n.type===e.transactionType.Charge||n.type===e.transactionType.Credit),o.xp6(2),o.Q6J("ngIf",n.type===e.transactionType.Refund),o.xp6(5),o.Q6J("ngIf",n.paymentMethodType),o.xp6(1),o.hij("\n        ",n.details,"\n      "),o.xp6(2),o.s9C("title",o.lcZ(19,11,n.refunded?"refunded":"")),o.Q6J("ngClass",o.VKq(16,Z,n.refunded)),o.xp6(2),o.hij("\n        ",o.xi3(21,13,n.amount,"$"),"\n      ")}}function A(n,t){if(1&n&&(o.TgZ(0,"table",5),o._uU(1,"\n  "),o.TgZ(2,"tbody"),o._uU(3,"\n    "),o.YNc(4,U,23,18,"tr",6),o._uU(5,"\n  "),o.qZA(),o._uU(6,"\n"),o.qZA()),2&n){const n=o.oxw();o.xp6(4),o.Q6J("ngForOf",n.transactions)}}class _{constructor(){this.paymentMethodType=i.Lt,this.transactionType=i.iU}get invoices(){return null!=this.billing?this.billing.invoices:null}get transactions(){return null!=this.billing?this.billing.transactions:null}paymentMethodClasses(n){switch(n){case i.Lt.Card:return["bwi-credit-card"];case i.Lt.BankAccount:case i.Lt.WireTransfer:return["bwi-bank"];case i.Lt.BitPay:return["bwi-bitcoin text-warning"];case i.Lt.PayPal:return["bwi-paypal text-primary"];default:return[]}}}_.ɵfac=function(n){return new(n||_)},_.ɵcmp=o.Xpm({type:_,selectors:[["app-billing-history"]],inputs:{billing:"billing"},decls:20,vars:14,consts:[[1,"mt-3"],[4,"ngIf"],["class","table mb-2",4,"ngIf"],[1,"spaced-header"],[1,"text-muted"],[1,"table","mb-2"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener",1,"mr-2",3,"href","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-file-pdf"],["target","_blank","rel","noopener",3,"href","title"],["aria-hidden","true",1,"bwi","bwi-check","text-success"],["aria-hidden","true",1,"bwi","bwi-exclamation-circle","text-muted"],["class","bwi bwi-fw","aria-hidden","true",3,"ngClass",4,"ngIf"],[3,"ngClass","title"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"]],template:function(n,t){1&n&&(o.TgZ(0,"h2",0),o._uU(1),o.ALo(2,"i18n"),o.qZA(),o._uU(3,"\n"),o.YNc(4,c,3,3,"p",1),o._uU(5,"\n"),o.YNc(6,p,7,1,"table",2),o._uU(7,"\n"),o.TgZ(8,"h2",3),o._uU(9),o.ALo(10,"i18n"),o.qZA(),o._uU(11,"\n"),o.YNc(12,g,3,3,"p",1),o._uU(13,"\n"),o.YNc(14,A,7,1,"table",2),o._uU(15,"\n"),o.TgZ(16,"small",4),o._uU(17),o.ALo(18,"i18n"),o.qZA(),o._uU(19,"\n")),2&n&&(o.xp6(1),o.Oqu(o.lcZ(2,7,"invoices")),o.xp6(3),o.Q6J("ngIf",!t.invoices||!t.invoices.length),o.xp6(2),o.Q6J("ngIf",t.invoices&&t.invoices.length),o.xp6(3),o.Oqu(o.lcZ(10,9,"transactions")),o.xp6(3),o.Q6J("ngIf",!t.transactions||!t.transactions.length),o.xp6(2),o.Q6J("ngIf",t.transactions&&t.transactions.length),o.xp6(3),o.hij("* ",o.xi3(18,11,"chargesStatement","BITWARDEN"),""))},dependencies:[a.mk,a.sg,a.O5,s.B,a.H9,a.uU,r.C],encapsulation:2})},24681:(n,t,e)=>{e.d(t,{$:()=>f});var i=e(24852),o=e(55602),a=e(78627),s=e(99721),r=e(66459),c=e(97360),u=e(19419),l=e(98645),d=e(24610),p=e(82933),g=function(n,t,e,i){return new(e||(e=Promise))((function(o,a){function s(n){try{c(i.next(n))}catch(t){a(t)}}function r(n){try{c(i.throw(n))}catch(t){a(t)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(s,r)}c((i=i.apply(n,t||[])).next())}))};function h(n,t){if(1&n){const n=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",(function(){i.CHM(n);const t=i.oxw();return i.KtG(t.cancel())})),i._uU(1),i.ALo(2,"i18n"),i.qZA()}2&n&&(i.xp6(1),i.hij("\n    ",i.lcZ(2,1,"cancel"),"\n  "))}class f{constructor(n,t,e,o,a){this.apiService=n,this.i18nService=t,this.platformUtilsService=e,this.logService=o,this.organizationApiService=a,this.showCancel=!0,this.onUpdated=new i.vpe,this.onCanceled=new i.vpe}submit(){return g(this,void 0,void 0,(function*(){const n=document.getElementById("file").files;if(null!=n&&0!==n.length)try{const t=new FormData;t.append("license",n[0]);let e=null;e=null==this.organizationId?this.apiService.postAccountLicense(t):this.organizationApiService.updateLicense(this.organizationId,t),this.formPromise=e.then((()=>this.apiService.refreshIdentityToken())),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("licenseUploadSuccess")),this.onUpdated.emit()}catch(t){this.logService.error(t)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"))}))}cancel(){this.onCanceled.emit()}}f.ɵfac=function(n){return new(n||f)(i.Y36(o.s),i.Y36(a.D),i.Y36(s.P),i.Y36(r.$),i.Y36(c.M))},f.ɵcmp=i.Xpm({type:f,selectors:[["app-update-license"]],inputs:{organizationId:"organizationId",showCancel:"showCancel"},outputs:{onUpdated:"onUpdated",onCanceled:"onCanceled"},decls:29,vars:16,consts:[["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"form-group"],["for","file",1,"sr-only"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(n,t){if(1&n&&(i.TgZ(0,"form",0,1),i.NdJ("ngSubmit",(function(){return t.submit()})),i._uU(2,"\n  "),i.TgZ(3,"div",2),i._uU(4,"\n    "),i.TgZ(5,"label",3),i._uU(6),i.ALo(7,"i18n"),i.qZA(),i._uU(8,"\n    "),i._UZ(9,"input",4),i._uU(10,"\n    "),i.TgZ(11,"small",5),i._uU(12),i.ALo(13,"i18n"),i.qZA(),i._uU(14,"\n  "),i.qZA(),i._uU(15,"\n  "),i.TgZ(16,"button",6),i._uU(17,"\n    "),i._UZ(18,"i",7),i.ALo(19,"i18n"),i._uU(20,"\n    "),i.TgZ(21,"span"),i._uU(22),i.ALo(23,"i18n"),i.qZA(),i._uU(24,"\n  "),i.qZA(),i._uU(25,"\n  "),i.YNc(26,h,3,3,"button",8),i._uU(27,"\n"),i.qZA(),i._uU(28,"\n")),2&n){const n=i.MAs(1);i.Q6J("appApiAction",t.formPromise),i.xp6(6),i.Oqu(i.lcZ(7,7,"licenseFile")),i.xp6(6),i.Oqu(i.xi3(13,9,"licenseFileDesc",t.organizationId?"bitwarden_organization_license.json":"bitwarden_premium_license.json")),i.xp6(4),i.Q6J("disabled",n.loading),i.xp6(2),i.s9C("title",i.lcZ(19,12,"loading")),i.xp6(4),i.Oqu(i.lcZ(23,14,"submit")),i.xp6(4),i.Q6J("ngIf",t.showCancel)}},dependencies:[u.O5,l.JL,l.F,d.b,p.C],encapsulation:2})}}]);
//# sourceMappingURL=883.a8a1148c8fb22429c4cc.js.map