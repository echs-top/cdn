(function(e){function t(t){for(var r,o,a=t[0],u=t[1],c=t[2],l=0,f=[];l<a.length;l++)o=a[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0059":function(e,t,n){},"01c8":function(e,t,n){},"01dd":function(e,t,n){"use strict";n("9d58")},"02f3":function(e,t,n){},"04e1":function(e,t,n){"use strict";n("8d8f")},"0768":function(e,t,n){"use strict";n("351d")},"0b52":function(e,t,n){},"0e30":function(e,t,n){"use strict";n("ab51")},"11ba":function(e,t,n){"use strict";n("f221")},1272:function(e,t,n){"use strict";n("8589")},"13cc":function(e,t,n){"use strict";n("8626")},"14a5":function(e,t,n){"use strict";n("976f")},1733:function(e,t,n){"use strict";n("ddee")},1869:function(e,t,n){"use strict";n("35d0")},"18b6":function(e,t,n){"use strict";n("6a6f")},"1a47":function(e,t,n){"use strict";n("6a8b")},"1b84":function(e,t,n){"use strict";n("2a8d")},"1ba9":function(e,t,n){"use strict";n("edba")},"1c18":function(e,t,n){},"22f1":function(e,t,n){"use strict";n("56b4")},2395:function(e,t,n){},2499:function(e,t,n){},2993:function(e,t,n){},"29ea":function(e,t,n){},"2a8d":function(e,t,n){},"2c8f":function(e,t,n){"use strict";n("94bc")},"2fa0":function(e,t,n){"use strict";n("3859")},3028:function(e,t,n){"use strict";n("e544")},"303a":function(e,t,n){},3413:function(e,t,n){"use strict";n("8f9b")},"351d":function(e,t,n){},"35d0":function(e,t,n){},3716:function(e,t,n){"use strict";n("01c8")},3859:function(e,t,n){},"39bf":function(e,t,n){},"3af9":function(e,t,n){},"3b4b":function(e,t,n){},"40da":function(e,t,n){"use strict";n("e640")},"4d54":function(e,t,n){},"4e86":function(e,t,n){},"4f85":function(e,t,n){"use strict";n("9624")},5259:function(e,t,n){},5516:function(e,t,n){},"56b4":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("2ca0"),n("e623"),n("e379"),n("5dc8"),n("37e1");var r=n("2b0e"),i=n("8c4f"),s=n("0867"),o=n.n(s),a=n("e11c"),u=n.n(a),c=n("283d"),d=n.n(c),l=n("15be"),f=n.n(l),h=n("a85e"),p=n.n(h),m=n("f85f"),v=n.n(m),g=n("5cde"),y=n.n(g),b=n("ae4e"),_=n.n(b),w=n("eee5"),k=n.n(w),x=n("6778"),C=n.n(x),S=n("a423"),O=n.n(S),I=n("955d"),L=n.n(I),E=n("d09c"),R=n.n(E),T=n("4ca0"),F=n.n(T),M=n("4778"),A=n.n(M),P=n("96bb"),$=n.n(P),D=n("ddbf"),j=n.n(D),G=(n("97a6"),n("aa12"),n("2095"),n("d4ea")),N=n("dd88"),B=n("4d7d");r["default"].use(j.a),r["default"].use($.a),r["default"].use(A.a),r["default"].use(F.a),r["default"].use(R.a),r["default"].use(L.a),r["default"].use(O.a),r["default"].use(C.a),r["default"].use(k.a),r["default"].use(_.a),r["default"].use(y.a),r["default"].use(v.a),r["default"].use(p.a),r["default"].use(f.a),r["default"].use(d.a),r["default"].use(u.a),r["default"].use(o.a),r["default"].use(G["a"]),r["default"].use(B["a"]),r["default"].use(N["a"],{time:3e3,close:!1});n("a9e3"),n("ac1f"),n("1276");var H=n("d0af"),U=n("2768"),V=n.n(U),z=n("ad3d"),q=n("ecee"),W=n("c074"),K=n("b702"),J=n("f2d1");function Y(e){var t,n,r=e.split("/",2);if(2===r.length){var i=Object(H["a"])(r,2);t=i[0],n=i[1]}else t="fas",n=r[0];return[t,n]}q["c"].add(W["a"]),q["c"].add(W["g"]),q["c"].add(W["o"]),q["c"].add(W["d"]),q["c"].add(W["q"]),q["c"].add(W["h"]),q["c"].add(W["i"]),q["c"].add(W["f"]),q["c"].add(W["l"]),q["c"].add(W["t"]),q["c"].add(W["k"]),q["c"].add(W["n"]),q["c"].add(W["m"]),q["c"].add(K["a"]),q["c"].add(J["a"]),q["c"].add(W["j"]),q["c"].add(W["p"]),q["c"].add(W["c"]),q["c"].add(W["b"]),q["c"].add(W["e"]),q["c"].add(W["r"]),q["c"].add(W["s"]),r["default"].component("fa-icon",{name:"fa-icon",functional:!0,props:{icon:{type:String,required:!0},color:String,size:{type:[Number,String]},rotation:{type:[Number,String]},flip:String,border:Boolean,inverse:Boolean},render:function(e,t){var n=t.data,r=t.props;return n.props={icon:Y(r.icon),rotation:r.rotation,flip:r.flip,border:r.border,inverse:r.inverse},n.style=n.style||{},V()(r.size)||(n.style["font-size"]=r.size+"px"),V()(r.color)||(n.style["color"]=r.color),n.attrs=n.attrs||{},n.attrs["aria-hidden"]="true",n.staticClass="".concat(n.staticClass||""," fa-icon"),e(z["a"],n)}});n("619b"),n("d4b8");var X=n("8d6b"),Q=(n("99af"),n("9c30")),Z=!(null===window.localStorage||void 0===window.localStorage),ee=function(){var e=window.matchMedia("(prefers-color-scheme)");return!("not all"===e.media||V()(e.addEventListener))}();function te(e){return"enable"===e||"disable"===e?e:"auto"}function ne(){return te(window.localStorage.getItem("RSSANT_DARK_MODE"))}function re(e){e=te(e),"auto"===e?window.localStorage.removeItem("RSSANT_DARK_MODE"):window.localStorage.setItem("RSSANT_DARK_MODE",e)}var ie={brightness:95,contrast:95};function se(e,t){try{Q[e](t)}catch(n){console.warn("DarkReader.".concat(e," failed: ").concat(n))}}function oe(){if(Z&&ee){var e=ne();"enable"===e?se("enable",ie):"auto"===e&&se("auto",ie)}else console.log("Dark mode not supported!")}function ae(e){if(Z&&ee){e=te(e);var t=ne();e!==t&&(re(e),"enable"===t&&se("disable"),"auto"===t&&se("auto",!1),"enable"===e&&se("enable"),"auto"===e&&se("auto"))}else console.log("Dark mode not supported!")}var ue={isSupported:function(){return Z&&ee},get:function(){return ne()},set:function(e){return ae(e)},init:function(){return oe()}},ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"timeit"}}),n("keep-alive",{attrs:{include:e.keepAlivePages}},[n("router-view")],1)],1)},de=[],le=(n("96cf"),n("c964")),fe=(n("45fc"),n("b0c0"),n("5319"),n("020f")),he=n.n(fe),pe=n("165d"),me=n.n(pe),ve="RSSANT_CONFIG",ge={DEBUG:{defaultValue:!1},PWA_ENABLE:{defaultValue:!1},HELP_READED:{defaultValue:!1},HAS_LOGIN_HISTORY:{defaultValue:!1},VIP_NOTICED_TIMESTAMP:{defaultValue:0}},ye=function(){var e=window.localStorage,t={enable:!V()(e),_cache:null,_load:function(){var n={},r=e.getItem(ve);if(!V()(r))try{n=JSON.parse(r)}catch(i){console.error("Load local config failed: "+i),t.clear()}return me()(n,{})},clear:function(){t.enable&&(t._cache={},e.removeItem(ve))},get:function(e,n){return t.enable?(V()(t._cache)&&(t._cache=t._load()),me()(t._cache[e],n)):n},set:function(n,r){if(t.enable){var i=t._load();i[n]=r,e.setItem(ve,JSON.stringify(i)),t._cache=i}}};return he()(ge,(function(e,n){t[n]={get:function(){return t.get(n,e.defaultValue)},set:function(e){t.set(n,e)}}})),t}(),be=ye,_e=(n("4160"),n("d81d"),n("159b"),n("f3f3")),we=n("0b49"),ke=n.n(we),xe=n("6cd4"),Ce=n.n(xe),Se=n("b047c"),Oe=n.n(Se),Ie="#66BB6A",Le="#60bbf3",Ee="#FFBA00",Re="#f44336",Te="#768fa1",Fe="#353535",Me="#888888",Ae="#B2B2B2",Pe="#FFFFFF",$e="#FFFFFF",De="#090909",je="#FAFAFA",Ge="#EAEAEA";function Ne(e){var t=Math.min(1500,e),n="mobile";t>=800&&(n="board"),t>=1e3&&(n="wide");var r="board"===n||"wide"===n,i="wide"===n,s=Math.max(320,Math.min(480,Math.round(t/2.618))),o=t-s;return{windowInnerWidth:e,mode:n,appWidth:t,hasBoard:r,mainWidth:r?s:t,boardWidth:r?o:0,isWide:i}}var Be=r["default"].observable(Object(_e["a"])({windowInnerHeight:window.innerHeight},Ne(window.innerWidth)));window.addEventListener("resize",Oe()((function(){var e=window.innerWidth;if(e!==Be.windowInnerWidth){var t=Ne(e);t.mode!==Be.mode&&window.location.reload(),Ce()(ke()(t),(function(e){var t=Object(H["a"])(e,2),n=t[0],r=t[1];Be[n]=r}))}var n=window.innerHeight;n!==Be.windowInnerHeight&&(Be.windowInnerHeight=n)})),150);var He=Be.hasBoard,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-layout",style:e.layoutStyle},[n("MoLayout",{staticClass:"app-main",style:e.mainStyle,attrs:{grey:"",header:""}},[n("MoHome")],1),e.hasBoard?n("div",{staticClass:"app-board",style:e.boardStyle},[e.showPlaceholder?n("MoLayout",{attrs:{grey:"",header:""}},[n("MoHeader"),n("MoBrandPlaceholder")],1):e._e(),n("keep-alive",{attrs:{include:e.keepAlivePages}},[n("router-view",{key:this.$route.fullPath})],1)],1):e._e()],1)},Ve=[],ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout",class:{"layout-grey":e.grey,"layout-header":e.header,"layout-solo":e.solo},style:e.wrapperStyle},[e._t("default")],2)},qe=[],We={props:{grey:{type:Boolean,default:!1},header:{type:Boolean,default:!1},solo:{type:Boolean,default:!1}},computed:{wrapperStyle:function(){return{minHeight:"".concat(this.$LAYOUT.windowInnerHeight,"px")}}}},Ke=We,Je=(n("b330"),n("4f85"),n("2877")),Ye=Object(Je["a"])(Ke,ze,qe,!1,null,"3faca5c6",null),Xe=Ye.exports,Qe=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("MoHeader",{directives:[{name:"show",rawName:"v-show",value:t.showHeader,expression:"showHeader"}],attrs:{border:"",board:""}},[r("MoDebugTool",{staticClass:"title"},[t._v("蚁阅")]),r("div",{staticClass:"right"},[r("MoReadedButton",{staticClass:"action-readed",on:{click:t.setAllReaded}}),r("mu-button",{ref:"wizardTrigger",staticClass:"action-add",attrs:{icon:""},on:{click:function(){e.routeTo("/feed-creation")}}},[r("fa-icon",{staticClass:"action-icon",attrs:{icon:"plus"}})],1),r("MoHeaderTip",{attrs:{open:t.openWizard,trigger:t.wizardTrigger,content:"点这里添加订阅"},on:{"update:open":function(e){t.openWizard=e}}}),r("mu-button",{ref:"actionMenuRef",staticClass:"action-menu",attrs:{icon:""},on:{click:t.toggleMenu}},[r("fa-icon",{staticClass:"action-icon",attrs:{icon:"bars"}}),t.showMenuAccountDot||t.showMenuHelpDot?r("span",{staticClass:"action-menu-dot"}):t._e()],1),r("transition",{attrs:{name:"mu-fade-transition"}},[r("mu-list",{directives:[{name:"show",rawName:"v-show",value:t.isMenuOpen,expression:"isMenuOpen"}],ref:"actionMenuListRef",staticClass:"action-menu-list"},[r("mu-list-item",{attrs:{button:""},on:{click:t.goAccount}},[r("mu-list-item-title",[t._v("账号设置")]),t.showMenuAccountDot?r("span",{staticClass:"action-menu-account-dot"}):t._e()],1),r("mu-list-item",{attrs:{button:""},on:{click:t.goFeedClean}},[r("mu-list-item-title",[t._v("整理订阅")])],1),r("mu-list-item",{attrs:{button:""},on:{click:t.goFeedFavorited}},[r("mu-list-item-title",[t._v("我的收藏")])],1),r("mu-list-item",{attrs:{button:""},on:{click:t.goPublishConfig}},[r("mu-list-item-title",[t._v("发布订阅")])],1),r("mu-list-item",{attrs:{button:""},on:{click:t.goHelp}},[r("mu-list-item-title",[t._v("蚁阅锦囊")]),t.showMenuHelpDot?r("span",{staticClass:"action-menu-help-dot"}):t._e()],1)],1)],1)],1)],1),r("div",{ref:"mainRef",staticClass:"main"},[t.isReady?t._e():r("div",{staticClass:"list-placeholder-wrapper"},[t._m(0)]),t.isReady&&t.isEmpty?r("transition",{attrs:{name:"mu-fade-transition"}},[r("div",{staticClass:"empty-placeholder-wrapper"},[r("div",{staticClass:"empty-placeholder"},[r("span",[r("span",[t._v("点击上方")]),r("fa-icon",{staticClass:"icon-add",attrs:{icon:"plus"}}),r("span",[t._v("号")])],1),r("br"),r("span",[t._v("轻松订阅")])])])]):t._e(),r("transition-group",{staticClass:"list list-upper",style:{height:t.virtualUpperHeight+"px"},attrs:{name:"list",tag:"div"}},t._l(t.virtualUpperList,(function(e){return r("MoFeedVirtualItem",{key:e.id,class:{"active-item":t.isActiveItem(e.id)},attrs:{feed:e.feed,group:e.group,routeTo:t.routeTo},nativeOn:{"!click":function(n){return t.setActiveItem(e.id)}}})})),1),r("transition-group",{staticClass:"list list-lower",style:{height:t.virtualLowerHeight+"px"},attrs:{name:"list",tag:"div"}},t._l(t.virtualLowerList,(function(e){return r("MoFeedVirtualItem",{key:e.id,class:{"active-item":t.isActiveItem(e.id)},attrs:{feed:e.feed,group:e.group,routeTo:t.routeTo},nativeOn:{"!click":function(n){return t.setActiveItem(e.id)}}})})),1)],1),t.isReady?r("mu-icon",{staticStyle:{position:"fixed",top:"-100px"},attrs:{value:"favorite"}}):t._e()],1)},Ze=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-placeholder spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})])}],et=(n("a434"),n("54f8")),tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header",class:{"header-border":e.border}},[e._t("default")],2)},nt=[],rt={props:{border:{type:Boolean,default:!1}}},it=rt,st=(n("c764"),Object(Je["a"])(it,tt,nt,!1,null,"48ab5182",null)),ot=st.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.onClick}},[e._t("default")],2)},ut=[],ct={data:function(){return{count:0}},mounted:function(){V()(window._RSSANT_DEBUG)&&this.isDebug()&&this.applyDebug(this.isDebug())},methods:{isDebug:function(){return be.DEBUG.get()},setDebug:function(e){be.DEBUG.set(e)},applyDebug:function(e){window._RSSANT_DEBUG=e;var t="RSSAnt debug mode: ".concat(e?"ON":"OFF");console.log(t),this.$toast.success(t);var n=null;if(e){var r="\n              * {\n                outline: 1px solid pink !important;\n              }\n            ";n=document.createElement("style"),n.id="rssant-debug-style",n.type="text/css",n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(n)}else n=document.querySelector("#rssant-debug-style"),n&&n.parentNode.removeChild(n)},toggleDebug:function(){var e=!this.isDebug();this.setDebug(e),this.applyDebug(e)},onClick:function(e){var t=this;this.$emit("click",e),this.count+=1,this.count>=10?(this.count=0,this.toggleDebug()):1===this.count&&setTimeout((function(){t.count=0}),3e3)}}},dt=ct,lt=Object(Je["a"])(dt,at,ut,!1,null,"410d6cb9",null),ft=lt.exports,ht=(n("9911"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-item",class:{"feed-item-readed":e.readed},on:{click:e.onClick}},[n("div",{staticClass:"feed-title"},[e._v(e._s(e.title))]),n("div",{staticClass:"feed-num-unread"},[e._v(e._s(e.numberText))]),n("div",{staticClass:"feed-date"},[e._v(e._s(e.dateText))])])}),pt=[],mt=(n("d3b7"),n("25f0"),n("b166")),vt=n("1ba4"),gt=n("f7f1"),yt=n("909c"),bt=n("3683");function _t(e){return Object(mt["a"])(new Date(e),"yyyy-MM-dd")}function wt(e,t){return V()(e)||""===e?"":(e=new Date(e),V()(t)&&(t=new Date),Object(vt["a"])(t,e)?Object(mt["a"])(e,"HH:mm"):Object(vt["a"])(t,Object(gt["a"])(e,1))?Object(mt["a"])(e,"昨天"):Object(vt["a"])(t,Object(gt["a"])(e,2))?Object(mt["a"])(e,"前天"):Object(yt["a"])(t,e)?Object(mt["a"])(e,"MM-dd"):Object(mt["a"])(e,"yyyy-MM"))}function kt(e){if(V()(e)||""===e)return"";e=new Date(e);var t=new Date,n=Object(mt["a"])(e,"yyyy-MM-dd HH:mm:ss");if(Object(vt["a"])(t,e))n="".concat(n," 今天");else if(Object(vt["a"])(t,Object(gt["a"])(e,1)))n="".concat(n," 昨天");else{var r=Object(bt["a"])(t,e);n="".concat(n," 约 ").concat(r," 天前")}return n}var xt={props:{title:String,number:{type:Number,default:0},date:[String,Date],link:String,routeTo:Function},computed:{readed:function(){return V()(this.number)||this.number<=0},dateText:function(){return wt(this.date)},numberText:function(){return V()(this.number)?"":this.number>999?"999":this.number.toString()}},data:function(){return{}},methods:{onClick:function(){V()(this.routeTo)?this.$router.push(this.link):this.routeTo(this.link)}}},Ct=xt,St=(n("8109"),Object(Je["a"])(Ct,ht,pt,!1,null,"2e9d5508",null)),Ot=St.exports,It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoFeedItem",e._g(e._b({staticClass:"feed-group-item"},"MoFeedItem",e.$props,!1),e.$listeners))},Lt=[],Et={components:{MoFeedItem:Ot},props:{title:String,number:{type:Number,default:0},date:[String,Date],link:String,routeTo:Function},data:function(){return{}}},Rt=Et,Tt=(n("ebe7"),Object(Je["a"])(Rt,It,Lt,!1,null,"5030f18a",null)),Ft=Tt.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-story-item",class:{"feed-story-item-readed":e.isReaded},on:{click:e.goStory}},[n("div",{staticClass:"feed-title",on:{click:function(t){return t.stopPropagation(),e.goFeed(t)}}},[e._v(e._s(e.feedTitle))]),n("div",{staticClass:"story-title"},[e._v(e._s(e.storyTitle))]),n("div",{staticClass:"story-date"},[e._v(e._s(e.dateText))])])},At=[],Pt=n("13ea"),$t=n.n(Pt),Dt=(n("4de4"),n("ec69")),jt=n.n(Dt),Gt=n("d623"),Nt=n.n(Gt),Bt=n("6bd8"),Ht=n.n(Bt),Ut=n("f542"),Vt=n.n(Ut),zt=n("3ff1"),qt=n.n(zt),Wt=n("3482"),Kt=n.n(Wt),Jt=n("c707"),Yt=n.n(Jt),Xt=n("5128"),Qt=n.n(Xt),Zt=n("1212"),en=n("5dea"),tn=n("276c"),nn=n("e954"),rn=n("9520"),sn=n.n(rn),on=function(){function e(){Object(tn["a"])(this,e),this.hasBegin=!1,this.isLoading=!1,this.isFinished=!1,this.isResolved=!1,this.isRejected=!1,this.promise=null}return Object(nn["a"])(e,[{key:"begin",value:function(e){var t=this;if(!sn()(e))throw new Error("Parameter executor must be a function");if(this.hasBegin)return this.promise;var n=e();if(!(sn()(n.then)||sn()(n.catch)||sn()(n.finally)))throw new Error("Parameter executor must return a Promise object");return this.promise=n,this.hasBegin=!0,this.isLoading=!0,new Promise((function(e,n){t.promise.then((function(n){t.isResolved=!0,e(n)})).catch((function(e){t.isRejected=!0,n(e)})).finally((function(){t.isLoading=!1,t.isFinished=!0}))}))}},{key:"reset",value:function(){this.hasBegin=!1,this.isLoading=!1,this.isFinished=!1,this.isResolved=!1,this.isRejected=!1,this.promise=null}}]),e}(),an=on,un=(n("caad6"),n("a15b"),n("fb6a"),n("2532"),n("3ca3"),n("841c"),n("ddb0"),n("2b3d"),n("d0ff")),cn=n("6747"),dn=n.n(cn),ln=n("78b0"),fn=n.n(ln),hn=n("bc3a"),pn=n.n(hn),mn=n("a78e"),vn=n.n(mn),gn=n("b4b0"),yn=n.n(gn),bn=n("b69c"),_n=n.n(bn),wn=function(){};wn.show=function(e,t,n){var r=/^\d+/i.exec(e),i=-1;V()(r)||(i=_n()(yn()(r[0])));var s="#4caf50";i>50?s="#f44336":i>30&&(s="#ff9800");var o=document.querySelector("#timeit"),a=document.createElement("div");a.style.color=s,a.innerHTML='\n    <span style="min-width:45px; display:inline-block; text-align:right;">\n      '.concat(i,"ms\n    </span>\n    <span>").concat(t.toUpperCase()," ").concat(n,"</span>\n  "),o.appendChild(a),setTimeout((function(){o.removeChild(a)}),1e4)};var kn=wn;function xn(){return be.DEBUG.get()}var Cn="/api/v1";function Sn(e,t,n){V()(n)&&(n=window.location.origin);var r=new URL(e,n),i=new URLSearchParams;return Ce()(ke()(t),(function(e){var t=Object(H["a"])(e,2),n=t[0],r=t[1];V()(r)||i.append(n,r)})),r.search=i,r.toString()}var On=pn.a.create({baseURL:Cn}),In=[function(e){var t=vn.a.get("csrftoken");return V()(t)||(V()(e.headers)&&(e.headers={}),e.headers["X-CSRFToken"]=t),e}];In.forEach((function(e){On.interceptors.request.use(e)}));var Ln=[[function(e){if(xn()){var t=e.headers["x-time"];V()(t)||kn.show(t,e.config.method,e.config.url)}return Promise.resolve(e.data)},function(e){var t=null;t=V()(e.response)?"Failed: ".concat(e.config.method," ").concat(e.config.url):"".concat(e.response.status," ").concat(e.response.statusText);var n=e.message;return V()(e.response)||V()(e.response.data)||($t()(e.response.data.message)?$t()(e.response.data.detail)||(n=e.response.data.detail):n=e.response.data.message),n=fn()(n,{length:50,separator:/,? +/}),Object.assign(e,{title:t,message:n}),xn()&&N["a"].error(t+": "+n),Promise.reject(e)}]];function En(e,t){if(!e.response||400!==e.response.status)return e.message;var n,r=e.response.data,i=[],s=Object(et["a"])(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;dn()(r[o])?i=i.concat(r[o]):$t()(r[o])||i.push(r[o])}}catch(a){s.e(a)}finally{s.f()}return i=i.slice(0,1).join(" "),i}function Rn(e){return $t()(e)||(e.toLowerCase().includes("already registered")?e="此邮箱已注册":e.toLowerCase().includes("valid email address")&&(e="邮箱地址无效")),e}function Tn(e){return $t()(e)||(e.toLowerCase().includes("password is too short")?e="密码至少要 8 个字符":e.toLowerCase().includes("password is too common")?e="密码不能太简单":e.toLowerCase().includes("password is too similar to the username")&&(e="密码不能和用户名太相似")),e}Ln.forEach((function(e){var t;(t=On.interceptors.response).use.apply(t,Object(un["a"])(e))}));var Fn,Mn={user:{login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.account,n=e.password;return On.post("/user/login/",{account:t,password:n})},register:function(e){var t=e.username,n=e.email,r=e.password;return t=me()(t,n),On.post("/auth/registration/",{username:t,email:n,password1:r,password2:r}).catch((function(e){if(e.response&&400===e.response.status){var t=En(e,["email","username"]);t=Rn(t);var n=En(e,["password1","password2"]);n=Tn(n),e.response.data={email:t,password:n}}throw e}))},vipCustomerInfo:function(){return On.post("/ezrevenue/customer.info")},confirmEmail:function(e){var t=e.key;return On.post("/auth/registration/verify-email/",{key:t})},changePassword:function(e){var t=e.password;return On.post("/auth/password/change/",{new_password1:t,new_password2:t}).catch((function(e){var t=En(e,["new_password1","new_password2"]);throw t=Tn(t),$t()(t)||(e.message=t),e}))},resetPassword:function(e){var t=e.email;return On.post("/auth/password/reset/",{email:t}).catch((function(e){var t=En(e,["email"]);throw t=Rn(t),$t()(t)||(e.message=t),e}))},confirmResetPassword:function(e){var t=e.token,n=e.uid,r=e.new_password;return On.post("/auth/password/reset/confirm/",{token:t,uid:n,new_password1:r,new_password2:r}).catch((function(e){var t=En(e,["new_password1","new_password2","token","uid"]);throw t=Tn(t),$t()(t)||(e.message=t),e}))},logout:function(){return On.post("/auth/logout/")},loginGithub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.next,n=e.scope,r=Cn+"/accounts/github/login/",i=Sn(r,{next:t,scope:n,process:"login"});window.location.assign(i)},connectGithub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.next,n=e.scope,r=Cn+"/accounts/github/login/",i=Sn(r,{next:t,scope:n,process:"connect"});window.location.assign(i)}},feed:{query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,n=e.hints;return On.post("/feed.query",{detail:t,hints:n})},getCreation:function(e){var t=e.id,n=e.detail;return On.post("/feed.get_creation",{id:t,detail:n})},queryCreationList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail;return On.post("/feed.query_creation",{detail:t})},get:function(e){var t=e.id,n=e.detail;return On.post("/feed.get",{id:t,detail:n})},setTitle:function(e){var t=e.id,n=e.title;return On.post("/feed.set_title",{id:t,title:n})},setPublish:function(e){var t=e.id,n=e.is_publish;return On.post("/feed.set_publish",{id:t,is_publish:n})},setAllGroup:function(e){var t=e.ids,n=e.group;return On.post("/feed.set_all_group",{ids:t,group:n})},delete:function(e){var t=e.id;return On.post("/feed.delete",{id:t})},deleteAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ids,n=void 0===t?null:t;return On.post("/feed.delete_all",{ids:n})},setStoryOffset:function(e){var t=e.id,n=e.offset;return On.post("/feed.set_offset",{id:t,offset:n})},setAllReaded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ids;return On.post("/feed.set_all_readed",{ids:t})},import:function(e){var t=e.text,n=e.group;return On.post("/feed.import",{text:t,group:n})},importFile:function(e){var t=e.file,n=e.group,r=new FormData;return r.append("file",t),On.post("/feed.import_file",r,{params:{group:n},headers:{"Content-Type":"multipart/form-data"}})},exportOPML:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.download;t=t?"true":"false",window.open(Cn+"/feed/export/opml?download=".concat(t),"_blank")}},story:{query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feed_id,n=e.detail,r=e.offset,i=e.size;return On.post("/story.query",{feed_id:t,detail:n,offset:r,size:i})},queryRecent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feed_ids,n=e.days,r=e.detail;return On.post("/story.query_recent",{feed_ids:t,days:n,detail:r})},queryBatch:function(e){var t=e.storys,n=e.detail;return On.post("/story.query_batch",{storys:t,detail:n})},get:function(e){var t=e.feed_id,n=e.offset,r=e.detail,i=e.set_readed;return On.post("/story.get",{feed_id:t,offset:n,detail:r,set_readed:i})},listWatched:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail;return On.post("/story.query_watched",{detail:t})},listFavorited:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail;return On.post("/story.query_favorited",{detail:t})},setWatched:function(e){var t=e.feed_id,n=e.offset,r=e.is_watched;return On.post("/story.set_watched",{feed_id:t,offset:n,is_watched:r})},setFavorited:function(e){var t=e.feed_id,n=e.offset,r=e.is_favorited;return On.post("/story.set_favorited",{feed_id:t,offset:n,is_favorited:r})},fetchFulltext:function(e){var t=e.feed_id,n=e.offset;return On.post("/story.fetch_fulltext",{feed_id:t,offset:n})}},userPublish:{get:function(){return On.post("/user_publish.get",{})},set:function(e){var t=e.unionid,n=e.is_enable,r=e.root_url,i=e.website_title,s=e.is_all_public;return On.post("/user_publish.set",{unionid:t,is_enable:n,root_url:r,website_title:i,is_all_public:s})}},publish:{info:function(){return On.post("/publish.info",{})},feedQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,n=e.hints;return On.post("/publish.feed_query",{detail:t,hints:n})},feedGet:function(e){var t=e.id,n=e.detail;return On.post("/publish.feed_get",{id:t,detail:n})},storyQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feed_id,n=e.detail,r=e.offset,i=e.size;return On.post("/publish.story_query",{feed_id:t,detail:n,offset:r,size:i})},storyGet:function(e){var t=e.feed_id,n=e.offset,r=e.detail,i=e.set_readed;return On.post("/publish.story_get",{feed_id:t,offset:n,detail:r,set_readed:i})}},imageProxy:{urlForImage:function(e){var t=e.proxyUrl,n=e.src,r=e.token,i="/api/v1/image/proxy";return Sn(i,{url:n,token:r},t)}}},An=Mn,Pn=n("0adb"),$n="RSSANT_FEEDS",Dn=28800,jn=function(){var e=window.localStorage,t={enable:!V()(e),clear:function(){t.enable&&e.removeItem($n)},get:function(){if(!t.enable)return[];var n=null,r=e.getItem($n);if(V()(r))return[];try{n=JSON.parse(r)}catch(o){return console.error("Load local feeds failed: "+o),t.clear(),[]}var i=new Date,s=new Date(n.expireAt);return V()(s||i>=s)?(t.clear(),[]):me()(n.feeds,[])},set:function(n){if(t.enable){var r=new Date,i=Object(Pn["a"])(r,Dn),s={feeds:n,expireAt:i};e.setItem($n,JSON.stringify(s))}}};return t}(),Gn=jn,Nn=n("fc11"),Bn=n("66c7"),Hn=n.n(Bn),Un=n("5ddc"),Vn=n.n(Un),zn="SYS:MUSHROOM",qn="SYS:SOLO",Wn=(Fn={},Object(Nn["a"])(Fn,zn,"品读"),Object(Nn["a"])(Fn,qn,"无分组"),Fn),Kn={};function Jn(e){return Vn()(e,"SYS:")}function Yn(e){return me()(Wn[e],e)}function Xn(e){return e=Hn()(e),me()(Kn[e],e)}Ce()(Vt()(Wn),(function(e){var t=Object(H["a"])(e,2),n=t[0],r=t[1];Kn[r]=n}));var Qn=n("2f62"),Zn=n("62eb");r["default"].use(Qn["default"]);var er=Object(Zn["createHamiVuex"])();function tr(e){return e.total_storys<=0||$t()(e.dt_latest_story_published)}function nr(e){return e.num_unread_storys<=0}function rr(e){var t=e.group;return $t()(t)&&(t=e.dryness>=500?zn:qn),t}function ir(e){return rr(e)===zn}function sr(e){return Qt()(Yt()(e,[function(e){return new Date(e.dt_latest_story_published||e.dt_created)},"id"]))}function or(e){var t=[],n=[],r=[],i=[],s=[];return e.forEach((function(e){tr(e)?t.push(e):ir(e)?nr(e)?n.push(e):i.push(e):nr(e)?r.push(e):s.push(e)})),Kt()(sr(s),sr(i),sr(r),sr(n),sr(t))}function ar(e,t){var n=[];if(ir(e)){if(e.num_unread_storys>=1&&e.num_unread_storys<=3)n.push({feed_id:e.id,offset:e.story_offset,limit:e.num_unread_storys});else if(e.total_storys>0){var r=new Date(e.dt_latest_story_published);Object(Zt["a"])(r,t)&&n.push({feed_id:e.id,offset:e.total_storys-1,limit:1})}}else Jn(rr(e))||e.num_unread_storys>=1&&e.num_unread_storys<=3&&n.push({feed_id:e.id,offset:e.story_offset,limit:e.num_unread_storys});return n}function ur(e){var t=[],n=Object(en["a"])(new Date,14);Ce()(qt()(e.feeds),(function(e){ar(e,n).forEach((function(e){return t.push(e)}))}));var r={};Ce()(qt()(e.feeds),(function(e){var t=rr(e);V()(r[t])&&(r[t]=[]),r[t].push(e)}));var i=me()(r[zn],[]),s=me()(r[qn],[]),o=or(Kt()(i,s));delete r[zn],delete r[qn];var a=[];Ce()(Vt()(r),(function(e){var t=Object(H["a"])(e,2),n=t[0],r=t[1],i=or(r).map((function(e){return e.id}));a.push({name:n,feedIds:i})}));var u=[function(t){return cr(e,t)<=0},function(t){return dr(e,t)}];a=Qt()(Yt()(a,u)),e.feedGroups=a,e.homeFeedIds=o.map((function(e){return e.id})),e.mushroomKeys=t}function cr(e,t){var n=lr(e,t.feedIds);return Ht()(n,(function(e){return e.num_unread_storys}))}function dr(e,t){var n,r=Object(et["a"])(t.feedIds);try{for(r.s();!(n=r.n()).done;){var i=n.value,s=e.feeds[i];if(!V()(s)){var o=s.dt_latest_story_published||s.dt_created;if(!V()(o)&&""!==o)return new Date(o)}}}catch(a){r.e(a)}finally{r.f()}return null}function lr(e,t){return t.map((function(t){return e.feeds[t]})).filter((function(e){return!V()(e)}))}function fr(e,t){var n={};Object.assign(n,me()(e.feeds[t.id],{})),Object.assign(n,t),n=hr(n),n=pr(n),r["default"].set(e.feeds,n.id,n)}function hr(e){return $t()(e.title)&&(e.title="#".concat(e.id)),e}function pr(e){if(V()(e.num_unread_storys)||V()(e.story_offset)||V()(e.total_storys))return e;var t=15,n=e.story_offset<=0;n&&e.num_unread_storys>t&&(e.num_unread_storys=t,e.story_offset=e.total_storys-t);var r=300;return e.num_unread_storys>r&&(e.num_unread_storys=r,e.story_offset=e.total_storys-r),e}function mr(e,t){var n=e.creations[t.id];!V()(n)&&$t()(t.message)&&(t.message=n.message),r["default"].set(e.creations,t.id,t)}var vr=er.store({$name:"feed",$state:function(){return{loading:new an,loadingCreations:new an,creations:{},feeds:{},feedGroups:[],homeFeedIds:[],mushroomKeys:[]}},SYNC:function(e){var t=e.updatedFeeds,n=e.deletedFeedIds;this.$patch((function(e){me()(n,[]).forEach((function(t){r["default"].delete(e.feeds,t)})),me()(t,[]).forEach((function(t){fr(e,t)})),ur(e)}))},ADD_OR_UPDATE_CREATION:function(e){this.$patch((function(t){mr(t,e)}))},ADD_OR_UPDATE_CREATION_LIST:function(e){this.$patch((function(t){e.forEach((function(e){mr(t,e)}))}))},ADD_OR_UPDATE:function(e){this.$patch((function(t){fr(t,e),ur(t)}))},ADD_OR_UPDATE_LIST:function(e){this.$patch((function(t){e.forEach((function(e){fr(t,e)})),ur(t)}))},UPDATE_ALL_GROUP:function(e){var t=e.feedIds,n=e.group;this.$patch((function(e){Ce()(lr(e,t),(function(e){r["default"].set(e,"group",n)})),ur(e)}))},REMOVE:function(e){var t=e.id;this.$patch((function(e){r["default"].delete(e.feeds,t),ur(e)}))},REMOVE_ALL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feedIds,n=void 0===t?null:t;this.$patch((function(e){V()(n)?e.feeds={}:n.forEach((function(t){r["default"].delete(e.feeds,t)})),ur(e)}))},SET_STORY_OFFSET:function(e){var t=e.id,n=e.offset;this.$patch((function(e){var r=e.feeds[t];r.story_offset=n,r.num_unread_storys=r.total_storys-n}))},SET_TOTAL_STORYS_IF_UPDATED:function(e){var t=e.id,n=e.total;this.$patch((function(e){var r=e.feeds[t];n>r.total_storys&&(r.total_storys=n,r.num_unread_storys=r.total_storys-r.story_offset)}))},SET_ALL_READED:function(e){var t=e.feedIds;this.$patch((function(e){t.forEach((function(t){var n=e.feeds[t];n.story_offset=n.total_storys,n.num_unread_storys=0}))}))},get isLoading(){return this.loading.isLoading},get isEmpty(){var e=Nt()(this.feeds),t=Nt()(this.creations);return e<=0&&t<=0},get numFeeds(){return Nt()(this.feeds)},get feedIds(){return jt()(this.feeds)},get creationList(){return Qt()(Yt()(qt()(this.creations),["dt_created","status"]))},getCreation:function(e){return this.creations[e]},get homeFeedList(){return lr(this,this.homeFeedIds)},feedListOfGroup:function(e){var t=V()(e)?[]:e.feedIds;return lr(this,t)},numUnreadOfGroup:function(e){return V()(e)?null:cr(this,e)},latestDateOfGroup:function(e){return V()(e)?null:dr(this,e)},groupOf:function(e){return V()(e)?null:rr(e)},get avaliableGroups(){var e=[qn,zn],t=this.feedGroups.map((function(e){return e.name}));return t=Yt()(t),Kt()(e,t)},get avaliableGroupNames(){return this.avaliableGroups.map(Yn)},getGroupByName:function(e){var t,n=Object(et["a"])(this.feedGroups);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.name===e)return r}}catch(i){n.e(i)}finally{n.f()}return null},get:function(e){return this.feeds[e]},sync:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loading.begin(Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Gn.get(),V()(n)||e.ADD_OR_UPDATE_LIST(n),r=[],Ce()(qt()(e.feeds),(function(e){$t()(e.dt_updated)||r.push({id:e.id,dt_updated:e.dt_updated})})),t.next=6,Mn.feed.query({hints:r}).then((function(t){e.SYNC({updatedFeeds:t.feeds,deletedFeedIds:t.deleted_ids}),Gn.set(qt()(e.feeds))}));case 6:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},loadCreationList:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadingCreations.begin(Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.feed.queryCreationList().then((function(t){e.ADD_OR_UPDATE_CREATION_LIST(t.feed_creations)}));case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},load:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.detail,n.next=3,Mn.feed.get({id:r,detail:i});case 3:s=n.sent,t.ADD_OR_UPDATE(s);case 5:case"end":return n.stop()}}),n)})))()},loadCreation:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.creationId,i=e.detail,n.next=3,Mn.feed.getCreation({id:r,detail:i});case 3:s=n.sent,t.ADD_OR_UPDATE_CREATION(s);case 5:case"end":return n.stop()}}),n)})))()},setTitle:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.title,n.next=3,Mn.feed.setTitle({id:r,title:i});case 3:s=n.sent,t.ADD_OR_UPDATE(s);case 5:case"end":return n.stop()}}),n)})))()},setPublish:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.is_publish,n.next=3,Mn.feed.setPublish({id:r,is_publish:i});case 3:s=n.sent,t.ADD_OR_UPDATE(s);case 5:case"end":return n.stop()}}),n)})))()},setAllGroup:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.feedIds,i=e.group,!$t()(r)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Mn.feed.setAllGroup({ids:r,group:i});case 5:t.UPDATE_ALL_GROUP({feedIds:r,group:i});case 6:case"end":return n.stop()}}),n)})))()},delete:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.storyStore,n.next=3,Mn.feed.delete({id:r});case 3:i.DELETE_STORYS_OF_FEED(r),t.REMOVE({id:r});case 5:case"end":return n.stop()}}),n)})))()},deleteAll:function(){var e=arguments,t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{},i=r.feedIds,s=void 0===i?null:i,o=r.storyStore,!(V()(s)||s.length>0)){n.next=7;break}return n.next=4,Mn.feed.deleteAll({ids:s});case 4:t.REMOVE_ALL({feedIds:s}),o.DELETE_STORYS_OF_ALL_FEED({feedIds:s}),Gn.clear();case 7:case"end":return n.stop()}}),n)})))()},_watchFeedCreation:function(e){var t=this,n=e.creationId,r=e.numTry,i=void 0===r?10:r,s=setInterval((function(){Mn.feed.getCreation({id:n}).then((function(e){t.ADD_OR_UPDATE_CREATION(e),"ready"===e.status?(setTimeout((function(){clearInterval(s)}),3500),vr.load({feedId:e.feed_id,detail:!0})):("error"===e.status||i<=0)&&clearInterval(s)})).finally((function(){i-=1}))}),3e3)},_handleImportedFeedResult:function(e){return this.ADD_OR_UPDATE_LIST(e.created_feeds),this.ADD_OR_UPDATE_CREATION_LIST(e.feed_creations),1===e.feed_creations.length&&this._watchFeedCreation({creationId:e.feed_creations[0].id}),{numFeedCreations:e.feed_creations.length,numCreatedFeeds:e.created_feeds.length,numExistedFeeds:e.num_existed_feeds,firstExistedFeed:e.first_existed_feed}},import:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.text,i=e.group,i=i===qn?null:i,n.next=4,Mn.feed.import({text:r,group:i});case 4:return s=n.sent,n.abrupt("return",t._handleImportedFeedResult(s));case 6:case"end":return n.stop()}}),n)})))()},importFile:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.file,i=e.group,i=i===qn?null:i,n.next=4,Mn.feed.importFile({file:r,group:i});case 4:return s=n.sent,n.abrupt("return",t._handleImportedFeedResult(s));case 6:case"end":return n.stop()}}),n)})))()},exportOPML:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.download;Mn.feed.exportOPML({download:t})},setStoryOffset:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.feedId,i=e.offset,t.get(r).story_offset===i){n.next=5;break}return n.next=4,Mn.feed.setStoryOffset({id:r,offset:i});case 4:t.SET_STORY_OFFSET({id:r,offset:i});case 5:case"end":return n.stop()}}),n)})))()},setAllReaded:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.feedIds,r=r.filter((function(e){return t.get(e).num_unread_storys>0})),!(r.length>0)){n.next=6;break}return n.next=5,Mn.feed.setAllReaded({ids:r});case 5:t.SET_ALL_READED({feedIds:r});case 6:case"end":return n.stop()}}),n)})))()}}),gr={props:{feedId:String,offset:Number,feedTitle:String,storyTitle:String,storyDate:String,isReaded:Boolean,routeTo:Function,storyLink:String,isCtrlKeyHold:{type:Boolean,default:!1}},data:function(){return{}},computed:{dateText:function(){return wt(this.storyDate)}},methods:{myRouteTo:function(e){V()(this.routeTo)?this.$router.push(e):this.routeTo(e)},goFeed:function(){this.myRouteTo("/feed?id=".concat(this.feedId))},goStory:function(){if(this.isCtrlKeyHold&&!$t()(this.storyLink))V()(this.isReaded)||this.isReaded||vr.setStoryOffset({feedId:this.feedId,offset:this.offset+1}),window.open(this.storyLink,"_blank");else{var e="/story?feed=".concat(this.feedId,"&offset=").concat(this.offset);this.myRouteTo(e)}}}},yr=gr,br=(n("1272"),Object(Je["a"])(yr,Mt,At,!1,null,"d0491ade",null)),_r=br.exports,wr=(n("c7400"),n("93c6")),kr=n.n(wr),xr=n("9380"),Cr=n.n(xr),Sr=n("80f6"),Or=n.n(Sr);function Ir(e){return Yt()(e,[function(e){return Ar(e)},function(e){return new Date(e.dt_published)},function(e){return e.feed.id},"offset"])}var Lr=10;function Er(e,t){var n=[];if($t()(e))return n;for(var r=Or()(e,(function(e){return e.offset})).offset,i=0;i<Lr-e.length;i++){var s=r-i-1;if(s<0)break;var o=t[s];V()(o)||n.push(o)}return n}function Rr(e,t){var n,r=0,i={},s=Er(e,t),o=Object(et["a"])(Kt()(e,s));try{for(o.s();!(n=o.n()).done;){var a=n.value;$t()(a.image_url)||(V()(i[a.image_url])&&(i[a.image_url]=0),i[a.image_url]+=1,r+=1)}}catch(f){o.e(f)}finally{o.f()}var u,c=Math.max(.5*Lr,Math.min(Lr,.5*r)),d=Object(et["a"])(e);try{for(d.s();!(u=d.n()).done;){var l=u.value;$t()(l.image_url)||i[l.image_url]>=c&&(l.is_image_duplicated=!0)}}catch(f){d.e(f)}finally{d.f()}return e}function Tr(e,t){t.forEach((function(t){var n=e.storys[t.feed.id];V()(n)&&(r["default"].set(e.storys,t.feed.id,{}),n=e.storys[t.feed.id]),Fr(n,t)}))}function Fr(e,t){var n={},i=e[t.offset];V()(i)||Object.assign(n,i),Ce()(ke()(t),(function(e){var t=Object(H["a"])(e,2),r=t[0],i=t[1];V()(i)||""===i||(n[r]=i)})),r["default"].set(e,t.offset,n)}function Mr(e,t){var n=-1;t.forEach((function(e){e.offset>n&&(n=e.offset)})),n>=0&&vr.SET_TOTAL_STORYS_IF_UPDATED({id:e,total:n+1})}function Ar(e){var t=vr.get(e.feed.id);return!V()(t)&&e.offset<t.story_offset}function Pr(e){var t=vr.get(e.feedId);return vr.groupOf(t)}var $r,Dr,jr=er.store({$name:"story",$state:function(){return{nextStoryGetter:null,storys:{},mushroomKeys:[],loadedOffsetBegin:{},loadedOffsetEnd:{},mushroomsLoading:new an,favoritedLoading:new an}},SET_FAVORITED:function(e){var t=e.feed_id,n=e.offset,r=e.is_favorited;this.$patch((function(e){e.storys[t][n].is_favorited=r}))},SET_WATCHED:function(e){var t=e.feed_id,n=e.offset,r=e.is_watched;this.$patch((function(e){e.storys[t][n].is_watched=r}))},SET_NEXT_STORY_GETTER:function(e){this.$patch((function(t){t.nextStoryGetter=e}))},ADD_OR_UPDATE:function(e){this.$patch((function(t){var n=t.storys[e.feed.id];V()(n)&&(r["default"].set(t.storys,e.feed.id,{}),n=t.storys[e.feed.id]),Fr(n,e)}))},ADD_OR_UPDATE_LIST:function(e){var t=e.feedId,n=e.storys;this.$patch((function(e){if($t()(t))Tr(e,n);else{var i=e.storys[t];V()(i)&&(r["default"].set(e.storys,t,{}),i=e.storys[t]),n.forEach((function(e){Fr(i,e)}))}}))},UPDATE_LOADED_OFFSET:function(e){var t=e.feedId,n=e.begin,i=e.end;this.$patch((function(e){var s=e.loadedOffsetBegin[t];(V()(s)||n<s)&&r["default"].set(e.loadedOffsetBegin,t,n);var o=e.loadedOffsetEnd[t];(V()(o)||i>o)&&r["default"].set(e.loadedOffsetEnd,t,i)}))},RESET_LOADED_OFFSET:function(e){this.$patch((function(t){r["default"].delete(t.loadedOffsetBegin,e),r["default"].delete(t.loadedOffsetEnd,e)}))},ADD_OR_UPDATE_MUSHROOMS:function(e){this.$patch((function(t){Tr(t,e),t.mushroomKeys=e.map((function(e){return{feedId:e.feed.id,offset:e.offset}}))}))},DELETE_STORYS_OF_FEED:function(e){this.$patch((function(t){r["default"].delete(t.storys,e),r["default"].delete(t.loadedOffsetBegin,e),r["default"].delete(t.loadedOffsetEnd,e),t.mushroomKeys=t.mushroomKeys.filter((function(t){return t.feedId!==e}))}))},DELETE_STORYS_OF_ALL_FEED:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feedIds,n=void 0===t?null:t;this.$patch((function(e){if(V()(n))return e.storys={},e.mushroomKeys=[],e.loadedOffsetBegin={},void(e.loadedOffsetEnd={});var t={};n.forEach((function(e){t[e]=1})),n.forEach((function(t){r["default"].delete(e.storys,t),r["default"].delete(e.loadedOffsetBegin,t),r["default"].delete(e.loadedOffsetEnd,t)})),e.mushroomKeys=e.mushroomKeys.filter((function(e){return V()(t[e.feedId])}))}))},get:function(e){var t=e.feedId,n=e.offset;return me()(this.storys[t],{})[n]},getStoryListByKeys:function(e){var t=this;return e.map((function(e){return t.get(e)})).filter((function(e){return!V()(e)}))},getListByFeed:function(e){var t=this.storys[e];return V()(t)?[]:Yt()(qt()(t),["offset"])},mushroomsOfGroup:function(e){var t=Cr()(this.mushroomKeys,(function(t){return e===Pr(t)}));return this.getStoryListByKeys(t)},get mushroomsOfHome(){var e=Cr()(this.mushroomKeys,(function(e){return Jn(Pr(e))}));return this.getStoryListByKeys(e)},numUnreadOf:function(e){return e.filter((function(e){return!Ar(e)})).length},latestDateOf:function(e){var t,n=null,r=Object(et["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=new Date(i.dt_published);(V()(n)||Object(Zt["a"])(s,n))&&(n=s)}}catch(o){r.e(o)}finally{r.f()}return n},nextMushroomOf:function(e){var t=e.mushrooms,n=e.feedId,r=e.offset,i=t.findIndex((function(e){return e.feed.id===n&&e.offset===r}));return i>=0&&i+1<t.length?t[i+1]:null},nextStoryInfo:function(e){var t=e.feedId,n=e.offset,r=this.nextStoryGetter;return V()(r)?{}:r({feedId:t,offset:n})},get favorited(){var e=[];return Ce()(qt()(this.storys),(function(t){Ce()(qt()(t),(function(t){t.is_favorited&&e.push(t)}))})),kr()(e,["dt_created","id"],["desc","desc"])},isReaded:function(e){return Ar(e)},loadedOffset:function(e){var t=this.loadedOffsetBegin[e];while(!V()(t)){if(V()(this.storys[t-1]))break;t-=1}var n=this.loadedOffsetEnd[e];while(!V()(n)){if(V()(this.storys[n+1]))break;n+=1}return{begin:t,end:n}},setNextStoryGetter:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.SET_NEXT_STORY_GETTER(e);case 1:case"end":return n.stop()}}),n)})))()},setFavorited:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,s=e.is_favorited,n.next=3,Mn.story.setFavorited({feed_id:r,offset:i,is_favorited:s});case 3:t.SET_FAVORITED({feed_id:r,offset:i,is_favorited:s});case 4:case"end":return n.stop()}}),n)})))()},setWatched:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,s=e.is_watched,n.next=3,Mn.story.setWatched({feed_id:r,offset:i,is_watched:s});case 3:t.SET_WATCHED({feed_id:r,offset:i,is_watched:s});case 4:case"end":return n.stop()}}),n)})))()},load:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,s=e.detail,o=e.setReaded,n.next=3,Mn.story.get({feed_id:r,offset:i,detail:s,set_readed:o});case 3:a=n.sent,t.ADD_OR_UPDATE(a),o&&vr.SET_STORY_OFFSET({id:r,offset:i+1});case 6:case"end":return n.stop()}}),n)})))()},loadList:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o,a,u,c,d,l,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,s=e.detail,o=e.size,a=e.resetLoadedOffset,u=e.isInit,u&&(c=vr.get(r).total_storys,i=Math.max(0,Math.min(i,c-Lr)),o=Math.max(o,Lr)),n.next=4,Mn.story.query({feed_id:r,offset:i,detail:s,size:o});case 4:d=n.sent,a&&t.RESET_LOADED_OFFSET(r),l=me()(t.storys[r],{}),f=Rr(d.storys,l),t.ADD_OR_UPDATE_LIST({feedId:r,storys:f}),t.UPDATE_LOADED_OFFSET({feedId:r,begin:i,end:i+o-1}),Mr(r,f);case 11:case"end":return n.stop()}}),n)})))()},loadMushrooms:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.mushroomKeys,i=e.detail,n.next=3,t.mushroomsLoading.begin(Object(le["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mn.story.queryBatch({storys:r,detail:i});case 2:n=e.sent,s=Ir(n.storys),t.ADD_OR_UPDATE_MUSHROOMS(s);case 5:case"end":return e.stop()}}),e)}))));case 3:case"end":return n.stop()}}),n)})))()},loadFavorited:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.favoritedLoading.begin(Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.story.listFavorited();case 2:n=t.sent,e.ADD_OR_UPDATE_LIST({storys:n.storys});case 4:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},fetchFulltext:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,n.next=3,Mn.story.fetchFulltext({feed_id:r,offset:i});case 3:return s=n.sent,V()(s.story)||t.ADD_OR_UPDATE(s.story),n.abrupt("return",s);case 6:case"end":return n.stop()}}),n)})))()}}),Gr=r["default"].component("MoFeedVirtualItem",{props:{group:{type:Object},story:{type:Object},feed:{type:Object},keyboard:{},routeTo:Function},methods:{isStoryReaded:function(e){return jr.isReaded(e)},getFeedTitle:function(e){var t=vr.get(e);return V()(t)?null:t.title}},render:function(e){var t=this.group,n=this.feed,r=this.story;return V()(t)?V()(r)?e(Ot,{props:{title:n.title,number:n.num_unread_storys,date:n.dt_latest_story_published||n.dt_created,link:"/feed?id=".concat(n.id),routeTo:this.routeTo}}):e(_r,{props:{feedId:r.feed.id,offset:r.offset,feedTitle:this.getFeedTitle(r.feed.id),isReaded:this.isStoryReaded(r),storyTitle:r.title,storyDate:r.dt_published,storyLink:r.link,isCtrlKeyHold:this.keyboard.isCtrlKeyHold}}):e(Ft,{props:{title:t.title,number:t.getNumber(),date:t.getDate(),link:t.link,routeTo:this.routeTo}})}}),Nr=Gr,Br=Object(Je["a"])(Nr,$r,Dr,!1,null,null,null),Hr=Br.exports,Ur=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"readedButtonRef",staticClass:"readed-button",class:{"long-press":e.isLongPressActive}},[n("div",{staticClass:"readed-action"},[n("fa-icon",{staticClass:"readed-icon",attrs:{icon:"check",size:16}})],1),n("MoHeaderTip",{attrs:{open:e.isTipActive,trigger:e.tipTrigger,content:"按住全标已读"},on:{"update:open":function(t){e.isTipActive=t}}})],1)},Vr=[],zr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mu-popover",{staticClass:"header-tip",class:{"tip-hidden":!e.open},attrs:{open:e.open,trigger:e.trigger,placement:"bottom"},on:{"update:open":e.updateOpen}},[n("span",{staticClass:"tip-triangle"}),n("div",{staticClass:"tip-info"},[e._v(e._s(e.content))])])},qr=[],Wr={props:{open:{type:Boolean,default:!1},content:{type:String,required:!0},trigger:{type:HTMLElement,required:!1}},methods:{updateOpen:function(e){this.$emit("update:open",e)}}},Kr=Wr,Jr=(n("0768"),Object(Je["a"])(Kr,zr,qr,!1,null,"344b4861",null)),Yr=Jr.exports,Xr=500,Qr=3e3,Zr={components:{MoHeaderTip:Yr},data:function(){return{tipTrigger:null,pressTimer:null,tipTimer:null,isTipActive:!1,isLongPressActive:!1}},mounted:function(){var e=this.$refs.readedButtonRef;this.tipTrigger=e,e.addEventListener("touchstart",this.handleTouchStart),e.addEventListener("mousedown",this.handleMouseStart)},beforeDestroy:function(){this.isTipActive=!1,this.isLongPressActive=!1;var e=this.$refs.readedButtonRef;e.removeEventListener("touchstart",this.handleTouchStart),e.removeEventListener("mousedown",this.handleMouseStart),this.removeDocumentListeners(),this.clearPressTimer(),this.clearTipTimer()},methods:{removeDocumentListeners:function(){document.removeEventListener("touchend",this.handlePressEnd),document.removeEventListener("touchcancel",this.handlePressEnd),document.removeEventListener("mouseup",this.handlePressEnd)},setupDocumentListeners:function(){this.removeDocumentListeners(),document.addEventListener("touchend",this.handlePressEnd),document.addEventListener("touchcancel",this.handlePressEnd),document.addEventListener("mouseup",this.handlePressEnd)},setupPressTimer:function(){var e=this;this.clearPressTimer(),this.pressTimer=setTimeout((function(){e.isTipActive=!1,e.isLongPressActive=!0,e.clearPressTimer(),e.clearTipTimer(),e.onLongPress()}),Xr)},clearPressTimer:function(){V()(this.pressTimer)||(clearTimeout(this.pressTimer),this.pressTimer=null)},setupTipTimer:function(){var e=this;this.clearTipTimer(),this.tipTimer=setTimeout((function(){e.isTipActive=!1,e.clearTipTimer()}),Qr)},clearTipTimer:function(){V()(this.tipTimer)||(clearTimeout(this.tipTimer),this.tipTimer=null)},handleTouchStart:function(e){this._handlePressStart(e)},handleMouseStart:function(e){(V()(e.button)||0===e.button)&&this._handlePressStart(e)},_handlePressStart:function(e){e.cancelable&&e.preventDefault(),this.setupDocumentListeners(),this.setupPressTimer()},handlePressEnd:function(e){e.cancelable&&e.preventDefault(),this.removeDocumentListeners(),V()(this.pressTimer)||(this.isTipActive=!0,this.setupTipTimer()),this.clearPressTimer(),this.isLongPressActive=!1},onLongPress:function(){this.$emit("click")}}},ei=Zr,ti=(n("3028"),Object(Je["a"])(ei,Ur,Vr,!1,null,"37a98421",null)),ni=ti.exports,ri="/",ii="2.7.8";function si(){if(null===window.MathJax||void 0===window.MathJax){window.MathJax={AuthorInit:function(){MathJax.Hub.Register.MessageHook("Math Processing Error",(function(e){var t=e[2];console.error(t)})),MathJax.Hub.Register.StartupHook("End",(function(){var e=window._MathJaxStoryRender;window._MathJaxStoryRender=null,null!==e&&void 0!==e&&e()}))},imageFont:null,messageStyle:"none",skipStartupTypeset:!0,elements:["do-not-auto-render-any-elements"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0},"fast-preview":{disabled:!0}};var e=document.createElement("script");e.type="text/javascript",e.src="".concat(ri,"libs/MathJax-").concat(ii,"/MathJax.js?config=TeX-MML-AM_HTMLorMML,Safe"),document.getElementsByTagName("head")[0].appendChild(e)}}var oi=si,ai=(n("7db0"),n("c975"),n("2b80")),ui=n.n(ai),ci=n("9483"),di="serviceWorker"in navigator;function li(){if(!di)return!1;var e=new ui.a(navigator.userAgent),t=e.getBrowser().name,n=/(Chrome|Chromium|Firefox|Edge|Safari)/i.test(t);return n}function fi(){di&&Object(ci["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}})}function hi(){di&&(navigator.serviceWorker.getRegistrations().then((function(e){var t,n=Object(et["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.unregister()}}catch(i){n.e(i)}finally{n.f()}})),V()(window.caches)||caches.keys().then((function(e){var t,n=Object(et["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;caches.delete(r)}}catch(i){n.e(i)}finally{n.f()}})))}function pi(){var e=me()(location.search,"").toLowerCase();return e.indexOf("pwa=1")>=0||!(e.indexOf("pwa=0")>=0)&&null}function mi(){var e=pi();V()(e)?e=be.PWA_ENABLE.get():be.PWA_ENABLE.set(e),e?fi():hi()}function vi(){return!V()(window.matchMedia)&&!!window.matchMedia("(display-mode: standalone)").matches}function gi(e){V()(window.plausible)?V()(window._paq)?V()(window.ga)||window.ga("send","event",{eventCategory:"metric",eventAction:e,eventLabel:""}):window._paq.push(["trackEvent","metric",e,1]):window.plausible(e)}function yi(e){try{gi(e)}catch(t){console.log("reportEvent failed: ".concat(t))}}var bi=Date.now(),_i=36e5,wi=er.store({$name:"user",$state:function(){return{inputAccount:null,loading:new an,loginUser:null,loginToken:null,loginDate:null,vipCustomer:null}},SET_INPUT_ACCOUNT:function(e){this.$patch({inputAccount:e})},LOGIN:function(e){this.$patch({loginUser:e})},CONFIGURE_PASSWORD:function(){V()(this.loginUser)||this.$patch((function(e){e.loginUser.has_usable_password=!0}))},SET_VIP_CUSTOMER:function(e){this.$patch({vipCustomer:e})},get isLoading(){return this.loading.isLoading},get isLogined(){return!V()(this.loginUser)},get isVipEnable(){return!V()(this.loginUser)&&me()(this.loginUser.ezrevenue_enable,!1)},get balance(){if(V()(this.vipCustomer))return null;var e="equity_vip",t=this.vipCustomer.balance_s;return t.find((function(t){return t.equity.alias===e}))},get isBalanceUsable(){return!(this.isVipEnable&&!V()(this.balance))||this.balance.is_balance_usable},get balanceText(){var e=this.balance;return V()(e)?"####-##-##":e.is_balance_infinite?"9999-12-31":_t(1e3*e.balance)},get vipHomeLink(){return V()(this.vipCustomer)?null:this.vipCustomer.home_link.url},get shouldNoticeVip(){if(!this.isBalanceUsable)return!0;if(V()(this.balance))return!1;var e=1e3*this.balance.balance;return e-bi<48*_i},get imageProxy(){return V()(this.loginUser)?null:this.loginUser.image_proxy},login:function(){var e=arguments,t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:{},i=r.account,s=r.password,V()(i)||t.loading.isFinished&&t.loading.reset(),n.next=4,t.loading.begin(Object(le["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mn.user.login({account:i,password:s});case 2:n=e.sent,t.LOGIN(n),be.HAS_LOGIN_HISTORY.set(!0),t.syncVipCustomer(),vi()&&yi("LOGIN_PWA");case 7:case"end":return e.stop()}}),e)}))));case 4:case"end":return n.stop()}}),n)})))()},syncVipCustomer:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isVipEnable){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Mn.user.vipCustomerInfo().then((function(t){e.SET_VIP_CUSTOMER(t)})).catch((function(e){console.log(e)}));case 4:case"end":return t.stop()}}),t)})))()},openVipHomeLink:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r,i,s,o,a,u,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.vipHomeLink,n){t.next=3;break}return t.abrupt("return");case 3:return r=window.outerHeight-window.innerHeight,i=window.innerHeight-r,s=window.screenTop+r+8,o=window.innerWidth-16,o>800&&(o=800),a=Math.round((window.innerWidth-o)/2),u=window.screenLeft+a,c="popup,width=".concat(o,",height=").concat(i,",left=").concat(u,",top=").concat(s),d=window.open(n,"",c),yi("VISIT_VIP_HOME"),t.next=15,new Promise((function(e){var t=setInterval((function(){d.closed&&(clearInterval(t),e(!0))}),1e3)}));case 15:return t.next=17,e.syncVipCustomer();case 17:case"end":return t.stop()}}),t)})))()},register:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.username,r=e.email,i=e.password,t.next=3,Mn.user.register({username:n,email:r,password:i});case 3:yi("REGISTER");case 4:case"end":return t.stop()}}),t)})))()},confirmEmail:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.key,t.next=3,Mn.user.confirmEmail({key:n});case 3:case"end":return t.stop()}}),t)})))()},changePassword:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.password,n.next=3,Mn.user.changePassword({password:r}).then((function(){t.CONFIGURE_PASSWORD()}));case 3:case"end":return n.stop()}}),n)})))()},resetPassword:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.email,t.next=3,Mn.user.resetPassword({email:n});case 3:case"end":return t.stop()}}),t)})))()},confirmResetPassword:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.token,r=e.uid,i=e.new_password,t.next=3,Mn.user.confirmResetPassword({token:n,uid:r,new_password:i});case 3:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Gn.clear(),e.next=3,Mn.user.logout();case 3:case"end":return e.stop()}}),e)})))()},safeLogout:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.logout();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.warn("logout failed ".concat(t.t0));case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},loginGithub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.next,n=e.scope;Mn.user.loginGithub({next:t,scope:n})},connectGithub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.next,n=e.scope;this.isLogined&&Mn.user.connectGithub({next:t,scope:n})}}),ki=er.store({$name:"root",syncFeedLoadMushrooms:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vr.sync();case 2:return t=vr.mushroomKeys,e.next=5,jr.loadMushrooms({mushroomKeys:t});case 5:case"end":return e.stop()}}),e)})))()},deleteFeed:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.feedId,t.next=3,vr.delete({feedId:n,storyStore:jr});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},deleteAllFeed:function(){var e=arguments;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},r=n.feedIds,i=void 0===r?null:r,t.next=3,vr.deleteAll({feedIds:i,storyStore:jr});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}}),xi=48,Ci=Math.ceil(window.innerHeight/xi),Si={components:{MoHeader:ot,MoDebugTool:ft,MoFeedVirtualItem:Hr,MoReadedButton:ni,MoHeaderTip:Yr},props:{vid:{type:String,default:"/"}},data:function(){return{isActive:!0,rippleColor:De,openWizard:!1,wizardTrigger:null,isMenuOpen:!1,isReady:!1,activeItemKey:null,virtualUpperHeight:0,virtualUpperList:[],virtualLowerHeight:0,virtualLowerList:[],isHelpReaded:be.HELP_READED.get()}},computed:{groups:function(){if(this.isEmpty)return[];var e=[];Ce()(vr.feedGroups,(function(t){var n=encodeURIComponent(t.name);e.push({title:t.name,link:"/group?name=".concat(n),getNumber:function(){return vr.numUnreadOfGroup(t)},getDate:function(){return vr.latestDateOfGroup(t)}})}));var t=jr.mushroomsOfHome,n={title:"品读",link:"/mushroom",getNumber:function(){return jr.numUnreadOf(t)},getDate:function(){return jr.latestDateOf(t)}};if(n.getNumber()<=0)e.splice(0,0,n);else{var r,i=0,s=Object(et["a"])(e);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.getNumber()<=0&&(i+=1)}}catch(a){s.e(a)}finally{s.f()}e.splice(i,0,n)}return e},feedList:function(){return vr.homeFeedList},isEmpty:function(){return vr.numFeeds<=0},showHeader:function(){return this.isReady||!this.$LAYOUT.hasBoard},showMenuAccountDot:function(){return this.isReady&&!this.isEmpty&&wi.shouldNoticeVip},showMenuHelpDot:function(){return this.isReady&&!this.isEmpty&&!this.isHelpReaded},replaceRouter:function(){return this.$LAYOUT.hasBoard&&"/"!==this.$route.path}},mounted:function(){var e=this;this.wizardTrigger=this.$refs.wizardTrigger.$el,ki.syncFeedLoadMushrooms().then((function(){e.openWizard=e.isEmpty,e.isReady=!0,e.renderVirtualList(),e.$watch("feedList",(function(){e.updateVirtualList()})),oi()}))},activated:function(){this.openWizard=this.isReady&&this.isEmpty,this.isActive=!0,this.$pageState.restoreScrollTop({el:this.$refs.mainRef})},deactivated:function(){this.openWizard=!1,this.isMenuOpen=!1,this.isActive=!1},savePageState:function(){this.$pageState.saveScrollTop({el:this.$refs.mainRef})&&this.$pageState.commit()},methods:{numTextOf:function(e){return e>0?e:""},routeTo:function(e){this.$route.fullPath!==e&&(this.replaceRouter?this.$router.replace(e):this.$router.push(e))},setActiveItem:function(e){this.activeItemKey=e},toggleMenu:function(){this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen?window.addEventListener("click",this.handleClickOutsideMenu):window.removeEventListener("click",this.handleClickOutsideMenu)},handleClickOutsideMenu:function(e){var t=this.$refs.actionMenuRef,n=this.$refs.actionMenuListRef;(V()(t)||V()(n)||!t.$el.contains(e.target)&&!n.$el.contains(e.target))&&(this.isMenuOpen=!1,window.removeEventListener("click",this.handleClickOutsideMenu))},goAccount:function(){this.routeTo("/account"),this.isMenuOpen=!1},goFeedClean:function(){this.routeTo("/feed-clean"),this.isMenuOpen=!1},goFeedFavorited:function(){this.routeTo("/favorited"),this.isMenuOpen=!1},goPublishConfig:function(){this.routeTo("/publish-config"),this.isMenuOpen=!1},goHelp:function(){this.routeTo("/help"),this.isMenuOpen=!1,this.isHelpReaded||(be.HELP_READED.set(!0),this.isHelpReaded=!0)},setAllReaded:function(){var e=vr.feedIds;vr.setAllReaded({feedIds:e})},isReaded:function(e){return jr.isReaded(e)},isActiveItem:function(e){return!(V()(this.activeItemKey)||!this.$LAYOUT.hasBoard)&&this.activeItemKey===e},_upperSize:function(){for(var e=0,t=0;t<this.groups.length;t++){if(this.groups[t].getNumber()>0)break;e+=1}return e},_virtualLayout:function(e){var t=this._upperSize(),n=e.length-t,r=Math.max(0,t*xi),i=n*xi;return{upperSize:t,lowerSize:n,virtualUpperHeight:r,virtualLowerHeight:i}},_virtualListBuffer:function(){var e=[];return Ce()(this.groups,(function(t){var n={id:"GROUP:".concat(t.title),group:t,visible:!1};e.push(n)})),Ce()(this.feedList,(function(t){var n={id:t.id,feed:t,visible:!1};e.push(n)})),e},updateVirtualList:function(){for(var e=this._virtualListBuffer(),t=this._virtualLayout(e),n=t.upperSize,r=t.virtualUpperHeight,i=t.virtualLowerHeight,s=[],o=[],a=0;a<n;a++)s.push(e[a]);for(var u=n;u<e.length;u++)o.push(e[u]);this.virtualUpperHeight=r,this.virtualLowerHeight=i,this.virtualUpperList=s,this.virtualLowerList=o},renderVirtualList:function(){var e=this,t=this._virtualListBuffer(),n=this._virtualLayout(t),r=n.upperSize,i=n.virtualUpperHeight,s=n.virtualLowerHeight;this.virtualUpperList=[],this.virtualLowerList=[],this.virtualUpperHeight=i,this.virtualLowerHeight=s;var o=this.$pageState.get("scrollTop");(V()(o)||o<=0)&&(o=this.virtualUpperHeight);var a=r-1,u=r,c=function(){for(var n=0;n<Ci;n++){if(u>=t.length)break;var r=t[u];e.virtualLowerList.push(r),u+=1}},d=15,l=function n(){for(var i=!1,s=0;s<d;s++){var o=u<t.length,c=r>0&&a>=0;if(!o&&!c){i=!0;break}if(o){var l=t[u];e.virtualLowerList.push(l),u+=1}if(c){var f=t[a];e.virtualUpperList.push(f),a-=1}}i||requestAnimationFrame(n)};setTimeout((function(){var t=e.$refs.mainRef;V()(t)||setTimeout((function(){t.scrollTo(0,o)}),0),c(),setTimeout((function(){requestAnimationFrame(l)}),0)}),0)}}},Oi=Si,Ii=(n("5dfd"),n("9630"),Object(Je["a"])(Oi,Qe,Ze,!1,null,"4af4142d",null)),Li=Ii.exports,Ei=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ri=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brand-placeholder"},[n("div",{staticClass:"placeholder-title"},[e._v("蚁阅")])])}],Ti=(n("11ba"),{}),Fi=Object(Je["a"])(Ti,Ei,Ri,!1,null,"7278a753",null),Mi=Fi.exports,Ai={name:"MoHomePage",components:{MoLayout:Xe,MoHome:Li,MoHeader:ot,MoBrandPlaceholder:Mi},data:function(){return{isReady:!1,keepAlivePages:vd}},mounted:function(){var e=this;ki.syncFeedLoadMushrooms().then((function(){e.isReady=!0}))},computed:{hasBoard:function(){return this.$LAYOUT.hasBoard},showPlaceholder:function(){return this.isReady&&this.hasBoard&&"/"===this.$route.path},layoutStyle:function(){var e=(this.$LAYOUT.windowInnerWidth-this.$LAYOUT.appWidth)/2;return{position:"fixed",left:"".concat(e,"px"),right:"".concat(e,"px"),top:0,bottom:0}},mainStyle:function(){return{width:"".concat(this.$LAYOUT.mainWidth,"px"),position:"absolute",left:0,top:0,bottom:0,overflow:"auto"}},boardStyle:function(){var e=this.$LAYOUT.boardWidth-8;return{width:"".concat(e,"px"),position:"absolute",right:0,top:0,bottom:0,overflow:"auto"}}}},Pi=Ai,$i=(n("be97"),Object(Je["a"])(Pi,Ue,Ve,!1,null,"0653dc18",null)),Di=$i.exports,ji=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{grey:"",header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" 收藏 "),n("span",{staticClass:"num-total"},[e._v(e._s(e.favorited.length))])]},proxy:!0}])}),n("div",{ref:"mainRef",staticClass:"feed-story-list"},e._l(e.favorited,(function(t){return n("MoFeedStoryItem",{key:t.feed.id+":"+t.offset,attrs:{feedId:t.feed.id,offset:t.offset,feedTitle:e.getFeedTitle(t.feed.id),storyTitle:t.title,storyDate:t.dt_published,isReaded:null}})})),1)],1)},Gi=[],Ni=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoHeader",{class:{"is-home":e.isHome},attrs:{border:e.border}},[n("div",{staticClass:"left",class:{"center-title":e.centerTitle}},[e.isHome?e._e():n("div",{staticClass:"back",on:{click:e.goBack}},[n("mu-button",{staticClass:"back-button",attrs:{icon:""}},[e._t("icon",[n("fa-icon",{attrs:{size:"18",icon:"chevron-left"}})])],2)],1),n("div",{staticClass:"title"},[e._t("title")],2)]),n("div",{staticClass:"right"},[e._t("default")],2)])},Bi=[],Hi={components:{MoHeader:ot},props:{border:{type:Boolean,default:!1},centerTitle:{type:Boolean,default:!1},isHome:{type:Boolean,default:!1}},methods:{goBack:function(){this.$router.safeBack()}}},Ui=Hi,Vi=(n("7b36"),Object(Je["a"])(Ui,Ni,Bi,!1,null,"1d695443",null)),zi=Vi.exports,qi={components:{MoBackHeader:zi,MoLayout:Xe,MoFeedStoryItem:_r},props:{vid:{type:String,default:"/favorited"}},mounted:function(){var e=this;jr.loadFavorited().then(ki.syncFeedLoadMushrooms()).then((function(){e.$pageState.restoreScrollTop({el:e.$refs.mainRef})})),jr.setNextStoryGetter(null)},computed:{favorited:function(){return jr.favorited}},methods:{getFeedTitle:function(e){var t=vr.get(e);return V()(t)?e:t.title}},savePageState:function(){this.$pageState.saveScrollTop({el:this.$refs.mainRef}),this.$pageState.commit()}},Wi=qi,Ki=(n("dcdc"),Object(Je["a"])(Wi,ji,Gi,!1,null,"67363bee",null)),Ji=Ki.exports,Yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0}])}),e.creation?n("div",{staticClass:"creation-info"},[n("MoFeedDetailInfoItem",{attrs:{name:"URL",value:e.creation.url}}),n("MoFeedDetailInfoItem",{attrs:{name:"状态",value:e.creation.status}}),n("MoFeedDetailInfoItem",{attrs:{name:"分组",value:e.groupName}}),e.feedLink?n("MoFeedDetailInfoItem",{attrs:{name:"订阅",type:"router-link",link:e.feedLink,value:e.feedTitle}}):e._e(),n("MoFeedDetailInfoItem",{attrs:{name:"创建时间",value:e.dateText}}),n("div",{staticClass:"message-title"},[n("div",{staticClass:"message-title-line"}),n("span",{staticClass:"message-title-text"},[e._v("日志信息")]),n("div",{staticClass:"message-title-line"})]),n("pre",{staticClass:"message"},[e._v(e._s(e.message))])],1):e._e()],1)},Xi=[],Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-detail-info-item",class:{editable:e.editable}},[n("div",{staticClass:"item-main"},[n("span",{staticClass:"item-name"},[e._v(e._s(e.name))]),n("div",{staticClass:"item-info"},[e.isEdit?[n("input",{directives:[{name:"model",rawName:"v-model",value:e.editValue,expression:"editValue"}],staticClass:"item-input",domProps:{value:e.editValue},on:{input:function(t){t.target.composing||(e.editValue=t.target.value)}}}),n("span",{staticClass:"item-button item-button-save",on:{click:function(t){return e.onSave()}}},[n("fa-icon",{staticClass:"item-button-icon",attrs:{color:e.antBlue,icon:"save"}})],1)]:["link"===e.type?n("a",{staticClass:"item-link",attrs:{href:e.link||e.value,target:"_blank"}},[e._v(e._s(e.value))]):"router-link"===e.type?n("router-link",{staticClass:"item-link",attrs:{to:e.link||e.value}},[e._v(e._s(e.value))]):n("span",{staticClass:"item-value"},[e._v(e._s(e.value))]),e.editable?n("span",{staticClass:"item-button item-button-edit",on:{click:function(t){return e.onEdit()}}},[n("fa-icon",{staticClass:"item-button-icon",attrs:{icon:"edit"}})],1):e._e()]],2)]),e.isEdit?e._t("default"):e._e()],2)},Zi=[],es={props:{name:String,type:String,value:[Number,String],link:String,editable:Boolean},data:function(){return{antBlue:Le,isEdit:!1,isSaveLoading:!1,editValue:null}},methods:{setEditValue:function(e){this.editValue=e},onEdit:function(){this.editValue=this.value,this.isEdit=!0,this.isSaveLoading=!1},onSave:function(){var e=this;if(!this.isSaveLoading){this.isSaveLoading=!0;var t=function(){e.isEdit=!1,e.isSaveLoading=!1};this.editValue!==this.value?this.$emit("save",{value:this.editValue,done:t}):t()}}}},ts=es,ns=(n("6ac1"),Object(Je["a"])(ts,Qi,Zi,!1,null,"10a5f5ed",null)),rs=ns.exports,is={components:{MoBackHeader:zi,MoLayout:Xe,MoFeedDetailInfoItem:rs},data:function(){return{}},computed:{creationId:function(){return this.$route.query.id},creation:function(){return vr.getCreation(this.creationId)},title:function(){return V()(this.creation)?"#".concat(this.creationId):this.creation.url},groupName:function(){return V()(this.creation)||$t()(this.creation.group)?"无":Yn(this.creation.group)},dateText:function(){return kt(this.creation&&this.creation.dt_created)},feedId:function(){return V()(this.creation)||$t()(this.creation.feed_id)?null:this.creation.feed_id},feedLink:function(){return V()(this.feedId)?null:"/feed?id=".concat(this.feedId)},feedTitle:function(){if(V()(this.feedId))return null;var e=vr.get(this.feedId);return V()(e)||$t()(e.title)?this.feedLink:e.title},message:function(){if(V()(this.creation))return"";var e=me()(this.creation.message,"");return e}},mounted:function(){vr.loadCreation({creationId:this.creationId,detail:!0}),ki.syncFeedLoadMushrooms(),window.scrollTo(0,0)},methods:{}},ss=is,os=(n("895b"),Object(Je["a"])(ss,Yi,Xi,!1,null,"52de1450",null)),as=os.exports,us=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{grey:"",header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.numUnreadText)+e._s(e.feedTitle))]},proxy:!0}])},[n("MoReadedButton",{staticClass:"action-readed",on:{click:e.setAllReaded}}),n("mu-button",{staticClass:"action-detail",attrs:{icon:""},on:{click:e.goFeedDetail}},[n("fa-icon",{attrs:{size:"18",icon:"info-circle"}})],1)],1),e.feed?n("MoScrollList",{staticClass:"story-list",attrs:{vid:"/feed?id="+e.feedId,itemSize:48,items:e.storyList,"init-offset":e.feed.story_offset,"begin-offset":e.beginOffset,"end-offset":e.endOffset,total:e.feed.total_storys,load:e.loadStorys,jump:e.onJump,enableUnreadPad:!0}},e._l(e.storyList,(function(t){return n("MoStoryItem",{key:t.offset,attrs:{isOpened:e.storyOpened[t.offset],isReaded:e.isReaded(t),isReading:e.isReading(t),isFavorited:t.is_favorited,feedId:e.feedId,offset:t.offset,story:t,isCtrlKeyHold:e.keyboard.isCtrlKeyHold},on:{"update:isOpened":function(n){return e.$set(e.storyOpened,t.offset,n)},"update:is-opened":function(n){return e.$set(e.storyOpened,t.offset,n)},read:function(n){return e.onRead(t)},toggleFavorited:function(n){return e.toggleFavorited(t)}}})})),1):e._e()],1)},cs=[],ds=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"story-item",class:{"story-item-ctrl":e.isCtrlKeyHold}},[e.isOpened?e._e():n("div",{staticClass:"story-header",class:{"story-header-readed":e.isReaded},on:{click:e.onOpen}},[n("div",{staticClass:"story-title"},[e._v(e._s(e.title))]),n("div",{staticClass:"story-date"},[e._v(e._s(e.dateText))])]),e.isOpened?n("div",{staticClass:"story-preview",class:{"story-preview-readed":e.isReaded&&!e.isReading}},[n("div",{staticClass:"story-preview-header",on:{click:e.onOpen}},[n("div",{staticClass:"story-preview-title"},[e._v(e._s(e.title))]),n("mu-button",{staticClass:"story-favorited",attrs:{icon:""},on:{click:function(t){return t.stopPropagation(),e.toggleFavorited(t)}}},[e.isFavorited?n("fa-icon",{attrs:{size:"18",icon:"star",color:e.starColor}}):n("fa-icon",{attrs:{size:"18",icon:"far/star",color:e.starColor}})],1)],1),n("div",{staticClass:"story-preview-summary",class:{"story-preview-summary-show-image":e.isShowImage,"story-preview-summary-ignore-image":e.isIgnoreImage},on:{click:e.handleSummaryClick}},[e.isShowImage?n("div",{staticClass:"story-preview-image",class:{"story-preview-image-loading":!e.isImageReady}},[n("img",{attrs:{referrerpolicy:"no-referrer",src:e.imageUrl},on:{load:e.onPreviewImageLoad,error:e.onPreviewImageError}})]):e._e(),e._v(" "+e._s(e.story.summary)+" ")]),n("div",{staticClass:"story-preview-link",on:{click:e.goLink}},[n("MoIconAngleRight3",{staticClass:"story-preview-link-fade"}),n("MoIconAngleRight3",{staticClass:"story-preview-link-main"}),n("MoIconAngleRight3",{staticClass:"story-preview-link-fade"})],1)]):e._e()])},ls=[],fs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon-angle-right-3"},[n("fa-icon",e._b({attrs:{icon:"angle-right"}},"fa-icon",e.$attrs,!1)),n("fa-icon",e._b({attrs:{icon:"angle-right"}},"fa-icon",e.$attrs,!1)),n("fa-icon",e._b({attrs:{icon:"angle-right"}},"fa-icon",e.$attrs,!1))],1)},hs=[],ps={},ms=ps,vs=(n("40da"),Object(Je["a"])(ms,fs,hs,!1,null,"817c5880",null)),gs=vs.exports,ys=(n("8a79"),"rssant=1");function bs(e){return!$t()(e)&&e.indexOf(ys)>=0}function _s(e){return!$t()(e)&&e.startsWith("data:")}function ws(e,t){if($t()(e))return!1;V()(t)&&(t=location.origin);try{return new URL(e).origin===t}catch(n){return!1}}var ks=function(){return/(img|image|pic|picture|photo|png|jpg|jpeg|webp|bpg|ico|exif|tiff|gif|svg|bmp)/gi};function xs(e){return!$t()(e)&&!_s(e)&&ks().test(e)}function Cs(e){if(!$t()(e)&&e.startsWith("[[")&&e.endsWith("]]"))try{var t=JSON.parse(e);return t[0][1]}catch(n){}return null}function Ss(e){var t=e.getAttribute("src");$t()(t)&&(t=e.getAttribute("srcset"));for(var n=["data-src","data-original","data-origin","data-options"],r=0,i=n;r<i.length;r++){var s=i[r],o=e.getAttribute(s);if("data-options"===s&&(o=Cs(o)),xs(o)){t=o;break}}return t}function Os(e){return/^https?:\/\/|^\/\//i.test(e)}function Is(e,t){return new URL(e,t).toString()}function Ls(e,t){var n=Ss(e);if(e.removeAttribute("srcset"),!Os(n))if(bs(n))n=Is(n,location.origin);else{if($t()(t))return e.removeAttribute("src"),"";try{n=Is(n,t)}catch(r){return e.removeAttribute("src"),""}}return e.setAttribute("src",n),n}function Es(e){var t=3;while(t>0){if(V()(e))break;if("BODY"===e.tagName||"HTML"===e.tagName)break;if("A"===e.tagName)return!0;e=e.parentNode,t-=1}return!1}var Rs="data-image-proxy",Ts="true";function Fs(e){var t=e.getAttribute(Rs);return t===Ts}function Ms(e,t){V()(t)||(e.style.visibility="hidden",e.setAttribute(Rs,Ts),e.setAttribute("src",t),e.style.visibility="visible")}var As=n("f560"),Ps=n.n(As),$s=er.store({$name:"publishConfig",$state:{isLoaded:!1,config:{is_enable:!1}},get websiteTitle(){return this.config.website_title||"RSS订阅"},get imageProxy(){return this.config.image_proxy},doLoad:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,An.publish.info();case 2:n=t.sent,e.$patch({config:n,isLoaded:!0});case 4:case"end":return t.stop()}}),t)})))()}}),Ds=er.store({$name:"image_proxy",$state:function(){return{_proxyUrl:null}},get urlList(){var e=wi.imageProxy;return V()(e)&&(e=$s.imageProxy),V()(e)||!e.enable?[]:e.url_s||[]},get isEnable(){return this.urlList.length>0},pickProxyUrl:function(){if(this.isEnable&&V()(this._proxyUrl)){var e=Ps()(this.urlList),t=e[0];"origin"===t&&(t=window.location.origin),this.$patch({_proxyUrl:t})}return this._proxyUrl},urlForImage:function(e){var t=e.src,n=e.token,r=this.pickProxyUrl();return V()(r)||$t()(n)?null:Mn.imageProxy.urlForImage({proxyUrl:r,src:t,token:n})}}),js={components:{MoIconAngleRight3:gs},props:{isOpened:{type:Boolean,default:!1},isReaded:{type:Boolean,default:!1},isReading:{type:Boolean,default:!1},isFavorited:{type:Boolean,default:!1},isCtrlKeyHold:{type:Boolean,default:!1},solo:{type:Boolean,default:!1},feedId:{type:String,required:!0},offset:{type:Number,required:!0},story:{type:Object,required:!0}},data:function(){return{isImageReady:!1,isImageNeedProxy:!1,isImageProxyFailed:!1}},computed:{title:function(){return this.story.title||this.story.link},dateText:function(){return wt(this.story.dt_published)},starColor:function(){return this.isFavorited?Ee:null},imageUrl:function(){var e=this.story.image_url;if($t()(e)||$t()(this.story.image_token))return e;if(!this.isImageNeedProxy||ws(e))return e;var t=Ds.urlForImage({src:e,token:this.story.image_token});return V()(t)?e:t},isShowImage:function(){return!$t()(this.imageUrl)&&!this.story.is_image_duplicated},isIgnoreImage:function(){var e=!$t()(this.story.image_token),t=e&&Ds.isEnable,n=!t&&this.isImageNeedProxy;return n||this.isImageProxyFailed},routerLink:function(){return"/story?feed=".concat(this.feedId,"&offset=").concat(this.offset)}},methods:{onPreviewImageLoad:function(){this.isImageReady=!0},onPreviewImageError:function(){this.isImageNeedProxy?this.isImageProxyFailed=!0:this.isImageNeedProxy=!0},toggleFavorited:function(){this.$emit("toggleFavorited")},handleSummaryClick:function(){this.isCtrlKeyHold&&this.openLinkInNewTab()},openLinkInNewTab:function(){$t()(this.story.link)?$t()(this.routerLink)||this.$router.push(this.routerLink):window.open(this.story.link,"_blank")},goLink:function(){var e=$t()(this.story.content)||this.story.content.length<=20;$t()(this.story.link)||!this.isCtrlKeyHold&&!e?$t()(this.routerLink)||this.$router.push(this.routerLink):this.openLinkInNewTab()},onOpen:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.solo){t.next=3;break}return e.$emit("click"),t.abrupt("return");case 3:if(!$t()(e.story.summary)&&!$t()(e.story.content)){t.next=10;break}if(n=jr.load({feedId:e.feedId,offset:e.offset,detail:!0,setReaded:!e.isReaded}),!$t()(e.story.summary)||!$t()(e.story.content)){t.next=8;break}return t.next=8,n;case 8:t.next=11;break;case 10:e.isReaded||vr.setStoryOffset({feedId:e.feedId,offset:e.offset+1});case 11:e.$emit("read"),!e.isOpened&&e.isCtrlKeyHold?e.openLinkInNewTab():e.$emit("update:isOpened",!e.isOpened);case 13:case"end":return t.stop()}}),t)})))()}}},Gs=js,Ns=(n("d81e"),Object(Je["a"])(Gs,ds,ls,!1,null,"661c3172",null)),Bs=Ns.exports,Hs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scroll-list"},[n("transition",{attrs:{name:"fade"}},[e.needJump?n("div",{staticClass:"jump-to-latest"},[n("mu-button",{attrs:{color:e.antBlue,ripple:!1},on:{click:e.jumpToLatest}},[n("fa-icon",{staticClass:"jump-icon",attrs:{size:"18",icon:"angle-double-down"}}),n("span",[e._v("看最新")])],1)],1):e._e()]),n("mescroll",{ref:"mescroll",staticClass:"mescroll",attrs:{down:e.mescrollDown,up:e.mescrollUp},on:{init:e.mescrollInit}},[n("div",{staticClass:"item-list"},[e._t("default")],2)])],1)},Us=[],Vs=52,zs=2,qs={props:{itemSize:{type:Number,required:!0},items:{type:Array,required:!0},initOffset:{type:Number},beginOffset:{type:Number},endOffset:{type:Number},total:{type:Number,required:!0},load:{type:Function,required:!0},jump:{type:Function,required:!1},reversed:{type:Boolean,default:!1},enableUnreadPad:{type:Boolean,default:!1}},data:function(){var e=window.innerHeight-48,t=Math.ceil(e/this.itemSize);return{pageSize:e,numPageItems:t,isPrevLoading:!1,isNextLoading:!1,mescrollDown:{auto:!1,callback:this.onMescrolDown},mescrollUp:{auto:!1,callback:this.onMescrolUp,onScroll:this.onScroll,page:{num:0,size:t},htmlNodata:'<div class="upwarp-nodata">没有更多了</div>',noMoreSize:Math.ceil(.5*t)},mescroll:null,antBlue:Le}},computed:{offsetAll:function(){return this.items.length*this.itemSize},realInitOffset:function(){return V()(this.initOffset)?this.reversed?this.total-1:0:this.initOffset},hasOld:function(){return!(this.total<=0)&&(this.items.length<=0||V()(this.beginOffset)?this.realInitOffset>0:this.beginOffset>0)},hasNew:function(){return!(this.total<=0)&&(this.items.length<=0||V()(this.endOffset)?this.realInitOffset<this.total:this.endOffset<this.total-1)},hasPrev:function(){return this.reversed?this.hasNew:this.hasOld},hasNext:function(){return this.reversed?this.hasOld:this.hasNew},_deltaPages:function(){var e=me()(this.endOffset,this.realInitOffset),t=me()(this.beginOffset,this.realInitOffset);e=Math.max(e,t+2*this.numPageItems);var n=(this.total-e)/this.numPageItems;return Math.floor(Math.max(0,n))},needJump:function(){return!V()(this.jump)&&this._deltaPages>=3},jumpOffset:function(){var e=this.total-this.numPageItems;return Math.max(e,this.realInitOffset)}},methods:{endSuccess:function(e){e=me()(e,0);var t=this.items.length-e;this.mescroll.endSuccess(t,this.hasNext);var n=Math.ceil(this.items.length/this.numPageItems)-1;this.mescroll.setPageNum(n),this.hasPrev||this.mescroll.lockDownScroll(!0),this.hasNext||(this.mescroll.lockUpScroll(!0),this.mescroll.showNoMore())},setInitUnreadPad:function(){if(this.enableUnreadPad){var e=this.mescroll.upwarp;if(!this.hasNext&&!V()(e)){var t,n=0,r=Object(et["a"])(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!(i.offset<this.realInitOffset))break;n+=1}}catch(a){r.e(a)}finally{r.f()}var s=this.items.length-n;if(!(s<=0)){var o=this.pageSize-s*this.itemSize-zs;o<=Vs||(e.style.height="".concat(o,"px"))}}}},loadInit:function(){var e=this,t=this.realInitOffset;if(this.total>0&&this.items.length<=this.numPageItems){if(this.hasNext){var n=t;return this.reversed&&(n=n-this.numPageItems+1),void this.load({offset:n,size:this.numPageItems,isInit:!0}).then((function(){e.loadNext()})).finally((function(){e.endSuccess(),e.setInitUnreadPad(),e.updateScrollTop(t)}))}if(this.hasPrev&&this.items.length<=0){var r=Math.ceil(.8*this.numPageItems),i=Math.max(0,t-r);return this.reversed&&(i=Math.min(Math.max(0,t),this.total-1)),void this.load({offset:i,size:r,isInit:!0}).finally(this.endSuccess)}}this.endSuccess(),this.setInitUnreadPad(),this.updateScrollTop(t)},updateScrollTop:function(e){var t,n=0,r=Object(et["a"])(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!(i.offset<e))break;n+=this.itemSize}}catch(s){r.e(s)}finally{r.f()}this.mescroll.setScrollTop(n)},loadPrev:function(){var e=this;if(this.isPrevLoading||!this.hasPrev||this.items.length<=0)this.mescroll.endDownScroll();else{var t,n=this.items.length;this.isPrevLoading=!0,t=this.reversed?Math.min(this.total-1,this.endOffset+1):Math.max(0,this.beginOffset-this.numPageItems),this.load({offset:t,size:this.numPageItems}).finally((function(){e.isPrevLoading=!1,e.endSuccess(n),e.mescroll.endDownScroll()}))}},loadNext:function(){var e=this;if(!(this.isNextLoading||!this.hasNext||this.items.length<=0)){var t,n=this.items.length;this.isNextLoading=!0,t=this.reversed?Math.max(0,this.beginOffset-this.numPageItems):Math.min(this.total-1,this.endOffset+1),this.load({offset:t,size:this.numPageItems}).finally((function(){e.isNextLoading=!1,e.endSuccess(n)}))}},mescrollInit:function(e){this.mescroll=e,this.loadInit()},onMescrolDown:function(e){this.loadPrev()},onMescrolUp:function(e,t){this.loadNext()},onScroll:function(e,t,n){if(n&&!this.isNextLoading&&this.hasNext&&!(this.items.length<=0)){var r=(this.offsetAll-t)/this.pageSize;r<2&&this.loadNext()}},jumpToLatest:function(){var e=this,t=this.jumpOffset;this.jump(this.jumpOffset),this.load({offset:t,size:this.numPageItems,resetLoadedOffset:!0}).finally(this.endSuccess).then((function(){e.updateScrollTop(t)}))}}},Ws=qs,Ks=(n("0e30"),Object(Je["a"])(Ws,Hs,Us,!1,null,"ddfacb7a",null)),Js=Ks.exports,Ys=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Xs=Ys?"meta":"control";function Qs(){var e={isCtrlKeyHold:!1,_isSetupDone:!1};function t(t){t.key.toLowerCase()===Xs.toLowerCase()?e.isCtrlKeyHold=!0:e.isCtrlKeyHold&&(e.isCtrlKeyHold=!1)}function n(t){e.isCtrlKeyHold=!1}function r(t){e.isCtrlKeyHold=!1}return e.setup=function(){e._isSetupDone||(e._isSetupDone=!0,document.addEventListener("keydown",t),document.addEventListener("keyup",n),document.addEventListener("visibilitychange",r),window.addEventListener("blur",r))},e.destroy=function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",n),document.removeEventListener("visibilitychange",r),window.removeEventListener("blur",r),e._isSetupDone=!1},e}var Zs={components:{MoBackHeader:zi,MoLayout:Xe,MoStoryItem:Bs,MoScrollList:Js,MoReadedButton:ni},data:function(){return{storyOpened:{},readingStoryOffset:null,keyboard:Qs()}},computed:{feedId:function(){return this.$route.query.id},feed:function(){return vr.get(this.feedId)},feedTitle:function(){return V()(this.feed)?"":this.feed.title},numUnreadText:function(){if(V()(this.feed))return"";var e=this.feed.num_unread_storys;return e>0?"#".concat(e,"# "):""},beginOffset:function(){var e=jr.loadedOffset(this.feedId);return V()(e)?null:e.begin},endOffset:function(){var e=jr.loadedOffset(this.feedId);return V()(e)?null:e.end},storyList:function(){var e=jr.loadedOffset(this.feedId);if(V()(e)||V()(e.begin)||V()(e.end))return[];var t=jr.getListByFeed(this.feedId);return Cr()(t,(function(t){return t.offset>=e.begin&&t.offset<=e.end}))},isReaded:function(){var e=this.feed;return function(t){return t.offset<e.story_offset}},isReading:function(){var e=this,t=this.feed;return function(n){var r=!V()(e.readingStoryOffset)&&n.offset===e.readingStoryOffset,i=n.offset===t.story_offset-1;return r||i}}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!V()(e.feed)){t.next=3;break}return t.next=3,vr.load({feedId:e.feedId});case 3:return t.next=5,ki.syncFeedLoadMushrooms();case 5:e.keyboard.setup(),jr.setNextStoryGetter(e.getNextStoryInfo.bind(e));case 7:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.keyboard.destroy()},methods:{getNextStoryInfo:function(e){var t=e.feedId,n=e.offset,r=jr.get({feedId:t,offset:n+1});return{story:r,shouldLoadNext:!0}},loadStorys:function(e){var t=e.offset,n=e.size,r=e.resetLoadedOffset,i=e.isInit;return jr.loadList({feedId:this.feedId,offset:t,detail:!0,size:n,resetLoadedOffset:r,isInit:i})},onRead:function(e){this.readingStoryOffset=e.offset},setAllReaded:function(){vr.setStoryOffset({feedId:this.feed.id,offset:this.feed.total_storys})},goFeedDetail:function(){this.$router.push("/feed-detail?id=".concat(this.feedId))},toggleFavorited:function(e){var t=!e.is_favorited;jr.setFavorited({feedId:e.feed.id,offset:e.offset,is_favorited:t})},onJump:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ki.syncFeedLoadMushrooms();case 2:vr.setStoryOffset({feedId:t.feed.id,offset:e}),Ce()(jt()(t.storyOpened),(function(e){t.storyOpened[e]=!1}));case 4:case"end":return n.stop()}}),n)})))()}}},eo=Zs,to=(n("3716"),Object(Je["a"])(eo,us,cs,!1,null,"6b2abede",null)),no=to.exports,ro=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{grey:"",header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.numUnreadText)+"品读")]},proxy:!0}])},[n("MoReadedButton",{staticClass:"action-readed",on:{click:e.setAllReaded}}),n("mu-button",{staticClass:"action-detail",attrs:{icon:""},on:{click:e.goMushroomDetail}},[n("fa-icon",{attrs:{size:"18",icon:"info-circle"}})],1)],1),n("div",{ref:"mainRef",staticClass:"list"},e._l(e.virtualList,(function(t){return n("MoFeedVirtualItem",{key:t.id,attrs:{story:t.story,keyboard:e.keyboard}})})),1)],1)},io=[],so={name:"MoMushroomPage",components:{MoBackHeader:zi,MoLayout:Xe,MoFeedVirtualItem:Hr,MoReadedButton:ni},props:{vid:{type:String,default:"/mushroom"}},data:function(){return{keyboard:Qs()}},computed:{mushrooms:function(){return jr.mushroomsOfHome},numUnreadMushrooms:function(){return jr.numUnreadOf(this.mushrooms)},numUnreadText:function(){var e=this.numUnreadMushrooms;return e>0?"#".concat(e,"# "):""},virtualList:function(){return this.mushrooms.map((function(e){return{story:e,id:"".concat(e.feed.id,":").concat(e.offset)}}))}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ki.syncFeedLoadMushrooms();case 2:e.restoreScroll(),e.keyboard.setup();case 4:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.keyboard.destroy()},activated:function(){this.restoreScroll(),this.keyboard.setup(),jr.setNextStoryGetter(this.getNextStoryInfo.bind(this))},deactivated:function(){this.keyboard.destroy()},savePageState:function(){this.$pageState.saveScrollTop({el:this.$refs.mainRef})&&this.$pageState.commit()},methods:{getNextStoryInfo:function(e){var t=e.feedId,n=e.offset,r=jr.nextMushroomOf({mushrooms:this.mushrooms,feedId:t,offset:n});return{story:r,showFeedTitle:!0}},restoreScroll:function(){this.$pageState.restoreScrollTop({el:this.$refs.mainRef})},isReaded:function(e){return jr.isReaded(e)},getFeedTitle:function(e){return vr.get(e).title},setAllReaded:function(){var e={};this.mushrooms.forEach((function(t){e[t.feed.id]=!0})),vr.setAllReaded({feedIds:jt()(e)})},goMushroomDetail:function(){this.$router.push("/mushroom-detail")}}},oo=so,ao=(n("fc68"),Object(Je["a"])(oo,ro,io,!1,null,"6d8b3793",null)),uo=ao.exports,co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("品读介绍")]},proxy:!0}])}),n("div",{staticClass:"main"},[n("div",{staticClass:"markdown-body"},[n("div",{staticClass:"center-wrapper"},[n("div",[n("h4",{staticClass:"sub-title"},[e._v(" 品读聚合了更新频率较低的订阅最近的更新 "),n("br"),e._v("通常是博客和长文，值得细细品读 ")]),n("p",{staticClass:"sub-title"},[e._v(" 在订阅详情页面，也可以设置订阅是否品读。 自定义分组中的订阅文章，不会显示在品读中。 ")])])])])])],1)},lo=[],fo={name:"MoMushroomDetailPage",components:{MoLayout:Xe,MoBackHeader:zi},data:function(){return{}},computed:{}},ho=fo,po=(n("8199"),Object(Je["a"])(ho,co,lo,!1,null,"e844c5f4",null)),mo=po.exports,vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{grey:"",header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.numUnreadText)+e._s(e.name))]},proxy:!0}])},[n("MoReadedButton",{staticClass:"action-readed",on:{click:e.setAllReaded}}),n("mu-button",{staticClass:"action-detail",attrs:{icon:""},on:{click:e.goFeedGroupDetail}},[n("fa-icon",{attrs:{size:"18",icon:"info-circle"}})],1)],1),n("div",{ref:"mainRef",staticClass:"list"},e._l(e.virtualList,(function(t){return n("MoFeedVirtualItem",{key:t.id,attrs:{feed:t.feed,story:t.story,keyboard:e.keyboard}})})),1)],1)},go=[],yo={name:"MoFeedGroupPage",components:{MoBackHeader:zi,MoLayout:Xe,MoFeedVirtualItem:Hr,MoReadedButton:ni},data:function(){return{keyboard:Qs()}},computed:{computedVid:function(){return"/group?name=".concat(this.name)},name:function(){return decodeURIComponent(this.$route.query.name)},group:function(){return vr.getGroupByName(this.name)},numUnreadText:function(){var e=vr.numUnreadOfGroup(this.group);return e>0?"#".concat(e,"# "):""},feeds:function(){return vr.feedListOfGroup(this.group)},mushrooms:function(){return jr.mushroomsOfGroup(this.name)},virtualList:function(){var e={};Ce()(this.mushrooms,(function(t){e[t.feed.id]=!0}));var t=[];return Ce()(this.mushrooms,(function(e){t.push({id:"".concat(e.feed.id,":").concat(e.offset),story:e})})),Ce()(this.feeds,(function(n){e[n.id]||t.push({feed:n,id:n.id})})),t}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ki.syncFeedLoadMushrooms();case 2:if(!$t()(e.feeds)){t.next=5;break}return e.$router.back(),t.abrupt("return");case 5:e.restoreScroll(),e.keyboard.setup(),n=e.name,jr.setNextStoryGetter((function(t){var r=t.feedId,i=t.offset;return e.getNextStoryInfo({groupName:n,feedId:r,offset:i})}));case 9:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.keyboard.destroy()},savePageState:function(){this.saveScroll()},beforeRouteUpdate:function(e,t,n){this.saveScroll(),n()},methods:{getNextStoryInfo:function(e){var t=e.groupName,n=e.feedId,r=e.offset,i=jr.mushroomsOfGroup(t),s=jr.nextMushroomOf({mushrooms:i,feedId:n,offset:r});return{story:s,showFeedTitle:!0}},saveScroll:function(){this.$pageState.saveScrollTop({el:this.$refs.mainRef})&&this.$pageState.commit()},restoreScroll:function(){this.$pageState.restoreScrollTop({el:this.$refs.mainRef})},setAllReaded:function(){var e=this.feeds.map((function(e){return e.id}));vr.setAllReaded({feedIds:e})},goFeedGroupDetail:function(){this.$router.push({path:"/group-detail",query:{name:this.name}})}}},bo=yo,_o=(n("78b3"),Object(Je["a"])(bo,vo,go,!1,null,"1f9c3b30",null)),wo=_o.exports,ko=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("分组 - "+e._s(e.name))]},proxy:!0}])}),n("div",{staticClass:"feed-group-info"},[n("MoFeedDetailInfoItem",{ref:"groupItemRef",staticClass:"item group-item",attrs:{name:"名称",value:e.name,editable:""},on:{save:e.onSaveName}},[n("MoGroupNameSelector",{on:{select:e.onSelectGroup}})],1),n("MoFeedDetailInfoItem",{staticClass:"item",attrs:{name:"订阅数",value:e.totalFeedCount}}),n("MoFeedDetailInfoItem",{staticClass:"item",attrs:{name:"未读订阅",value:e.numUnreadFeeds}}),n("MoFeedDetailInfoItem",{staticClass:"item",attrs:{name:"未读故事",value:e.numUnreadStorys}}),n("MoFeedDetailInfoItem",{staticClass:"item",attrs:{name:"最新故事发布时间",value:e.latestStoryDate}})],1)],1)},xo=[],Co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-name-selector"},e._l(e.avaliableGroupNames,(function(t){return n("span",{key:t,staticClass:"group-name",on:{click:function(n){return e.onClick(t)}}},[e._v(e._s(t))])})),0)},So=[],Oo={computed:{avaliableGroupNames:function(){return vr.avaliableGroupNames}},methods:{onClick:function(e){this.$emit("select",e)}}},Io=Oo,Lo=(n("7535"),Object(Je["a"])(Io,Co,So,!1,null,"24f629ce",null)),Eo=Lo.exports;function Ro(e){return e.num_unread_storys<=0}var To={components:{MoBackHeader:zi,MoLayout:Xe,MoFeedDetailInfoItem:rs,MoGroupNameSelector:Eo},data:function(){return{}},mounted:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ki.syncFeedLoadMushrooms();case 2:case"end":return e.stop()}}),e)})))()},computed:{name:function(){return decodeURIComponent(this.$route.query.name)},group:function(){return vr.getGroupByName(this.name)},feeds:function(){return vr.feedListOfGroup(this.group)},totalFeedCount:function(){return this.feeds.length},numUnreadFeeds:function(){return this.feeds.filter((function(e){return!Ro(e)})).length},numUnreadStorys:function(){return vr.numUnreadOfGroup(this.group)},latestStoryDate:function(){var e=vr.latestDateOfGroup(this.group);return kt(e)}},methods:{onSelectGroup:function(e){var t=this.$refs.groupItemRef;V()(t)||t.setEditValue(e)},onSaveName:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o,a,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.value,i=e.done,s=Xn(r),o=t.feeds.map((function(e){return e.id})),a=null,Jn(s)?a=function(){return t.$router.back()}:(u={path:t.$route.path,query:{name:r}},a=function(){return t.$router.replace(u)}),n.prev=5,n.next=8,vr.setAllGroup({feedIds:o,group:s});case 8:a(),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](5),t.$toast.error("更新失败: ".concat(n.t0.message));case 14:return n.prev=14,i(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[5,11,14,17]])})))()}}},Fo=To,Mo=(n("8452"),Object(Je["a"])(Fo,ko,xo,!1,null,"3e3132ac",null)),Ao=Mo.exports,Po=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("MoLayout",{attrs:{footer:"",solo:""}},[r("div",{staticClass:"login"},[r("div",{staticClass:"login-wrapper",style:t.wrapperStyle},[r("div",{staticClass:"title"},[t._v("蚁阅 - RSS轻松订阅")]),r("mu-text-field",{attrs:{"full-width":"",placeholder:"用户名或邮箱地址"},on:{focus:t.clearErrorText},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),r("mu-text-field",{attrs:{"full-width":"",placeholder:"密码","action-icon":t.loginForm.passwordVisibility?"visibility_off":"visibility","action-click":function(){return t.loginForm.passwordVisibility=!t.loginForm.passwordVisibility},type:t.loginForm.passwordVisibility?"text":"password","error-text":t.loginForm.errorText},on:{focus:t.clearErrorText},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),r("div",{staticClass:"button-wrapper"},[r("mu-button",{staticClass:"button-login",attrs:{color:t.antGreen,disabled:t.isLoginDisabled},on:{click:t.login}},[t._v("登录")]),r("mu-ripple",{staticClass:"button-forgot",on:{click:function(){return e.$router.push("/reset-password")}}},[t._v("忘了密码？")])],1),r("div",{staticClass:"register"},[r("MoAntGreenButton",{on:{click:t.goRegister}},[t._v("没有账号？去注册")])],1),r("div",{staticClass:"thirdpart"},[r("MoThirdpartLogin")],1)],1),r("MoFooter")],1)])},$o=[],Do=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mu-button",e._g(e._b({staticClass:"ant-green-button",attrs:{color:e.antGreen,flat:"","data-mu-loading-size":"24"}},"mu-button",e.$attrs,!1),e.$listeners),[e._t("default")],2)},jo=[],Go={data:function(){return{antGreen:Ie}}},No=Go,Bo=(n("a5fa"),Object(Je["a"])(No,Do,jo,!1,null,"782ac544",null)),Ho=Bo.exports,Uo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"thirdpart-login"},[n("mu-ripple",{directives:[{name:"loading",rawName:"v-loading",value:e.githubLoading,expression:"githubLoading"}],staticClass:"button",attrs:{"data-mu-loading-size":"24"},on:{click:e.loginGithub}},[n("fa-icon",{staticClass:"button-icon",attrs:{size:"20",icon:"fab/github"}}),n("span",{staticClass:"button-text"},[e._v("GitHub")])],1)],1)},Vo=[],zo={data:function(){return{githubLoading:!1}},methods:{loginGithub:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.githubLoading){t.next=2;break}return t.abrupt("return");case 2:return e.githubLoading=!0,t.next=5,wi.safeLogout();case 5:wi.loginGithub({next:"/"});case 6:case"end":return t.stop()}}),t)})))()}}},qo=zo,Wo=(n("744b"),Object(Je["a"])(qo,Uo,Vo,!1,null,"016b1c91",null)),Ko=Wo.exports,Jo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[n("div",{staticClass:"link-about"},[n("router-link",{attrs:{to:"/about"}},[e._v("蚁阅介绍")])],1),e._m(0),e._m(1)])},Yo=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"link-about"},[n("a",{attrs:{href:"https://gitee.com/anyant/rssant",target:"_blank"}},[e._v("开放源码")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"link-about"},[n("a",{attrs:{href:"https://blog.guyskk.com/",target:"_blank"}},[e._v("作者博客")])])}],Xo={},Qo=Xo,Zo=(n("59e3"),Object(Je["a"])(Qo,Jo,Yo,!1,null,"450306ab",null)),ea=Zo.exports,ta={components:{MoAntGreenButton:Ho,MoThirdpartLogin:Ko,MoLayout:Xe,MoFooter:ea},data:function(){return{antGreen:Ie,antTextGrey:Me,loginForm:{password:null,passwordVisibility:!1,errorText:null}}},computed:{account:{get:function(){return wi.inputAccount},set:function(e){wi.SET_INPUT_ACCOUNT(e)}},isLoginDisabled:function(){return!(this.account&&this.loginForm.password)},wrapperStyle:function(){return{minHeight:"".concat(this.$LAYOUT.windowInnerHeight,"px")}}},methods:{goRegister:function(){this.$router.replace("/register")},login:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:wi.safeLogout().finally((function(){wi.login({account:e.account,password:e.loginForm.password}).then((function(){Gn.clear(),e.$router.replace("/")})).catch((function(t){e.loginForm.errorText=t.message}))}));case 1:case"end":return t.stop()}}),t)})))()},clearErrorText:function(){this.loginForm.errorText=null}}},na=ta,ra=(n("14a5"),Object(Je["a"])(na,Po,$o,!1,null,"2259c31e",null)),ia=ra.exports,sa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{footer:"",solo:""}},[n("div",{staticClass:"register"},[n("div",{staticClass:"register-wrapper",style:e.wrapperStyle},[n("div",{staticClass:"title"},[e._v("蚁阅 - RSS轻松订阅")]),n("mu-text-field",{attrs:{"full-width":"",placeholder:"邮箱地址","error-text":e.registerForm.emailErrorText},on:{focus:e.clearErrorText},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("mu-text-field",{attrs:{"full-width":"",placeholder:"密码","action-icon":e.registerForm.passwordVisibility?"visibility_off":"visibility","action-click":function(){return e.registerForm.passwordVisibility=!e.registerForm.passwordVisibility},type:e.registerForm.passwordVisibility?"text":"password","error-text":e.registerForm.passwordErrorText},on:{focus:e.clearErrorText},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}}),n("div",{staticClass:"button-wrapper"},[n("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isRegisterLoading,expression:"isRegisterLoading"}],staticClass:"button-register",attrs:{color:e.antGreen,disabled:e.isRegisterDisabled,"data-mu-loading-size":"24"},on:{click:e.register}},[e._v("注册")])],1),n("div",{staticClass:"login"},[n("MoAntGreenButton",{on:{click:e.goLogin}},[e._v("已有账号？去登录")])],1),n("div",{staticClass:"thirdpart"},[n("MoThirdpartLogin")],1)],1),n("MoFooter")],1)])},oa=[],aa={components:{MoAntGreenButton:Ho,MoThirdpartLogin:Ko,MoLayout:Xe,MoFooter:ea},data:function(){return{antGreen:Ie,antTextGrey:Me,isRegisterLoading:!1,registerForm:{password:null,passwordVisibility:!1,emailErrorText:null,passwordErrorText:null}}},computed:{email:{get:function(){return wi.inputAccount},set:function(e){wi.SET_INPUT_ACCOUNT(e)}},isRegisterDisabled:function(){return!(this.email&&this.registerForm.password)},wrapperStyle:function(){return{minHeight:"".concat(this.$LAYOUT.windowInnerHeight,"px")}}},methods:{goLogin:function(){this.$router.replace("/login")},register:function(){var e=this;this.isRegisterLoading=!0,wi.register({email:this.email,password:this.registerForm.password}).then((function(){e.$toast.success({message:"注册成功，请查收邮件验证邮箱！",time:5e3}),wi.login({account:e.email,password:e.registerForm.password}).then((function(){e.$router.replace("/")})).catch((function(){e.$router.replace("/login")}))})).catch((function(t){if(V()(t.response)||400!==t.response.status)e.registerForm.passwordErrorText=t.message;else{var n=t.response.data;$t()(n.email)||(e.registerForm.emailErrorText=n.email),$t()(n.password)||(e.registerForm.passwordErrorText=n.password),$t()(n.email)&&$t()(n.password)&&(e.registerForm.passwordErrorText=t.message)}})).finally((function(){e.isRegisterLoading=!1}))},clearErrorText:function(){this.registerForm.emailErrorText=null,this.registerForm.passwordErrorText=null}}},ua=aa,ca=(n("22f1"),Object(Je["a"])(ua,sa,oa,!1,null,"4c80dcb4",null)),da=ca.exports,la=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("MoLayout",{attrs:{header:""}},[r("MoBackHeader",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("添加新订阅")]},proxy:!0}])},[r("mu-button",{staticClass:"action-toggle",attrs:{flat:"",color:t.antBlue},on:{click:t.toggleMode}},[t._v(t._s(t.isFromText?"导入文件":"输入链接"))])],1),r("div",{staticClass:"main"},[r("MoGroupNameSelectorDialog",{attrs:{open:t.openGroupDialog,value:t.groupName},on:{"update:open":function(e){t.openGroupDialog=e},confirm:t.onSelectGroup}}),t.isFromText?r("div",{key:"workspace-text",staticClass:"workspace workspace-text"},[r("mu-text-field",{ref:"inputText",staticClass:"input-text",attrs:{placeholder:"请输入链接或含有链接的文本","full-width":"","multi-line":"",rows:1,"rows-max":2,"error-text":t.errorText},on:{focus:t.onFocus},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}}),r("div",{staticClass:"button-text-wrapper",class:{"button-disabled":t.isSaveDisabled,"button-loading":t.isImportLoading}},[r("MoFeedCreationGroupButton",{attrs:{group:t.groupName},on:{click:function(){return e.openGroupDialog=!0}}}),r("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isImportLoading,expression:"isImportLoading"}],staticClass:"button-text-save",attrs:{color:t.antBlue,disabled:t.isSaveDisabled,"data-mu-loading-size":"24"},on:{click:t.onSave}},[t._v("确定")])],1)],1):r("div",{key:"workspace-file",staticClass:"workspace workspace-file"},[r("div",{staticClass:"import-file-info"},[r("span",[t._v("支持 XML/OPML/HTML")]),r("span",[t._v("或任意格式含有链接的文本文件")])]),r("form",{ref:"importFeedForm",staticStyle:{display:"none"}},[r("input",{ref:"importFileInput",staticStyle:{display:"none"},attrs:{type:"file",name:"import-file-input"},on:{change:t.onImportFileChange}})]),r("div",{staticClass:"button-file-wrapper",class:{"button-loading":t.isImportLoading}},[r("MoFeedCreationGroupButton",{attrs:{group:t.groupName},on:{click:function(){return e.openGroupDialog=!0}}}),r("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isImportLoading,expression:"isImportLoading"}],staticClass:"button-file-import",attrs:{color:t.antBlue,"data-mu-loading-size":"24"},on:{click:t.onImportClick}},[t._v("导入文件")])],1)]),r("MoCreationList",{ref:"creationListRef",staticClass:"creation-list"})],1)],1)},fa=[],ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{staticClass:"creation-list",attrs:{name:"fade",tag:"div"}},[e.isReady&&e.isEmpty?n("div",{key:"empty-placeholder",staticClass:"empty-placeholder-wrapper"},[n("div",{staticClass:"empty-placeholder"},[n("span",[e._v("无广告")]),n("br"),n("span",[e._v("无推荐")])])]):e._e(),e._l(e.creationList,(function(e){return n("MoCreationItem",{key:e.id,attrs:{status:e.status,title:e.url,date:e.dt_created,"router-link":"/creation-detail?id="+e.id}})}))],2)},pa=[],ma=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"creation-item",on:{click:e.onClick}},[n("div",{staticClass:"status",style:e.statusStyle}),n("div",{staticClass:"title"},[e._v(e._s(e.title))]),n("div",{staticClass:"date"},[e._v(e._s(e.dateText))])])},va=[],ga={props:{status:String,title:String,date:String,routerLink:String},computed:{dateText:function(){return wt(this.date)},color:function(){var e={ready:Ie,error:Re,updating:Le,pending:De};return me()(e[this.status],De)},statusStyle:function(){return{background:this.color}}},data:function(){return{}},methods:{onClick:function(){this.$router.push(this.routerLink)}}},ya=ga,ba=(n("a04e"),Object(Je["a"])(ya,ma,va,!1,null,"5887e896",null)),_a=ba.exports,wa={components:{MoCreationItem:_a},data:function(){return{isReady:!1}},computed:{creationList:function(){return vr.creationList},isEmpty:function(){var e=vr.creationList;return V()(e)||e.length<=0}},mounted:function(){var e=this;vr.loadCreationList().then((function(){e.isReady=!0})),ki.syncFeedLoadMushrooms()}},ka=wa,xa=(n("bc39"),Object(Je["a"])(ka,ha,pa,!1,null,"336d9be4",null)),Ca=xa.exports,Sa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mu-dialog",{staticClass:"group-name-selector-dialog",attrs:{title:e.title,"overlay-close":!1,open:e.open},on:{"update:open":e.onUpdateOpen}},[n("mu-text-field",{staticClass:"group-input",attrs:{"full-width":"","max-length":50,placeholder:"请输入或选择分组"},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),n("MoGroupNameSelector",{staticClass:"group-name-selector",on:{select:e.onSelect}}),n("mu-button",{attrs:{slot:"actions",flat:""},on:{click:function(t){return e.onCancel()}},slot:"actions"},[e._v("取消")]),n("mu-button",{attrs:{slot:"actions",disabled:!e.isConfirmEnable,flat:"",color:"primary"},on:{click:function(t){return e.onConfirm()}},slot:"actions"},[e._v("确定")])],1)},Oa=[],Ia={components:{MoGroupNameSelector:Eo},props:{title:String,value:String,open:Boolean},data:function(){return{groupName:this.value,isConfirmLoading:!1}},computed:{isConfirmEnable:function(){return!$t()(this.groupName)}},watch:{open:function(e,t){e&&(this.groupName=this.value),this.isConfirmLoading=!1}},methods:{onSelect:function(e){this.groupName=e},onConfirm:function(){var e=this;if(!this.isConfirmLoading){this.isConfirmLoading=!0;var t=function(){return e.closeDialog()};this.$emit("confirm",{value:this.groupName,done:t})}},onCancel:function(){this.closeDialog()},closeDialog:function(){this.$emit("update:open",!1),this.groupName=null,this.isConfirmLoading=!1},onUpdateOpen:function(e){this.$emit("update:open",e)}}},La=Ia,Ea=(n("2c8f"),Object(Je["a"])(La,Sa,Oa,!1,null,"1f6a02ba",null)),Ra=Ea.exports,Ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mu-button",e._g({staticClass:"feed-creation-group-button",attrs:{ripple:!1}},e.$listeners),[n("span",{staticClass:"group-name"},[e._v(e._s(e.group?e.group:"分组"))]),n("fa-icon",{staticClass:"group-icon",attrs:{icon:"caret-down"}})],1)},Fa=[],Ma={props:{group:String}},Aa=Ma,Pa=(n("18b6"),Object(Je["a"])(Aa,Ta,Fa,!1,null,"551b403d",null)),$a=Pa.exports,Da={name:"MoFeedCreationPage",components:{MoLayout:Xe,MoBackHeader:zi,MoCreationList:Ca,MoGroupNameSelectorDialog:Ra,MoFeedCreationGroupButton:$a},props:{vid:{type:String,default:"/feed-creation"}},data:function(){return{antBlue:Le,isFromText:!0,inputText:null,errorText:null,importFile:null,importFileTarget:null,isImportLoading:!1,openGroupDialog:!1,groupName:null}},computed:{isSaveDisabled:function(){return!this.inputText},groupId:function(){return Xn(this.groupName)}},mounted:function(){var e=this;ki.syncFeedLoadMushrooms().then((function(){if(vr.isEmpty){var t=location.origin+"/changelog";e.$alert("🎉🎉欢迎！我们先订阅一下蚁阅更新日志吧，我帮你填上链接。",{okLabel:"好的"}).then((function(){e.inputText=t}))}})),this.$pageState.restoreScrollTop({el:this.$refs.creationListRef})},activated:function(){this.$pageState.restoreScrollTop({el:this.$refs.creationListRef})},savePageState:function(){this.$pageState.saveScrollTop({el:this.$refs.creationListRef})&&this.$pageState.commit()},methods:{onSelectGroup:function(e){var t=e.value,n=e.done;this.groupName=t,n()},toggleMode:function(){this.isFromText=!this.isFromText},handleFeedImportedResult:function(e){var t=e.isImport,n=e.numFeedCreations,r=e.numCreatedFeeds,i=e.numExistedFeeds,s=e.firstExistedFeed;if(n<=0&&r<=0){var o="";return o=i<=0?"未找到任何订阅":1!==i||t?"共 ".concat(i," 个订阅均已存在"):V()(s)?"订阅已存在":"订阅 #".concat(s.id," 已存在: ").concat(s.title),void(t?this.$toast.warning({message:o,time:1e4}):this.errorText=o)}var a=t?"导入文件成功，":"";this.inputText=null;var u="";n<=0&&r>0?(u="".concat(t?"导入":"添加","成功, 找到 ").concat(r," 个新订阅"),i>0&&(u+="，已存在 ".concat(i," 个订阅")),this.$toast.success({message:a+u,time:1e4})):n>0&&r<=0?(u=i>0?"已存在 ".concat(i," 个订阅，还有 ").concat(n," 个链接正在查找中，稍后即可阅读"):"共 ".concat(n," 个链接正在查找中，稍后即可阅读"),this.$toast.success({message:a+u,time:1e4})):(u="找到 ".concat(r," 个新订阅，还有 ").concat(n," 个链接正在查找中，稍后即可阅读"),i>0&&(u="已存在 ".concat(i," 个订阅，")+u),this.$toast.info({message:a+u,time:1e4}))},onFeedSavedResult:function(e){return this.handleFeedImportedResult(Object(_e["a"])({isImport:!1},e))},onFeedImportedResult:function(e){return this.handleFeedImportedResult(Object(_e["a"])({isImport:!0},e))},onSave:function(){var e=this;this.isSaveDisabled||this.isImportLoading||(this.isImportLoading=!0,vr.import({text:this.inputText,group:this.groupId}).then(this.onFeedSavedResult.bind(this)).catch((function(t){e.errorText=t.message})).finally((function(){e.isImportLoading=!1})))},onFocus:function(){this.errorText=null},onImportClick:function(){var e=this.$refs.importFileInput;V()(e)||e.click()},onImportFileChange:function(){var e=this.$refs.importFileInput;if(!(V()(e)||e.files.length<=0)){var t=e.files[0];try{this.onImportFile(t)}finally{var n=this.$refs.importFeedForm;n.reset()}}},onImportFile:function(e){var t=this;this.isImportLoading||(this.isImportLoading=!0,vr.importFile({file:e,group:this.groupId}).then(this.onFeedImportedResult.bind(this)).catch((function(e){t.$toast.error({message:"导入文件失败: "+e.message,time:1e4})})).finally((function(){t.isImportLoading=!1})))}}},ja=Da,Ga=(n("04e1"),Object(Je["a"])(ja,la,fa,!1,null,"9bea0e92",null)),Na=Ga.exports,Ba=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{grey:"",header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e.hasSelected?[e._v("选中 "+e._s(e.selectedFeedIds.length)+" 项")]:[e._v("整理订阅 #"+e._s(e.numFeeds))]]},proxy:!0}])},[n("mu-button",{staticClass:"action-group",class:{"action-group-disable":!e.hasSelected},attrs:{flat:""},on:{click:e.groupSelected}},[n("fa-icon",{attrs:{icon:"box",size:15}})],1),n("mu-button",{staticClass:"action-delete",class:{"action-delete-disable":!e.hasSelected},attrs:{flat:""},on:{click:e.deleteSelected}},[n("fa-icon",{attrs:{icon:"trash",size:16}})],1),n("MoGroupNameSelectorDialog",{attrs:{title:e.groupDialogTitle,open:e.openGroupDialog},on:{"update:open":function(t){e.openGroupDialog=t},confirm:e.onSaveGroup}})],1),n("div",{ref:"mainRef",staticClass:"main"},e._l(e.feedGroups,(function(t){return n("div",{key:t.name,staticClass:"feed-group"},[n("div",{staticClass:"group-title"},[n("mu-checkbox",{staticClass:"group-checkbox",attrs:{ripple:!1,"input-value":e.isGroupHasCheccked(t),"checked-icon":e.isGroupAllChecked(t)?null:"indeterminate_check_box",color:e.groupCheckboxColor},on:{change:function(n){return e.onCheckGroup(t)}}}),n("div",{staticClass:"group-name",on:{click:function(n){return e.onToggleGroup(t.name)}}},[e._v(e._s(t.name))]),n("div",{staticClass:"group-info",on:{click:function(n){return e.onToggleGroup(t.name)}}},[n("span",{staticClass:"group-size"},[e._v(e._s(e.sizeOfGroup(t)))]),e.isGroupOpen(t.name)?n("fa-icon",{staticClass:"group-icon",attrs:{icon:"angle-down"}}):n("fa-icon",{staticClass:"group-icon",attrs:{icon:"angle-right"}})],1)],1),e.isGroupOpen(t.name)?e._l(t.items,(function(t){return n("div",{key:t.feed.id,staticClass:"feed-item"},[n("mu-checkbox",{staticClass:"feed-checkbox",attrs:{value:t.feed.id,ripple:!1,color:e.feedCheckboxColor},model:{value:e.selectedFeedIds,callback:function(t){e.selectedFeedIds=t},expression:"selectedFeedIds"}}),n("div",{staticClass:"feed-info",on:{click:function(n){return e.onFeedClick(t.feed)}}},[n("div",{staticClass:"feed-info-row1"},[n("div",{staticClass:"feed-title"},[e._v(e._s(t.feed.title||t.feed.id))]),n("div",{staticClass:"feed-issue"},[e._v(e._s(e.getFeedIssueName(t.issue)))])]),n("div",{staticClass:"feed-info-row2"},[n("div",{staticClass:"feed-date"},[e._v(e._s(e.formatFeedDate(t.feed)))]),n("div",{staticClass:"feed-total-storys"},[n("span",[e._v(e._s(e.totalStorys(t.feed))+" 篇")])])])])],1)})):e._e()],2)})),0)],1)},Ha=[],Ua=n("6806"),Va=n.n(Ua);function za(e){return V()(e)||""===e}var qa="trash",Wa="error-connect",Ka="error-deny",Ja="error-http",Ya="error-parse",Xa="error-status",Qa="zomby",Za=[{key:qa,name:"无效订阅"},{key:Wa,name:"无法连接"},{key:Ka,name:"请求被拒"},{key:Ja,name:"请求失败"},{key:Ya,name:"无法解析"},{key:Xa,name:"状态异常"},{key:Qa,name:"久未更新"}],eu={};Za.forEach((function(e){return eu[e.key]=e.name}));var tu={};Za.forEach((function(e,t){tu[e.key]=-(Za.length-t)}));var nu=er.store({$name:"feedGroup",get getFeedIssue(){function e(e){var t=za(e.dt_latest_story_published);return e.total_storys<=0||t}function t(e){return"error"===Va()(e.status)}var n=new Date;function r(e){var t=new Date(e.dt_latest_story_published);return Object(bt["a"])(n,t)>365}return function(n){if(e(n))return qa;if(t(n)){if(!V()(n.response_status)){if(n.response_status<0)return Wa;if(401===n.response_status||403===n.response_status)return Ka;if(n.response_status>=400)return Ja;if(200===n.response_status||304===n.response_status)return Ya}return Xa}return r(n)?Qa:null}},getFeedIssueName:function(e){return me()(eu[e],e)},getFeedIssueLevel:function(e){return me()(tu[e],0)},get feedGroups(){var e=this,t=vr,n=[],r=[],i=[];function s(e){return t.groupOf(e)===zn}function o(t){return Yt()(t,[function(t){return e.getFeedIssueLevel(t.issue)},function(e){return new Date(e.feed.dt_latest_story_published)},function(e){return e.feed.id}])}t.homeFeedList.forEach((function(t){var i=e.getFeedIssue(t);s(t)?r.push({feed:t,issue:i}):n.push({feed:t,issue:i})})),t.feedGroups.forEach((function(n){var r=[];t.feedListOfGroup(n).forEach((function(t){r.push({feed:t,issue:e.getFeedIssue(t)})})),i.push({name:"分组:".concat(n.name),items:o(r)})}));var a=[{name:"无分组",items:o(n)},{name:"品读",items:o(r)}];return i.forEach((function(e){return a.push(e)})),a=Cr()(a,(function(e){return e.items.length>0})),a},getFeedGroupName:function(e){return Yn(vr.groupOf(e))},totalStorysText:function(e){return e.total_storys>999?"999":"".concat(e.total_storys)},formatFeedDate:function(e){var t=e.dt_first_story_published,n=e.dt_latest_story_published;return t=za(t)?"":_t(t),n=za(n)?"":_t(n),za(t)&&za(n)?"未知时间":za(t)&&!za(n)?"未知时间 ~ ".concat(n):!za(t)&&za(n)?"".concat(t," ~ 未知时间"):"".concat(t," ~ ").concat(n)}}),ru={components:{MoBackHeader:zi,MoLayout:Xe,MoGroupNameSelectorDialog:Ra},props:{vid:{type:String,default:"/feed-clean"}},data:function(){return{groupCheckboxColor:Te,feedCheckboxColor:Ee,selectedFeedIds:[],closedGroups:{},openGroupDialog:!1}},computed:{numFeeds:function(){return vr.numFeeds},getFeedIssue:function(){return nu.getFeedIssue},getFeedIssueName:function(){return nu.getFeedIssueName},getFeedIssueLevel:function(){return nu.getFeedIssueLevel},feedGroups:function(){return nu.feedGroups},hasSelected:function(){return this.selectedFeedIds.length>0},groupDialogTitle:function(){var e=this.selectedFeedIds.length;return"设置 ".concat(e," 个订阅的分组")},selectedFeedIdMap:function(){var e={};return this.selectedFeedIds.forEach((function(t){return e[t]=!0})),e},isGroupHasCheccked:function(){var e=this;return function(t){var n,r=Object(et["a"])(t.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.selectedFeedIdMap[i.feed.id])return!0}}catch(s){r.e(s)}finally{r.f()}return!1}},isGroupAllChecked:function(){var e=this;return function(t){var n,r=Object(et["a"])(t.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.selectedFeedIdMap[i.feed.id])return!1}}catch(s){r.e(s)}finally{r.f()}return!0}},sizeOfGroup:function(){var e=this;return function(t){var n,r=t.items.length,i=0,s=Object(et["a"])(t.items);try{for(s.s();!(n=s.n()).done;){var o=n.value;e.selectedFeedIdMap[o.feed.id]&&(i+=1)}}catch(a){s.e(a)}finally{s.f()}return i>0?"".concat(i," / ").concat(r):"".concat(r)}}},mounted:function(){var e=this;vr.sync().then((function(){var t=e.$pageState.get("selectedFeedIds");V()(t)||t.forEach((function(t){return e.selectedFeedIds.push(t)}));var n=e.$pageState.get("closedGroups");V()(n)||Ce()(Vt()(n),(function(t){var n=Object(H["a"])(t,2),i=n[0],s=n[1];r["default"].set(e.closedGroups,i,s)})),e.$nextTick((function(){e.$pageState.restoreScrollTop({el:e.$refs.mainRef})}))}))},savePageState:function(){this.$pageState.saveScrollTop({el:this.$refs.mainRef}),this.$pageState.set("selectedFeedIds",this.selectedFeedIds),this.$pageState.set("closedGroups",this.closedGroups),this.$pageState.commit()},methods:{onCheckGroup:function(e){var t={};if(this.selectedFeedIds.forEach((function(e){return t[e]=!0})),this.isGroupAllChecked(e)){var n,r=Object(et["a"])(e.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;delete t[i.feed.id]}}catch(u){r.e(u)}finally{r.f()}}else{var s,o=Object(et["a"])(e.items);try{for(o.s();!(s=o.n()).done;){var a=s.value;t[a.feed.id]=!0}}catch(u){o.e(u)}finally{o.f()}}this.selectedFeedIds=jt()(t)},groupSelected:function(){this.hasSelected&&(this.openGroupDialog=!0)},onSaveGroup:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.value,i=e.done,s=Xn(r),n.prev=2,n.next=5,vr.setAllGroup({feedIds:t.selectedFeedIds,group:s});case 5:t.selectedFeedIds=[],t.$toast.success({message:"设置订阅分组成功!"}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](2),t.$toast.error("设置订阅分组失败: ".concat(n.t0.message));case 12:return n.prev=12,i(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,9,12,15]])})))()},deleteSelected:function(){var e=this;if(this.hasSelected){var t=this.selectedFeedIds.length;this.$confirm("确定要删除 ".concat(t," 个订阅？"),"提示",{type:"warning",okLabel:"确定"}).then((function(n){var r=n.result;if(r){var i="成功删除 ".concat(t," 个订阅!");ki.deleteAllFeed({feedIds:e.selectedFeedIds}).then((function(){e.selectedFeedIds=[],e.$toast.success({message:i})})).catch((function(t){e.$toast.error("删除订阅失败: ".concat(t.message))}))}}))}},onFeedClick:function(e){this.$router.push("/feed?id=".concat(e.id))},isGroupOpen:function(e){return!this.closedGroups[e]},onToggleGroup:function(e){r["default"].set(this.closedGroups,e,!this.closedGroups[e])},getFeedGroupName:function(e){return nu.getFeedGroupName(e)},totalStorys:function(e){return nu.totalStorysText(e)},formatFeedDate:function(e){return nu.formatFeedDate(e)}}},iu=ru,su=(n("1733"),Object(Je["a"])(iu,Ba,Ha,!1,null,"1dcf6206",null)),ou=su.exports,au=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{staticClass:"story",attrs:{header:""}},[n("div",{staticClass:"story-image-viewer"}),n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.headerTitle))]},proxy:!0}])},[n("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchLoading,expression:"isFetchLoading"}],staticClass:"action-fetch",attrs:{icon:"","data-mu-loading-size":"16"},on:{click:e.onFetchFulltext}},[n("fa-icon",{attrs:{size:"16",icon:"sync-alt"}})],1),n("mu-button",{staticClass:"action-favorited",attrs:{icon:""},on:{click:e.toggleFavorited}},[e.isFavorited?n("fa-icon",{attrs:{size:"18",icon:"star",color:e.starColor}}):n("fa-icon",{attrs:{size:"18",icon:"far/star",color:e.starColor}})],1)],1),n("MoStoryContent",{ref:"contentRef",attrs:{story:e.story,"next-feed":e.nextFeed,"next-story":e.nextStory,"show-next-feed-title":e.showNextFeedTitle,"image-viewer-container-getter":e.imageViewerContainerGetter}})],1)},uu=[],cu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"story-content"},[n("div",{staticClass:"story-wrapper",style:e.wrapperStyle},[e.story?n("div",{staticClass:"story-info"},[n("div",{directives:[{name:"story",rawName:"v-story",value:e.titleForRender,expression:"titleForRender"}],staticClass:"info-title",attrs:{id:"story-info-title"}}),n("div",{staticClass:"info-item"},[n("span",{staticClass:"info-item-name"},[e._v("原文：")]),n("a",{staticClass:"info-item-content story-link",attrs:{href:e.story.link,target:"_blank"}},[e._v(e._s(e.storyLinkUnquoted))])]),n("div",{staticClass:"info-item"},[n("span",{staticClass:"info-item-name"},[e._v("发布时间：")]),n("span",{staticClass:"info-item-content"},[e._v(e._s(e.dateText))])])]):e._e(),e.story?n("div",{staticClass:"content"},[e.story.audio_url?n("div",{staticClass:"story-audio-wrapper"},[n("MoAudioPlayer",{attrs:{src:e.story.audio_url}})],1):e._e(),e.story.iframe_url?n("div",{staticClass:"story-iframe-wrapper"},[e._m(0),n("iframe",{attrs:{src:e.story.iframe_url,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",referrerpolicy:"no-referrer"}})]):e._e(),n("div",{directives:[{name:"story",rawName:"v-story",value:e.storyForRender,expression:"storyForRender"}],staticClass:"markdown-body",attrs:{id:"story-markdown-body"}})]):e._e()]),n("transition",{attrs:{name:"fade"}},[e.nextStory?n("div",{staticClass:"next-story"},[n("div",{staticClass:"next-story-label"},[n("div",{staticClass:"next-story-label-line"}),n("div",{staticClass:"next-story-label-value"},[e._v("下一篇")]),n("div",{staticClass:"next-story-label-line"})]),n("a",{staticClass:"next-story-link",on:{click:function(t){return t.preventDefault(),e.openNextStory(t)}}},[e._v(e._s(e.nextTitle))])]):e._e()])],1)},du=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"story-iframe-loading-wrapper"},[n("div",{staticClass:"story-iframe-loading"},[e._v("Loading")])])}],lu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audio-player"},[n("div",{staticClass:"audio-button-play",on:{click:e.togglePlay}},[n("fa-icon",{staticClass:"audio-icon",attrs:{icon:e.isPaused?"play-circle":"pause-circle",size:"32"}})],1),n("div",{staticClass:"audio-main"},[n("div",{ref:"audioSlider",staticClass:"audio-slider",class:{"audio-slider-seekable":e.isSliderSeekable}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.audioProgress,expression:"audioProgress"}],attrs:{type:"hidden"},domProps:{value:e.audioProgress},on:{input:function(t){t.target.composing||(e.audioProgress=t.target.value)}}}),n("div",{staticClass:"audio-slider-track"}),n("div",{staticClass:"audio-slider-buffer",style:e.sliderBufferStyle}),n("div",{staticClass:"audio-slider-progress",style:e.sliderProgressStyle})]),n("div",{staticClass:"audio-time"},[n("span",{staticClass:"audio-time-now"},[e._v(e._s(e.formatTime(e.audioProgress)))]),e.audioError?n("span",{staticClass:"audio-error"},[e._v(e._s(e.audioError))]):e._e(),e.isShowLoading?n("span",{staticClass:"audio-loading"},[n("svg",{attrs:{"aria-hidden":"true","aria-label":"loading","aria-live":"polite",viewBox:"0 0 66 66"}},[n("circle",{attrs:{cx:"33",cy:"33",r:"30",fill:"transparent",stroke:"url(#audio-gradient)","stroke-dasharray":"170","stroke-dashoffset":"20","stroke-width":"6"}}),n("linearGradient",{attrs:{id:"audio-gradient"}},[n("stop",{attrs:{offset:"50%","stop-color":"currentColor"}}),n("stop",{attrs:{offset:"65%","stop-color":"currentColor","stop-opacity":"0.5"}}),n("stop",{attrs:{offset:"100%","stop-color":"currentColor","stop-opacity":"0"}})],1)],1)]):e._e(),n("span",{staticClass:"audio-time-duration"},[e._v(e._s(e.formatTime(e.audioDuration)))])])])])},fu=[],hu=(n("b6802"),n("18e0")),pu=n.n(hu),mu=n("9452"),vu=n.n(mu),gu={props:{src:{type:String,required:!0}},data:function(){return{isPaused:!0,isSeeking:!1,isAudioReady:!1,isAudioEnded:!1,isAudioWaiting:!1,audio:null,audioChecker:null,audioError:null,audioDuration:0,isAudioSeekable:!0,audioBuffer:0,audioProgress:0}},computed:{sliderRef:function(){return this.$refs.audioSlider},sliderProgressStyle:function(){if(!this.isAudioReady||this.audioDuration<=0)return null;var e=(this.audioProgress/this.audioDuration*100).toFixed(2);return{width:"".concat(e,"%")}},sliderBufferStyle:function(){if(!this.isAudioReady||this.audioDuration<=0)return null;var e=(this.audioBuffer/this.audioDuration*100).toFixed(2);return{width:"".concat(e,"%")}},isShowLoading:function(){return!this.isPaused&&this.isAudioWaiting&&!this.audioError},isSliderSeekable:function(){return this.isAudioReady&&this.audioDuration>0&&this.isAudioSeekable}},mounted:function(){this.initAudio(),this.initSlider()},beforeDestroy:function(){this.destroySlider(),this.destroyAudio()},methods:{formatTime:function(e){e=Math.round(e);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return n=n<10?"0"+n:n,r=r<10?"0"+r:r,0===t?"".concat(n,":").concat(r):(t=t<10?"0"+t:t,"".concat(t,":").concat(n,":").concat(r))},handlePlayError:function(e){var t="NotSupportedError"===e.name||9===e.code||"NOT_SUPPORTED_ERR"===e.name,n="NotAllowedError"===e.name,r="AbortError"===e.name||20===e.code||"ABORT_ERR"===e.name,i=!r&&!V()(this.audio.error);(t||n||i)&&(this.audioError="音频无法播放")},togglePlay:function(){var e=this;if(this.isPaused=!this.isPaused,this.isPaused)this.audio.pause();else{this.audio.preload="auto";var t=this.audio.play();V()(t)||t.then((function(){e.audioError=null})).catch((function(t){e.handlePlayError(t)}))}this.syncAudioSeekable()},initSlider:function(){this.sliderRef.addEventListener("touchstart",this.handleTouchStart),this.sliderRef.addEventListener("mousedown",this.handleMouseStart)},destroySlider:function(){this.sliderRef.removeEventListener("touchstart",this.handleTouchStart),this.sliderRef.removeEventListener("mousedown",this.handleMouseStart),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("touchcancel",this.handleTouchEnd),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseEnd)},handleTouchStart:function(e){this.isSliderSeekable&&(this.isSeeking=!0,this.setProgress(e.touches[0]),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("touchcancel",this.handleTouchEnd),e.cancelable&&e.preventDefault())},handleTouchEnd:function(e){this.applyAudioProgress(),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("touchcancel",this.handleTouchEnd),e.cancelable&&e.preventDefault()},handleTouchMove:function(e){this.setProgress(e.touches[0])},handleMouseStart:function(e){this.isSliderSeekable&&(this.isSeeking=!0,this.setProgress(e),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseEnd),e.cancelable&&e.preventDefault())},handleMouseEnd:function(e){this.setProgress(e),this.applyAudioProgress(),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseEnd),e.cancelable&&e.preventDefault()},handleMouseMove:function(e){this.setProgress(e)},setProgress:function(e){if(this.isSliderSeekable){var t=this.sliderRef,n=this.audioDuration,r=(e.clientX-t.getBoundingClientRect().left)/t.offsetWidth*n;r=Math.round(r),r>n?r=n:r<0&&(r=0),this.audioProgress=r}},applyAudioProgress:function(){try{this.audio.currentTime=this.audioProgress}catch(e){this.audioProgress=this.audio.currentTime}this.isSeeking=!1},syncAudioSeekable:function(){var e=this.audio.seekable;this.isAudioSeekable=!V()(e)&&e.length>0},syncAudioPaused:function(e){this.isPaused=!!me()(this.audio.paused,e)},syncAudioEnded:function(){this.isAudioEnded=me()(this.audio.ended,!0)},checkIsProgressEnded:function(){return this.audioDuration>0&&this.audioProgress>=this.audioDuration},startAudioWaitingChecker:function(){var e=this,t=[],n=setInterval((function(){var n=!1;if(!e.isPaused&&!e.checkIsProgressEnded()){t.push(e.audioProgress);while(t.length>2)t.splice(0,1);2===t.length&&t[0]===t[1]&&(n=!0)}e.isAudioWaiting=n}),3e3);return n},initAudio:function(){var e=new Audio(this.src);this.audio=e,e.preload="metadata",e.muted=!1,this.syncAudioSeekable(),this.audioChecker=this.startAudioWaitingChecker(),e.addEventListener("durationchange",this.handleAudioDuration),e.addEventListener("timeupdate",this.handleAudioProgress),e.addEventListener("progress",this.handleAudioBuffer),e.addEventListener("playing",this.handleAudioPlaying),e.addEventListener("canplay",this.handleAudioCanPlay),e.addEventListener("loadedmetadata",this.handleAudioLoaded),e.addEventListener("loadeddata",this.handleAudioLoaded),e.addEventListener("play",this.handleAudioPlay),e.addEventListener("pause",this.handleAudioPause),e.addEventListener("ended",this.handleAudioEnded),e.addEventListener("emptied",this.handleAudioEmptied),e.addEventListener("error",this.handleAudioError)},destroyAudio:function(){var e=this.audio;V()(e)||(V()(this.audioChecker)||(clearInterval(this.audioChecker),this.audioChecker=null),e.removeEventListener("durationchange",this.handleAudioDuration),e.removeEventListener("timeupdate",this.handleAudioProgress),e.removeEventListener("progress",this.handleAudioBuffer),e.removeEventListener("playing",this.handleAudioPlaying),e.removeEventListener("canplay",this.handleAudioCanPlay),e.removeEventListener("loadedmetadata",this.handleAudioLoaded),e.removeEventListener("loadeddata",this.handleAudioLoaded),e.removeEventListener("play",this.handleAudioPlay),e.removeEventListener("pause",this.handleAudioPause),e.removeEventListener("ended",this.handleAudioEnded),e.removeEventListener("emptied",this.handleAudioEmptied),e.removeEventListener("error",this.handleAudioError),e.src="",sn()(e.load)&&e.load(),this.audio=null)},handleAudioDuration:function(e){var t=this.audio.duration;vu()(t)&&!pu()(t)||(t=-1),this.audioDuration=t,this.isAudioReady=!0,this.syncAudioSeekable()},handleAudioProgress:function(e){this.isSeeking||(this.audioProgress=this.audio.currentTime,this.checkIsProgressEnded()&&this.handleAudioEnded(e))},handleAudioBuffer:function(e){var t=this.audio.buffered;!V()(t)&&t.length>0&&(this.audioBuffer=t.end(0))},handleAudioPlaying:function(e){this.isAudioWaiting=!1,this.syncAudioSeekable()},handleAudioCanPlay:function(e){this.isAudioWaiting=!1,this.syncAudioSeekable()},handleAudioLoaded:function(e){this.syncAudioSeekable()},handleAudioPlay:function(){this.isPaused&&this.syncAudioPaused(!1),this.syncAudioSeekable()},handleAudioPause:function(){this.isPaused||this.syncAudioPaused(!0),this.syncAudioSeekable()},handleAudioEnded:function(e){this.syncAudioEnded(),this.syncAudioPaused(!0),this.syncAudioSeekable()},handleAudioEmptied:function(e){this.syncAudioPaused(!0),this.syncAudioSeekable()},handleAudioError:function(e){V()(this.audio.error)||(this.audioError="音频无法播放",console.error(this.audio.error)),this.syncAudioPaused(!0),this.syncAudioSeekable()}}},yu=gu,bu=(n("fd89"),Object(Je["a"])(yu,lu,fu,!1,null,"47dbf21e",null)),_u=bu.exports,wu=(n("0808"),n("c82c")),ku=n.n(wu),xu={components:{MoAudioPlayer:_u},props:{story:Object,nextFeed:Object,nextStory:Object,gotoNextStory:Function,showNextFeedTitle:Boolean,imageViewerContainerGetter:Function},data:function(){return{}},computed:{storyLinkUnquoted:function(){return $t()(this.story.link)?"":decodeURI(this.story.link)},dateText:function(){return V()(this.story)?"":kt(this.story.dt_published)},link:function(){return V()(this.story)?"":this.story.link},imageToken:function(){return V()(this.story)?"":this.story.image_token},titleForRender:function(){var e=V()(this.story)?"":this.story.title;return{content:e,link:this.link}},storyForRender:function(){var e=V()(this.story)?"":this.story.content;return{content:e,link:this.link,callback:this.onStoryRendered.bind(this)}},wrapperStyle:function(){return{minHeight:"".concat(this.$LAYOUT.windowInnerHeight-48,"px")}},nextTitle:function(){if(V()(this.nextStory))return"";var e=null;this.showNextFeedTitle&&!V()(this.nextFeed)&&(e=this.nextFeed.title);var t=this.nextStory.title||decodeURI(this.nextStory.link);return $t()(e)?t:"".concat(e," - ").concat(t)}},mounted:function(){oi()},methods:{onStoryRendered:function(e){this.setupImageProxy(e),this.setupImageViewer(e),this.setupVideoFallback(e)},setupVideoFallback:function(e){var t=this,n=e.querySelectorAll("video");n.forEach((function(e){var n=e.getAttribute("src");$t()(n)?e.removeAttribute("src"):(n=Is(n,t.link),ws(n)||(e.setAttribute("src",n),e.onerror=function(){var t=document.createElement("a");t.setAttribute("href",e.src),t.setAttribute("referrerpolicy","no-referrer"),t.setAttribute("rel","noreferrer"),t.setAttribute("target","_blank"),t.innerText=e.src,e.parentNode.replaceChild(t,e)}))}))},setupImageProxy:function(e){var t=this,n=e.querySelectorAll("img,source");n.forEach((function(e){var n=Ls(e,t.link);$t()(n)||_s(n)||ws(n)||(e.setAttribute("referrerpolicy","no-referrer"),e.setAttribute("loading","lazy"),e.onerror=function(){t.onImageError(e)})}))},onImageError:function(e){if(!$t()(this.imageToken)&&!ws(e.src)&&!Fs(e)){var t=Ds.urlForImage({src:e.src,token:this.imageToken});Ms(e,t)}},setupImageViewer:function(e){var t=this,n=e.querySelectorAll("img,source");n.forEach((function(e){$t()(e.src)||Es(e)||(e.style.cursor="zoom-in",e.addEventListener("click",(function(n){n.preventDefault(),t.onViewImage(e)})))}))},onViewImage:function(e){e.removeAttribute("loading");var t=null;V()(this.imageViewerContainerGetter)||(t=this.imageViewerContainerGetter());var n=new ku.a(e,{navbar:!1,toolbar:!1,title:!1,keyboard:!1,loading:!1,container:t,hidden:function(){n.destroy()}});n.show(!0)},openNextStory:function(){if(!V()(this.nextStory))if(V()(this.gotoNextStory)){var e=this.nextStory.feed.id,t=this.nextStory.offset,n="/story?feed=".concat(e,"&offset=").concat(t);this.$router.replace({path:n})}else this.gotoNextStory()}}},Cu=xu,Su=(n("9bd6"),Object(Je["a"])(Cu,cu,du,!1,null,"615b234c",null)),Ou=Su.exports,Iu={components:{MoBackHeader:zi,MoLayout:Xe,MoStoryContent:Ou},data:function(){return{isFetchLoading:!1}},computed:{feedId:function(){return this.$route.query.feed},offset:function(){return parseInt(this.$route.query.offset)},isFavorited:function(){return!V()(this.story)&&this.story.is_favorited},isReaded:function(){return!V()(this.feed)&&!V()(this.story)&&this.story.offset<this.feed.story_offset},starColor:function(){return this.isFavorited?Ee:null},feed:function(){return vr.get(this.feedId)},story:function(){return jr.get({feedId:this.feedId,offset:this.offset})},nextStoryInfo:function(){return jr.nextStoryInfo({feedId:this.feedId,offset:this.offset})},showNextFeedTitle:function(){return this.nextStoryInfo.showFeedTitle},nextStory:function(){return this.nextStoryInfo.story},nextFeed:function(){return V()(this.nextStory)?null:vr.get(this.nextStory.feed.id)},headerTitle:function(){return V()(this.story)||V()(this.feed)?V()(this.story)?V()(this.feed)?"#".concat(this.feedId,"-").concat(this.offset):this.feed.title:this.story.title:"".concat(this.feed.title," - ").concat(this.story.title)}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadFeedAndStory();case 2:return t.next=4,ki.syncFeedLoadMushrooms();case 4:e.$watch("$route",(function(){e.loadFeedAndStory()}));case 5:case"end":return t.stop()}}),t)})))()},methods:{imageViewerContainerGetter:function(){return this.$el.querySelector(".story-image-viewer")},toggleFavorited:function(){var e=!this.isFavorited;jr.setFavorited({feedId:this.feedId,offset:this.offset,is_favorited:e})},onFetchFulltext:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isFetchLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isFetchLoading=!0,n=null,t.prev=4,t.next=7,jr.fetchFulltext({feedId:e.feedId,offset:e.offset});case 7:n=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),e.$toast.error({message:"抓取全文失败: ".concat(t.t0.message),time:1e4});case 13:return t.prev=13,e.isFetchLoading=!1,t.finish(13);case 16:V()(n)||(200===n.response_status?"REJECT"===n.accept&&e.$toast.info("抓取全文: 内容没有变化"):(r="抓取全文失败: ".concat(n.response_status," ").concat(n.response_status_name),e.$toast.warning({message:r,time:1e4})));case 17:case"end":return t.stop()}}),t,null,[[4,10,13,16]])})))()},loadFeed:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.feed,r=e.feedId,!V()(n)){t.next=4;break}return t.next=4,vr.load({feedId:r});case 4:case"end":return t.stop()}}),t)})))()},loadStory:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.story,r=e.feedId,i=e.offset,s=e.setReaded,!V()(n)&&!$t()(n.content)){t.next=4;break}return t.next=4,jr.load({feedId:r,offset:i,setReaded:s,detail:!0});case 4:case"end":return t.stop()}}),t)})))()},loadFeedAndStory:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.loadFeed({feed:e.feed,feedId:e.feedId}),r=e.loadStory({story:e.story,feedId:e.feedId,offset:e.offset,setReaded:!e.isReaded}),t.next=4,n;case 4:return t.next=6,r;case 6:if(V()(e.feed)||V()(e.story)||e.isReaded||vr.setStoryOffset({feedId:e.feedId,offset:e.offset+1}),e.scrollToTop(),!e.nextStoryInfo.shouldLoadNext){t.next=14;break}if(i=e.offset+1<e.feed.total_storys,!i){t.next=14;break}return s=jr.get({feedId:e.feedId,offset:e.offset+1}),t.next=14,e.loadStory({story:s,feedId:e.feedId,offset:e.offset+1});case 14:case"end":return t.stop()}}),t)})))()},scrollToTop:function(){window.scrollTo(0,0);var e=this.$refs.contentRef;V()(e)||V()(e.$el)||e.$el.scrollTo(0,0)}}},Lu=Iu,Eu=(n("9add"),Object(Je["a"])(Lu,au,uu,!1,null,"ebc70858",null)),Ru=Eu.exports,Tu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.feedTitle))]},proxy:!0}])},[n("mu-button",{staticClass:"action-delete",attrs:{icon:""},on:{click:e.deleteFeed}},[n("fa-icon",{staticClass:"action-icon",attrs:{icon:"trash"}})],1)],1),n("div",{staticClass:"feed-info"},[n("MoFeedDetailInfoItem",{staticClass:"title-item",attrs:{name:"标题",value:e.feedTitle,editable:""},on:{save:e.onSaveTitle}}),n("MoFeedDetailInfoItem",{ref:"groupItemRef",staticClass:"group-item",attrs:{name:"分组",value:e.getGroupName(e.feedGroup),editable:""},on:{save:e.onSaveGroup}},[n("MoGroupNameSelector",{on:{select:e.onSelectGroup}})],1),e._l(e.feedInfo,(function(e){return n("MoFeedDetailInfoItem",{key:e.name,attrs:{name:e.name,type:e.type,value:e.value}})}))],2)],1)},Fu=[],Mu=[{name:"状态",key:function(e){var t="".concat(me()(e.status,"")," / ").concat(me()(e.response_status,""));return $t()(e.response_status_name)||(t="".concat(t," / ").concat(e.response_status_name)),t},type:"status"},{name:"异常",key:"warnings",process:function(e){return $t()(e)?"无":e}},{name:"主页",key:"link",type:"link"},{name:"简介",key:"description"},{name:"作者",key:"author"},{name:"供稿地址",key:"url",type:"link"},{name:"供稿格式",key:"version"},{name:"未读故事",key:"num_unread_storys",type:"number"},{name:"故事总数",key:"total_storys",type:"number"},{name:"发布周期",key:"dryness",process:function(e){if(V()(e))return"未知";var t=256/Math.pow(2,8*e/1e3)-1,n=31/(t+1);return n>=1?"约 ".concat(n.toFixed(0)," 天"):"小于 1 天"}},{name:"干货程度",key:"dryness",process:function(e){return V()(e)?"未知":"".concat((e/10).toFixed(1),"%")}},{name:"冻结级别",key:"freeze_level",type:"number"},{name:"使用代理",key:"use_proxy",type:"boolean"},{name:"最老故事发布时间",key:"dt_first_story_published",type:"datetime"},{name:"最新故事发布时间",key:"dt_latest_story_published",type:"datetime"},{name:"创建时间",key:"dt_created",type:"datetime"},{name:"更新时间",key:"dt_updated",type:"datetime"},{name:"检查时间",key:"dt_checked",type:"datetime"},{name:"同步时间",key:"dt_synced",type:"datetime"}],Au={components:{MoBackHeader:zi,MoLayout:Xe,MoFeedDetailInfoItem:rs,MoGroupNameSelector:Eo},data:function(){return{}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,vr.load({feedId:e.feedId,detail:!0});case 2:return t.next=4,ki.syncFeedLoadMushrooms();case 4:case"end":return t.stop()}}),t)})))()},computed:{feedId:function(){return this.$route.query.id},feed:function(){return vr.get(this.feedId)},feedTitle:function(){return V()(this.feed)?"":this.feed.title},feedGroup:function(){return vr.groupOf(this.feed)},feedInfo:function(){var e=this.feed;V()(e)&&(e={id:this.feedId,title:this.feedTitle});var t=[];return Mu.forEach((function(n){var r={name:n.name,type:n.type};sn()(n.key)?r.value=n.key(e):r.value=e[n.key],V()(n.process)||(r.value=n.process(r.value)),"datetime"===n.type?r.value=kt(r.value):"boolean"===n.type&&(r.value=r.value?"是":"否"),t.push(r)})),t}},methods:{getGroupName:Yn,onSaveTitle:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.value,i=e.done,n.prev=1,n.next=4,vr.setTitle({feedId:t.feedId,title:r});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),t.$toast.error("更新失败: ".concat(n.t0.message));case 9:i();case 10:case"end":return n.stop()}}),n,null,[[1,6]])})))()},onSelectGroup:function(e){var t=this.$refs.groupItemRef;V()(t)||t.setEditValue(e)},onSaveGroup:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.value,i=e.done,s=Xn(r),$t()(s)||s===t.feedGroup){n.next=11;break}return n.prev=3,n.next=6,vr.setAllGroup({feedIds:[t.feedId],group:s});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](3),t.$toast.error("更新失败: ".concat(n.t0.message));case 11:i();case 12:case"end":return n.stop()}}),n,null,[[3,8]])})))()},deleteFeed:function(){var e=this;this.$confirm("删除订阅 “".concat(this.feedTitle,"” ？"),"提示",{type:"warning"}).then((function(t){var n=t.result;n&&ki.deleteFeed({feedId:e.feedId}).then((function(){e.$toast.success("删除成功"),e.$router.go(-2)})).catch((function(t){e.$toast.message("删除失败: "+t.message)}))}))}}},Pu=Au,$u=(n("c498"),Object(Je["a"])(Pu,Tu,Fu,!1,null,"14673c58",null)),Du=$u.exports,ju=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{solo:""}},[e.isError?[n("h2",[e._v("邮箱验证失败，链接已失效")]),n("p",[n("router-link",{attrs:{to:"/"}},[e._v("返回首页")])],1)]:e._e()],2)},Gu=[],Nu={components:{MoLayout:Xe},data:function(){return{isError:!1}},computed:{key:function(){return this.$route.params.key}},mounted:function(){var e=this;wi.confirmEmail({key:this.key}).then((function(){e.$toast.success({message:"邮箱验证成功！",time:5e3}),wi.isLogined?e.$router.replace("/"):e.$router.replace("/login")})).catch((function(){e.isError=!0}))}},Bu=Nu,Hu=(n("1b84"),Object(Je["a"])(Bu,ju,Gu,!1,null,"75960122",null)),Uu=Hu.exports,Vu=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("MoLayout",{attrs:{solo:""}},[r("div",{staticClass:"reset-password"},[r("div",{staticClass:"title"},[t._v("蚁阅 - 重置密码")]),r("mu-text-field",{attrs:{"full-width":"",type:"email",placeholder:"邮箱地址","error-text":t.errorText},on:{focus:t.clearErrorText},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("div",{staticClass:"button-wrapper"},[r("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"button-reset",attrs:{"full-width":"",color:t.antGreen,disabled:t.isResetDisabled,"data-mu-loading-size":"24"},on:{click:t.reset}},[t._v("确定")])],1),r("div",{staticClass:"login"},[r("MoAntGreenButton",{on:{click:function(){e.$router.replace("/login")}}},[t._v("返回登录")])],1)],1)])},zu=[],qu={components:{MoAntGreenButton:Ho,MoLayout:Xe},data:function(){return{antGreen:Ie,antTextGrey:Me,isLoading:!1,email:null,errorText:null}},computed:{isResetDisabled:function(){return $t()(this.email)}},methods:{reset:function(){var e=this;this.isLoading=!0,wi.resetPassword({email:this.email}).then((function(){e.$toast.success({message:"重置密码链接已发送到邮箱，请查收！",time:5e3}),e.$router.replace("/login")})).catch((function(t){e.errorText=t.message})).finally((function(){e.isLoading=!1}))},clearErrorText:function(){this.errorText=null}}},Wu=qu,Ku=(n("13cc"),Object(Je["a"])(Wu,Vu,zu,!1,null,"217a4448",null)),Ju=Ku.exports,Yu=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("MoLayout",{attrs:{solo:""}},[r("div",{staticClass:"reset-password-confirm"},[r("div",{staticClass:"title"},[t._v("蚁阅 - 设置新密码")]),r("mu-text-field",{attrs:{"full-width":"",type:"password",placeholder:"请输入新密码","error-text":t.errorText},on:{focus:t.clearErrorText},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("div",{staticClass:"button-wrapper"},[r("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"button-save",attrs:{"full-width":"",color:t.antGreen,disabled:t.isSaveDisabled,"data-mu-loading-size":"24"},on:{click:t.save}},[t._v("确定")])],1),r("div",{staticClass:"login"},[r("MoAntGreenButton",{on:{click:function(){e.$router.replace("/login")}}},[t._v("直接去登录")])],1)],1)])},Xu=[],Qu={components:{MoAntGreenButton:Ho,MoLayout:Xe},data:function(){return{antGreen:Ie,antTextGrey:Me,isLoading:!1,password:null,errorText:null}},computed:{token:function(){return this.$route.query.token},uid:function(){return this.$route.params.uid},isSaveDisabled:function(){return $t()(this.password)}},methods:{save:function(){var e=this;this.isLoading=!0,wi.confirmResetPassword({uid:this.uid,token:this.token,new_password:this.password}).then((function(){e.$toast.success({message:"密码设置成功，请使用新密码登录！",time:5e3}),e.$router.replace("/login")})).catch((function(t){e.errorText=t.message})).finally((function(){e.isLoading=!1}))},clearErrorText:function(){this.errorText=null}}},Zu=Qu,ec=(n("a522"),Object(Je["a"])(Zu,Yu,Xu,!1,null,"1b83319c",null)),tc=ec.exports,nc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{attrs:{"center-title":""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.username))]},proxy:!0}])},[n("MoDarkModeDialog",{attrs:{open:e.isDarkModeDialogOpen},on:{"update:open":function(t){e.isDarkModeDialogOpen=t},change:e.onDarkModeChange}})],1),n("div",{staticClass:"main"},[e.isVipEnable?n("div",{staticClass:"action-group action-group-vip",class:{"balance-notice":e.shouldNoticeVip}},[n("div",{staticClass:"action-row",on:{click:e.goVip}},[n("span",{staticClass:"action-label"},[e._v("蚁阅会员")]),n("span",[n("span",{staticClass:"vip-balance"},[e._v(e._s(e.customerBalance)+" 到期")]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1)])]):e._e(),n("div",{staticClass:"action-group"},[n("div",{staticClass:"action-row",class:{disabled:e.isGithubConnected},on:{click:e.connectGithub}},[n("span",{staticClass:"action-label"},[e._v("GitHub登录")]),n("span",[n("span",[e._v(e._s(e.isGithubConnected?"已绑定":"绑定"))]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1)]),n("div",{staticClass:"action-row",class:{disabled:e.isPasswordConfigured},on:{click:e.configurePassword}},[n("span",{staticClass:"action-label"},[e._v("密码登录")]),n("span",[n("span",[e._v(e._s(e.isPasswordConfigured?"已设置":"设置密码"))]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1)]),n("div",{staticClass:"action-row",on:{click:e.exportOPML}},[n("span",{staticClass:"action-label"},[e._v("导出订阅")]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1),n("div",{staticClass:"action-row",on:{click:e.onClickDarkMode}},[n("span",{staticClass:"action-label"},[e._v("夜间模式")]),n("span",[n("span",[e._v(e._s(e.darkModeStatus))]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1)]),n("div",{staticClass:"action-row",on:{click:e.goAbout}},[n("span",{staticClass:"action-label"},[e._v("蚁阅介绍")]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1),n("div",{staticClass:"action-row",on:{click:e.goChangelog}},[n("span",{staticClass:"action-label"},[e._v("更新日志")]),n("fa-icon",{staticClass:"action-icon",attrs:{icon:"chevron-right"}})],1)]),n("div",{staticClass:"divider"}),n("div",{staticClass:"action-group"},[n("div",{staticClass:"action-row action-logout",on:{click:e.onLogout}},[n("span",{staticClass:"action-label"},[e._v("退出登录")])])]),n("div",{staticClass:"divider"})])],1)},rc=[],ic=n("63ea"),sc=n.n(ic),oc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mu-dialog",{staticClass:"dark-mode-dialog",attrs:{title:"夜间模式","overlay-close":!1,open:e.open},on:{"update:open":e.onUpdateOpen}},[e.isSupported?[n("div",{staticClass:"dark-mode-option"},[n("mu-radio",{attrs:{value:"auto",label:"跟随系统",ripple:!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),n("div",{staticClass:"dark-mode-option"},[n("mu-radio",{attrs:{value:"enable",label:"开启",ripple:!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),n("div",{staticClass:"dark-mode-option"},[n("mu-radio",{attrs:{value:"disable",label:"关闭",ripple:!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]:[n("div",[e._v("当前浏览器不支持夜间模式，可以尝试用 Chrome，Safari，火狐，或微软Edge 打开蚁阅。")])],n("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:function(t){return e.onConfirm()}},slot:"actions"},[e.isSupported?[e._v("确定")]:[e._v("好的")]],2)],2)},ac=[],uc={props:{open:Boolean},data:function(){return{isSupported:ue.isSupported(),value:ue.get()}},methods:{onConfirm:function(){var e=this;this.$emit("update:open",!1),this.isSupported&&setTimeout((function(){ue.set(e.value),e.$emit("change")}),150)},onUpdateOpen:function(e){this.value=ue.get(),this.$emit("update:open",e)}}},cc=uc,dc=(n("7df7"),Object(Je["a"])(cc,oc,ac,!1,null,"6fac7ef7",null)),lc=dc.exports,fc={name:"MoAccountPage",components:{MoLayout:Xe,MoBackHeader:zi,MoDarkModeDialog:lc},data:function(){return{antGold:Ee,antRed:Re,antGreen:Ie,isDarkModeDialogOpen:!1,darkModeValue:ue.get()}},computed:{isVipEnable:function(){return wi.isVipEnable},shouldNoticeVip:function(){return wi.shouldNoticeVip},customerBalance:function(){return wi.balanceText},isGithubConnected:function(){var e=wi.loginUser;if(!wi.isLogined||V()(e))return!1;if(V()(e.social_accounts))return!1;for(var t=0;t<e.social_accounts.length;t++){var n=e.social_accounts[t];if(sc()(n.provider,"github"))return!0}return!1},isPasswordConfigured:function(){var e=wi.loginUser;return!(!wi.isLogined||V()(e))&&(V()(e.has_usable_password)||e.has_usable_password)},username:function(){var e=wi.loginUser;return V()(e)?"":e.username},darkModeStatus:function(){return ue.isSupported()?{auto:"跟随系统",enable:"已开启",disable:"已关闭"}[this.darkModeValue]:"不支持"}},mounted:function(){},methods:{configurePassword:function(){var e=this;this.isPasswordConfigured||this.$prompt(null,"请输入新密码",{inputType:"password",beforeClose:function(e,t,n){if(!e)return n();wi.changePassword({password:t.value}).then((function(){return n()})).catch((function(e){t.errorText=e.message}))}}).then((function(t){var n=t.result;n&&e.$toast.success("密码设置成功")}))},connectGithub:function(){this.isGithubConnected||(this.$loading({size:24}),wi.connectGithub({next:"/"}))},exportOPML:function(){vr.exportOPML({download:!0})},goVip:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.openVipHomeLink();case 2:case"end":return e.stop()}}),e)})))()},goAbout:function(){this.$router.push("/about")},goChangelog:function(){window.open("/changelog","_blank")},onClickDarkMode:function(){this.isDarkModeDialogOpen=!0},onDarkModeChange:function(){this.darkModeValue=ue.get()},onLogout:function(){wi.logout().then((function(){window.location.assign("/")}))}}},hc=fc,pc=(n("1a47"),Object(Je["a"])(hc,nc,rc,!1,null,"9d97d5ac",null)),mc=pc.exports,vc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("发布订阅")]},proxy:!0}])},[n("mu-button",{staticClass:"action-guide",attrs:{flat:""},on:{click:e.openGuideDialog}},[n("fa-icon",{attrs:{icon:"info-circle",size:16,color:e.antGold}}),n("span",{staticClass:"guide-button-text"},[e._v("配置说明")])],1)],1),n("div",{staticClass:"main"},[n("div",{staticClass:"section-publish-config"},[n("div",{staticClass:"config-item"},[n("mu-switch",{staticClass:"input-is-enable",attrs:{inputValue:e.publishConfig.is_enable,"label-left":"",label:"开启发布订阅功能"},on:{change:e.onSetIsEnable}})],1),e.publishConfig.is_enable?n("div",{staticClass:"config-item"},[n("div",{staticClass:"title-root-url"},[n("label",{staticClass:"label"},[e._v("自定义网址")])]),n("div",{staticClass:"form-root-url"},[n("mu-text-field",{staticClass:"input",attrs:{placeholder:"例如：https://www.example.com","full-width":"","error-text":e.form.root_url_error},model:{value:e.form.root_url,callback:function(t){e.$set(e.form,"root_url",t)},expression:"form.root_url"}}),n("span",{staticClass:"item-button item-button-save",on:{click:e.onSetRootUrl}},[n("fa-icon",{staticClass:"item-button-icon",attrs:{color:e.antTextWhite,icon:"save"}}),e._v("保存 ")],1)],1)]):e._e(),e.publishConfig.is_enable?n("div",{staticClass:"config-item"},[n("div",{staticClass:"title-website-title"},[n("label",{staticClass:"label"},[e._v("网站标题")])]),n("div",{staticClass:"form-website-title"},[n("mu-text-field",{staticClass:"input",attrs:{placeholder:"你的网站标题","full-width":"","error-text":e.form.website_title_error},model:{value:e.form.website_title,callback:function(t){e.$set(e.form,"website_title",t)},expression:"form.website_title"}}),n("span",{staticClass:"item-button item-button-save",on:{click:e.onSetWebsiteTitle}},[n("fa-icon",{staticClass:"item-button-icon",attrs:{color:e.antTextWhite,icon:"save"}}),e._v("保存 ")],1)],1)]):e._e(),e.publishConfig.is_enable?n("div",{staticClass:"config-item config-publish-mode"},[n("mu-radio",{staticClass:"input-publish-mode",attrs:{inputValue:!!e.publishConfig.is_all_public,value:!0,label:"全部公开发布"},on:{click:function(t){return e.onSetAllPublic(!0)}}}),n("mu-radio",{staticClass:"input-publish-mode",attrs:{inputValue:!!e.publishConfig.is_all_public,value:!1,label:"选择部分公开"},on:{click:function(t){return e.onSetAllPublic(!1)}}})],1):e._e()]),e.isShowFeedList?n("MoPublishConfigFeedList",{staticClass:"section-feed-list"}):e._e()],1),n("mu-dialog",{attrs:{fullscreen:"",scrollable:"",padding:0,open:e.isGuideDialogOpen},on:{"update:open":function(t){e.isGuideDialogOpen=t}}},[n("mu-appbar",{attrs:{"z-depth":"0",color:"#ffffff","text-color":"#000000",title:"配置说明"}},[n("mu-button",{staticClass:"button-close",attrs:{slot:"right",color:e.antBlue,flat:""},on:{click:e.closeGuideDialog},slot:"right"},[n("fa-icon",{attrs:{icon:"times",size:20,color:e.antBlue}}),n("span",{staticClass:"button-text"},[e._v("关闭")])],1)],1),n("div",{staticClass:"guide-main markdown-body"},[n("p",[e._v("发布订阅功能用于公开你的订阅，让网友可以在你的网站上阅读你的订阅内容。")]),n("p",[e._v("开启此功能后，你还需要在你的服务器上配置请求转发才能生效。")]),n("p",[n("span",[e._v("当请求访问你指定的网址时，将请求转发到蚁阅地址")]),n("code",[e._v(e._s(e.publishTarget))]),n("span",[e._v("同时带上请求头")]),n("code",[e._v(e._s(e.publishHeader))]),n("span",[e._v("，蚁阅服务器会根据此请求头展示你发布的订阅。")])]),n("h4",[e._v("Nginx配置")]),n("pre",[e._v(e._s(e.nginxConfig))]),n("h4",[e._v("Caddy配置")]),n("pre",[e._v(e._s(e.caddyConfig))])])],1)],1)},gc=[],yc=(n("498a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"publish-config-feed-list"},e._l(e.feedGroups,(function(t){return n("div",{key:t.name,staticClass:"feed-group"},[n("div",{staticClass:"group-title"},[n("div",{staticClass:"group-name",on:{click:function(n){return e.onToggleGroup(t.name)}}},[e._v(e._s(t.name))]),n("div",{staticClass:"group-info",on:{click:function(n){return e.onToggleGroup(t.name)}}},[n("span",{staticClass:"group-size"},[e._v(e._s(e.sizeOfGroup(t)))]),e.isGroupOpen(t.name)?n("fa-icon",{staticClass:"group-icon",attrs:{icon:"angle-down"}}):n("fa-icon",{staticClass:"group-icon",attrs:{icon:"angle-right"}})],1)]),e.isGroupOpen(t.name)?e._l(t.items,(function(t){return n("div",{key:t.feed.id,staticClass:"feed-item"},[n("div",{staticClass:"feed-info",on:{click:function(n){return e.onFeedClick(t.feed)}}},[n("div",{staticClass:"feed-info-row1"},[n("div",{staticClass:"feed-title"},[e._v(e._s(t.feed.title||t.feed.id))]),n("div",{staticClass:"feed-issue"},[e._v(e._s(e.getFeedIssueName(t.issue)))])]),n("div",{staticClass:"feed-info-row2"},[n("div",{staticClass:"feed-date"},[e._v(e._s(e.formatFeedDate(t.feed)))]),n("div",{staticClass:"feed-total-storys"},[n("span",[e._v(e._s(e.totalStorys(t.feed))+" 篇")])])])]),n("mu-switch",{staticClass:"feed-checkbox",attrs:{inputValue:t.feed.is_publish},on:{change:function(n){return e.onChangeFeed(t.feed,n)}}})],1)})):e._e()],2)})),0)}),bc=[],_c={name:"MoPublishConfigFeedList",props:{},data:function(){return{closedGroups:{}}},computed:{getFeedIssue:function(){return nu.getFeedIssue},getFeedIssueName:function(){return nu.getFeedIssueName},getFeedIssueLevel:function(){return nu.getFeedIssueLevel},feedGroups:function(){return nu.feedGroups}},methods:{isGroupOpen:function(e){return!this.closedGroups[e]},onToggleGroup:function(e){r["default"].set(this.closedGroups,e,!this.closedGroups[e])},sizeOfGroup:function(e){var t,n=e.items.length,r=0,i=Object(et["a"])(e.items);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.feed.is_publish&&(r+=1)}}catch(o){i.e(o)}finally{i.f()}return r>0?"".concat(r," / ").concat(n):"".concat(n)},getFeedGroupName:function(e){return nu.getFeedGroupName(e)},totalStorys:function(e){return nu.totalStorysText(e)},formatFeedDate:function(e){return nu.formatFeedDate(e)},onFeedClick:function(e){},onChangeFeed:function(e,t){vr.setPublish({feedId:e.id,is_publish:t})}}},wc=_c,kc=(n("fa20"),Object(Je["a"])(wc,yc,bc,!1,null,"e97a84ca",null)),xc=kc.exports,Cc=er.store({$name:"userPublish",$state:function(){return{config:{unionid:null,is_enable:!1,is_all_public:!1,root_url:null,website_title:null}}},doLoad:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.userPublish.get();case 2:n=t.sent,e.$patch({config:n});case 4:case"end":return t.stop()}}),t)})))()},doSave:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(i in r=Object(_e["a"])({},t.config),e)V()(e[i])||(r[i]=e[i]);return n.next=4,Mn.userPublish.set(r);case 4:s=n.sent,t.$patch({config:s});case 6:case"end":return n.stop()}}),n)})))()}}),Sc={name:"MoPublishConfigPage",components:{MoBackHeader:zi,MoLayout:Xe,MoPublishConfigFeedList:xc},data:function(){return{antTextWhite:Pe,antBlue:Le,antGold:Ee,isGuideDialogOpen:!1,form:{root_url:null,root_url_error:null,website_title:null,website_title_error:null}}},computed:{publishConfig:function(){return Cc.config},isShowFeedList:function(){return this.publishConfig.is_enable&&!this.publishConfig.is_all_public},publishUrl:function(){return this.publishConfig.root_url||"https://rss.example.com"},publishTarget:function(){return"https://rss.anyant.com"},publishHeaderValue:function(){return Cc.config.unionid||"your-publish-id"},publishHeader:function(){return"X-Rssant-Publish: ".concat(this.publishHeaderValue)},nginxConfig:function(){return'\nserver {\n    listen 80;\n    server_name  _;\n\n    location = / {\n        return 302 /rssant/;\n    }\n\n    location / {\n        proxy_pass https://rss.anyant.com;\n        proxy_set_header Host "rss.anyant.com";\n        proxy_set_header X-Rssant-Publish "'.concat(this.publishHeaderValue,'";\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n').trim()},caddyConfig:function(){return'\n:80 {\n    handle / {\n        redir / /rssant/\n    }\n\n    handle {\n        reverse_proxy https://rss.anyant.com {\n            header_up Host "rss.anyant.com"\n            header_up X-Rssant-Publish "'.concat(this.publishHeaderValue,'"\n        }\n    }\n}\n').trim()}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Cc.doLoad();case 2:return e.form.root_url=e.publishConfig.root_url,e.form.website_title=e.publishConfig.website_title,t.next=6,vr.sync();case 6:case"end":return t.stop()}}),t)})))()},methods:{openGuideDialog:function(){this.isGuideDialogOpen=!0},closeGuideDialog:function(){this.isGuideDialogOpen=!1},onSetIsEnable:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Cc.doSave({is_enable:e});case 2:t.$toast.success({message:"设置保存成功"});case 3:case"end":return n.stop()}}),n)})))()},onSetRootUrl:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Cc.doSave({root_url:e.form.root_url});case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),e.form.root_url_error=t.t0.message,t.abrupt("return");case 9:e.form.root_url_error=null,e.$toast.success({message:"设置保存成功"});case 11:case"end":return t.stop()}}),t,null,[[0,5]])})))()},onSetWebsiteTitle:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Cc.doSave({website_title:e.form.website_title});case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),e.form.website_title_error=t.t0.message,t.abrupt("return");case 9:e.form.website_title_error=null,e.$toast.success({message:"设置保存成功"});case 11:case"end":return t.stop()}}),t,null,[[0,5]])})))()},onSetAllPublic:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Cc.doSave({is_all_public:e});case 2:t.$toast.success({message:"设置保存成功"});case 3:case"end":return n.stop()}}),n)})))()}}},Oc=Sc,Ic=(n("56fa"),Object(Je["a"])(Oc,vc,gc,!1,null,"911422d2",null)),Lc=Ic.exports,Ec=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:"",border:"",solo:""}},[n("MoBackHeader",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("蚁阅")]},proxy:!0}])}),n("div",{staticClass:"main"},[n("div",{staticClass:"markdown-body"},[n("h3",{staticClass:"title"},[e._v(" 让 RSS 更好用 "),n("br"),e._v("轻松订阅你喜欢的博客和资讯 ")]),n("h4",{staticClass:"sub-title"},[e._v("主要特点")]),n("div",{staticClass:"center-wrapper"},[n("ul",[n("li",[e._v("全平台，无广告，无推荐，专注阅读")]),n("li",[e._v("支持全文阅读，支持播客和视频内容")]),n("li",[e._v("智能查找订阅源，智能裂图修复")]),n("li",[e._v("支持夜间模式，全球 RSS 均可订阅")]),n("li",[e._v("开源，开箱即用，也支持自己部署")])])]),n("MoContact"),n("div",{staticClass:"center footer-links"},[n("a",{staticClass:"link",attrs:{href:"https://github.com/anyant/rssant",target:"_blank"}},[e._v("GitHub开源")]),n("a",{staticClass:"link",attrs:{href:e.changelogUrl,target:"_blank"}},[e._v("更新日志")])])],1)])],1)},Rc=[],Tc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contact"},[n("h4",{staticClass:"sub-title"},[e._v("交流群和联系方式")]),e._m(0),e._m(1),n("div",{staticClass:"center"},[e._v(" 如不便添加微信，也可以邮件联系我："),n("br"),e._v(" "+e._s(e.contactEmail)+" ")])])},Fc=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"center"},[e._v(" 欢迎大家一起交流，请加我微信拉你进群"),n("br"),e._v("备注：RSS交流 ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"center"},[r("img",{attrs:{src:n("b182"),alt:"微信号:guyskk",width:"160",height:"160"}})])}],Mc="guyskk@anyant.com",Ac={data:function(){return{contactEmail:Mc}}},Pc=Ac,$c=(n("e322"),Object(Je["a"])(Pc,Tc,Fc,!1,null,"54a396ec",null)),Dc=$c.exports,jc=location.origin+"/changelog",Gc={components:{MoLayout:Xe,MoBackHeader:zi,MoContact:Dc},data:function(){return{changelogUrl:jc}}},Nc=Gc,Bc=(n("1ba9"),Object(Je["a"])(Nc,Ec,Rc,!1,null,"21d060e6",null)),Hc=Bc.exports,Uc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Vc=[],zc={mounted:function(){this.$router.replace("/register")}},qc=zc,Wc=Object(Je["a"])(qc,Uc,Vc,!1,null,null,null),Kc=Wc.exports,Jc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:"",border:""}},[n("MoBackHeader",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("蚁阅锦囊")]},proxy:!0}])}),n("div",{staticClass:"main"},[n("div",{staticClass:"markdown-body"},[n("h4",{staticClass:"sub-title"},[e._v("将蚁阅添加到主屏")]),n("div",{staticClass:"center"},[n("div",[e._v(" 获得和App一样沉浸式的体验 "),n("a",{attrs:{href:"https://www.yuque.com/guyskk/rssant/efvcls",target:"_blank"}},[e._v("查看教程")])]),e.isLikelySupportPWA?e._e():n("div",{staticClass:"pwa-tip"},[e._v("推荐用Chrome，Safari，火狐，或微软Edge 打开蚁阅")]),n("div",{staticClass:"button-wrapper"},[n("MoPWAButton")],1)]),n("h4",{staticClass:"sub-title"},[e._v("RSS阅读指南")]),n("div",{staticClass:"center"},[n("div",[e._v(" 一份帮你快速上手的 "),n("a",{attrs:{href:"https://www.yuque.com/guyskk/rssant/lmq3kk",target:"_blank"}},[e._v("RSS阅读指南")])])]),e.isVipEnable?[n("h4",{staticClass:"sub-title"},[e._v("蚁阅会员")]),n("div",{staticClass:"center"},[n("div",[e._v("会员可享受全部功能，订阅数量不限")]),n("div",[e._v("首月免费试用，到期后订阅将停止更新")]),n("div",{staticClass:"dt-avaliable",class:{"balance-notice":e.shouldNoticeVip}},[n("span",{staticClass:"label"},[e._v("会员到期时间:")]),n("span",{staticClass:"value"},[e._v(e._s(e.customerBalance))])]),n("div",{staticClass:"go-vip"},[n("MoAntGreenButton",{on:{click:e.goVip}},[e._v("充值或兑换")])],1)])]:e._e(),n("MoContact")],2)])],1)},Yc=[],Xc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pwa-button",on:{"!click":function(t){return t.stopPropagation(),t.preventDefault(),e.togglePWA(t)}}},[n("mu-checkbox",{attrs:{"uncheck-icon":e.hasPWA?"favorite_border":"help_outline","checked-icon":"favorite",label:e.isPWAEnable?"已添加到主屏":"添加到主屏","label-left":!0,ripple:!1},model:{value:e.isPWAEnable,callback:function(t){e.isPWAEnable=t},expression:"isPWAEnable"}})],1)},Qc=[],Zc={data:function(){return{hasPWA:di,isPWAEnable:be.PWA_ENABLE.get()}},methods:{togglePWA:function(){di?this.isPWAEnable?this.disablePWA():this.enablePWA():this.$alert("可以尝试用Chrome，Safari，火狐，或微软Edge 打开蚁阅。","当前浏览器不支持添加到主屏",{okLabel:"好的"})},enablePWA:function(){if(di){be.PWA_ENABLE.set(!0),this.isPWAEnable=!0;var e=function(e){return e("ol",null,[e("li",null,[e("span",null,'页面刷新后，浏览器可能会弹出 "将蚁阅添加到主屏" 提示，点击确认即可')]),e("li",null,[e("span",null,"如果没有弹出提示，可以从浏览器菜单将蚁阅添加到主屏")]),e("li",null,[e("span",null,'安卓系统上，浏览器可能需要 "桌面快捷方式" 权限，可以在系统设置中授权')]),e("li",null,[e("span",null,"如果使用中遇到问题，可尝试关闭此功能，清除浏览器缓存")])])};this.$alert(e,"将蚁阅添加到主屏",{className:"pwa-button-dialog",okLabel:"好的"}).then((function(){location.assign("/")}))}},disablePWA:function(){var e=this;di&&this.$confirm("关闭添加到主屏功能？",{okLabel:"确定",cancelLabel:"取消"}).then((function(t){var n=t.result;n&&(be.PWA_ENABLE.set(!1),e.isPWAEnable=!1,hi(),location.assign("/"))}))}}},ed=Zc,td=(n("d034"),n("6cfa"),Object(Je["a"])(ed,Xc,Qc,!1,null,"60bfb04d",null)),nd=td.exports,rd={components:{MoLayout:Xe,MoBackHeader:zi,MoPWAButton:nd,MoAntGreenButton:Ho,MoContact:Dc},data:function(){return{isLikelySupportPWA:li()}},computed:{isVipEnable:function(){return wi.isVipEnable},customerBalance:function(){return wi.balanceText},shouldNoticeVip:function(){return wi.shouldNoticeVip}},mounted:function(){},methods:{goVip:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.openVipHomeLink();case 2:case"end":return e.stop()}}),e)})))()}}},id=rd,sd=(n("d4d5"),Object(Je["a"])(id,Jc,Yc,!1,null,"4d9b2d40",null)),od=sd.exports,ad=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h2",[e._v("页面不存在")]),n("p",[n("router-link",{attrs:{replace:"",to:"/"}},[e._v("返回首页")])],1)])},ud=[],cd=(n("60a2"),{}),dd=Object(Je["a"])(cd,ad,ud,!1,null,"16ee359a",null),ld=dd.exports,fd=[{path:"account",name:"Account",component:mc,meta:{loginRequired:!0}},{path:"help",name:"Help",component:od,meta:{loginRequired:!0}},{path:"feed-creation",name:"FeedCreation",component:Na,meta:{loginRequired:!0}},{path:"feed-clean",name:"FeedClean",component:ou,meta:{loginRequired:!0}},{path:"favorited",name:"Favorited",component:Ji,meta:{loginRequired:!0}},{path:"creation-detail",name:"CreationDetail",component:as,meta:{loginRequired:!0}},{path:"feed",name:"StoryList",component:no,meta:{loginRequired:!0}},{path:"mushroom",name:"Mushroom",component:uo,meta:{loginRequired:!0}},{path:"mushroom-detail",name:"MushroomDetail",component:mo,meta:{loginRequired:!0}},{path:"group",name:"FeedGroup",component:wo,meta:{loginRequired:!0}},{path:"group-detail",name:"FeedGroupDetail",component:Ao,meta:{loginRequired:!0}},{path:"story",name:"Story",component:Ru,meta:{loginRequired:!0}},{path:"feed-detail",name:"FeedDetail",component:Du,meta:{loginRequired:!0}},{path:"publish-config",name:"PublishConfig",component:Lc,meta:{loginRequired:!0}}],hd=fd.map((function(e){var t=Object(_e["a"])({},e);return t.path="/"+e.path,t})),pd=[{path:"/",name:"Home",component:Di,meta:{loginRequired:!0},children:He?fd:[]},{path:"/about",name:"About",component:Hc},{path:"/hello",name:"Hello",component:Kc},{path:"/login",name:"Login",component:ia},{path:"/register",name:"Register",component:da},{path:"/account-confirm-email/:key",name:"AccountConfirmEmail",component:Uu},{path:"/reset-password",name:"ResetPassword",component:Ju},{path:"/reset-password/:uid",name:"ResetPasswordConfirm",component:tc}];He||hd.forEach((function(e){return pd.push(e)})),pd.push({path:"*",component:ld});var md=pd,vd=["MoHomePage","MoMushroomPage","MoAccountPage","MoFeedCreationPage"];function gd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fallback;e._numRouteVistied=-1,e.safeBack=function(){e._numRouteVistied<1?e.replace(n||"/"):e.back()},e.beforeEach((function(t,n,r){e._numRouteVistied<1&&(e._numRouteVistied+=1),r()}))}function yd(){var e=new i["a"]({mode:"history",base:"/",routes:md});return gd(e),e.beforeEach((function(e,t,n){var r=e.matched.some((function(e){return e.meta.loginRequired})),i=function(e){var t=e.response;if(V()(t)&&V()(e.status))return s();if(t&&t.status>=500)return N["a"].error(e.message),n(!1);var r=be.HAS_LOGIN_HISTORY.get();n({path:r?"/login":"/register",replace:!0})},s=function(){return n()};r?wi.login().then(s).catch(i):wi.login().then((function(){var t="Login"===e.name||"Register"===e.name||"Hello"===e.name;t?n({path:"/",replace:!0}):s()})).catch(s)})),e}var bd={data:function(){return{keepAlivePages:vd}},created:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},_d=bd,wd=(n("7c55"),Object(Je["a"])(_d,ce,de,!1,null,null,null)),kd=wd.exports,xd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"timeit"}}),n("keep-alive",[n("router-view")],1)],1)},Cd=[],Sd={data:function(){return{}},created:function(){return Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},Od=Sd,Id=(n("3413"),Object(Je["a"])(Od,xd,Cd,!1,null,null,null)),Ld=Id.exports,Ed=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"publish-home-page",class:e.pageClasses},[n("div",{staticClass:"story-image-viewer"}),e.isReady?[n("MoBackHeader",{attrs:{isHome:e.isHome,border:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("MoDebugTool",{staticClass:"title",on:{click:e.onClickTitle}},[e._v(e._s(e.title))])]},proxy:!0}],null,!1,1009053536)},[e.isPageFeed||e.isPageStory?n("mu-button",{staticClass:"action-detail",attrs:{icon:""},on:{click:e.goFeedDetail}},[n("fa-icon",{attrs:{size:"18",icon:"info-circle"}})],1):e._e()],1),n("MoLayout",{staticClass:"main",style:e.mainStyle,attrs:{grey:"",header:""}},[n("PubFeedList",{staticClass:"feed-list",attrs:{currentFeedId:e.currentFeedId,isMobile:!e.isWide}}),e.showRssantPlaceholder?n("MoBrandPlaceholder"):e._e(),e.feed?n("PubStoryList",{staticClass:"story-list",attrs:{currentFeedId:e.currentFeedId,currentOffset:e.currentOffset,isMobile:!e.isWide}}):e._e(),e.story?n("PubStoryDetail",{staticClass:"story-detail",attrs:{currentFeedId:e.currentFeedId,currentOffset:e.currentOffset,"image-viewer-container-getter":e.imageViewerContainerGetter}}):e._e()],1)]:e._e(),e.isPublishDisable?[e._m(0)]:e._e()],2)},Rd=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"disable-notice"},[n("div",{staticClass:"line line1"},[e._v("RSS发布订阅功能未开启")]),n("div",{staticClass:"line line2"},[e._v("如有疑问请联系网站管理员")])])}],Td=n("5e37"),Fd=n.n(Td);n("07ac");function Md(e){var t={};return Object.assign(t,e),t=hr(t),t=pr(t),t}var Ad=er.store({$name:"publishFeed",$state:function(){return{loading:new an,feedMap:{}}},get isLoading(){return this.loading.isLoading},get feedList(){return or(Object.values(this.feedMap))},get:function(e){return this.feedMap[e]},getFirstFeedId:function(){return this.feedList.length<=0?null:this.feedList[0].id},doLoad:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loading.begin(Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,An.publish.feedQuery();case 2:n=t.sent,r={},n.feeds.forEach((function(e){r[e.id]=Md(e)})),e.$patch({feedMap:r,isLoaded:!0});case 6:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},doGet:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.id,s=e.detail,n.next=3,An.publish.feedGet({id:i,detail:s});case 3:o=n.sent,t.$patch((function(e){r["default"].set(e.feedMap,o.id,o)}));case 5:case"end":return n.stop()}}),n)})))()},doGetDetail:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.id,i=t.get(r),V()(i)){n.next=5;break}if(!(i.link||i.encoding||i.dt_checked)){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,t.doGet({id:r,detail:!0});case 7:case"end":return n.stop()}}),n)})))()}}),Pd=er.store({$name:"publishStory",$state:function(){return{loadedOffsetBegin:{},loadedOffsetEnd:{},storyMap:{},initCallback:null}},get:function(e){var t=e.feedId,n=e.offset;return me()(this.storyMap[t],{})[n]},getListByFeed:function(e){var t=this.storyMap[e];return V()(t)?[]:Qt()(Yt()(qt()(t),["offset"]))},getLoadedOffset:function(e){var t=this.loadedOffsetBegin[e],n=this.loadedOffsetEnd[e];return{begin:t,end:n}},getFirstStoryOffset:function(e){var t=this.getListByFeed(e);return t.length<=0?null:t[0].offset},doLoad:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,s=e.detail,n.next=3,An.publish.storyGet({feed_id:r,offset:i,detail:s});case 3:o=n.sent,t._addOrUpdate(o);case 5:case"end":return n.stop()}}),n)})))()},doLoadDetail:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.feedId,i=e.offset,s=t.get({feedId:r,offset:i}),V()(s)){n.next=5;break}if(!s.content){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,t.doLoad({feedId:r,offset:i,detail:!0});case 7:case"end":return n.stop()}}),n)})))()},doLoadList:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o,a,u,c,d,l,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.feedId,i=e.offset,s=e.detail,o=e.size,a=e.resetLoadedOffset,u=e.isInit,u&&(c=Ad.get(r).total_storys,i=Math.max(0,Math.min(i,c-Lr)),o=Math.max(o,Lr)),n.next=4,An.publish.storyQuery({feed_id:r,offset:i,detail:s,size:o});case 4:d=n.sent,a&&t._resetLoadedOffset(r),l=me()(t.storyMap[r],{}),f=Rr(d.storys,l),t._addOrUpdateList({feedId:r,storys:f}),t._updateLoadedOffset({feedId:r,begin:i,end:i+o-1}),u&&!V()(t.initCallback)&&(t.initCallback(),t.$patch({initCallback:null}));case 11:case"end":return n.stop()}}),n)})))()},setInitCallback:function(e){this.$patch({initCallback:e})},_addOrUpdate:function(e){this.$patch((function(t){var n=t.storyMap[e.feed.id];V()(n)&&(r["default"].set(t.storyMap,e.feed.id,{}),n=t.storyMap[e.feed.id]),Fr(n,e)}))},_resetLoadedOffset:function(e){this.$patch((function(t){r["default"].delete(t.loadedOffsetBegin,e),r["default"].delete(t.loadedOffsetEnd,e)}))},_addOrUpdateList:function(e){var t=e.feedId,n=e.storys;this.$patch((function(e){if($t()(t))n.forEach((function(t){var n=e.storyMap[t.feed.id];V()(n)&&(r["default"].set(e.storyMap,t.feed.id,{}),n=e.storyMap[t.feed.id]),Fr(n,t)}));else{var i=e.storyMap[t];V()(i)&&(r["default"].set(e.storyMap,t,{}),i=e.storyMap[t]),n.forEach((function(e){Fr(i,e)}))}}))},_updateLoadedOffset:function(e){var t=e.feedId,n=e.begin,i=e.end;this.$patch((function(e){var s=e.loadedOffsetBegin[t];(V()(s)||n<s)&&r["default"].set(e.loadedOffsetBegin,t,n);var o=e.loadedOffsetEnd[t];(V()(o)||i>o)&&r["default"].set(e.loadedOffsetEnd,t,i)}))}}),$d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"story-list",class:{mobile:e.isMobile,wide:!e.isMobile}},e._l([e.feed],(function(t){return n("MoScrollList",{key:t.id,staticClass:"scroll-list",attrs:{itemSize:e.isMobile?48:40,reversed:"",items:e.storyList,"init-offset":e.currentOffset,"begin-offset":e.beginOffset,"end-offset":e.endOffset,total:t.total_storys,load:e.loadStorys}},e._l(e.storyList,(function(t){return n("MoStoryItem",{key:t.feed.id+"-"+t.offset,staticClass:"story-item",class:{active:e.isActiveStory(t.feed.id,t.offset)},attrs:{feedId:t.feed.id,offset:t.offset,story:t,solo:""},on:{click:function(n){return e.onClickStory(t.feed.id,t.offset)}}})})),1)})),1)},Dd=[],jd={components:{MoStoryItem:Bs,MoScrollList:Js},props:{currentFeedId:{type:String},currentOffset:{type:Number},isMobile:{type:Boolean,default:!1}},computed:{feed:function(){return V()(this.currentFeedId)?null:Ad.get(this.currentFeedId)},storyList:function(){return V()(this.currentFeedId)?[]:Pd.getListByFeed(this.currentFeedId)},beginOffset:function(){return V()(this.currentFeedId)?null:Pd.getLoadedOffset(this.currentFeedId).begin},endOffset:function(){return V()(this.currentFeedId)?null:Pd.getLoadedOffset(this.currentFeedId).end}},methods:{isActiveStory:function(e,t){return e===this.currentFeedId&&t===this.currentOffset},loadStorys:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.offset,i=e.size,s=e.resetLoadedOffset,o=e.isInit,n.next=3,Pd.doLoadList({feedId:t.currentFeedId,offset:r,detail:!0,size:i,resetLoadedOffset:s,isInit:o});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},onClickStory:function(e,t){var n=this;return Object(le["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e!==n.currentFeedId||t!==n.currentOffset){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Pd.doLoadDetail({feedId:e,offset:t});case 4:V()(n.currentOffset)?n.$router.push({query:{feed:e,offset:t}}):n.$router.replace({query:{feed:e,offset:t}});case 5:case"end":return r.stop()}}),r)})))()}}},Gd=jd,Nd=(n("01dd"),Object(Je["a"])(Gd,$d,Dd,!1,null,"1155863f",null)),Bd=Nd.exports,Hd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-list",class:{mobile:e.isMobile,wide:!e.isMobile}},[e.isLoading?n("div",{staticClass:"list-placeholder-wrapper"},[e._m(0)]):e._e(),e.isLoading||e.isEmpty?e._e():n("transition-group",{staticClass:"list",attrs:{name:"list",tag:"div"}},e._l(e.feedList,(function(t){return n("MoFeedItem",{key:t.id,staticClass:"feed-item",class:{active:e.isActiveFeed(t.id)},attrs:{title:t.title,number:t.total_storys,date:t.dt_latest_story_published||t.dt_created,link:t.id,routeTo:e.onClickFeed}})})),1),!e.isLoading&&e.isEmpty?[e._m(1)]:e._e()],2)},Ud=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-placeholder spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty-notice"},[n("div",{staticClass:"line line1"},[e._v("无公开的订阅")])])}],Vd={components:{MoFeedItem:Ot},props:{currentFeedId:{type:String},isMobile:{type:Boolean,default:!1}},computed:{feedList:function(){return Ad.feedList},isLoading:function(){return Ad.isLoading},isEmpty:function(){return this.feedList.length<=0}},methods:{isActiveFeed:function(e){return e===this.currentFeedId},onClickFeed:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e!==t.currentFeedId){n.next=2;break}return n.abrupt("return");case 2:t.$router.push({query:{feed:e}});case 3:case"end":return n.stop()}}),n)})))()}}},zd=Vd,qd=(n("2fa0"),Object(Je["a"])(zd,Hd,Ud,!1,null,"3d3baf50",null)),Wd=qd.exports,Kd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"story-detail"},e._l([e.story],(function(t){return n("MoStoryContent",{key:t.feed.id+"-"+t.offset,ref:"contentRef",refInFor:!0,staticClass:"story-content",attrs:{story:t,"next-feed":e.feed,"next-story":e.nextStory,gotoNextStory:e.gotoNextStory,"show-next-feed-title":!1,"image-viewer-container-getter":e.imageViewerContainerGetter}})})),1)},Jd=[],Yd={components:{MoStoryContent:Ou},props:{currentFeedId:{type:String},currentOffset:{type:Number},imageViewerContainerGetter:{type:Function}},computed:{feed:function(){return V()(this.currentFeedId)?null:Ad.get(this.currentFeedId)},story:function(){return V()(this.currentFeedId)||V()(this.currentOffset)?null:Pd.get({feedId:this.currentFeedId,offset:this.currentOffset})},nextStory:function(){return this.story?Pd.get({feedId:this.currentFeedId,offset:this.currentOffset-1}):null}},methods:{gotoNextStory:function(){var e=this.nextStory;if(!V()(e)){Pd.doLoadDetail({feedId:e.feed.id,offset:e.offset});var t={query:{feed:e.feed.id,offset:e.offset}};this.$router.replace(t)}}}},Xd=Yd,Qd=(n("1869"),Object(Je["a"])(Xd,Kd,Jd,!1,null,"23d3d88a",null)),Zd=Qd.exports,el={components:{MoBackHeader:zi,MoDebugTool:ft,MoLayout:Xe,PubStoryList:Bd,PubFeedList:Wd,PubStoryDetail:Zd,MoBrandPlaceholder:Mi},data:function(){return{isReady:!1}},computed:{isWide:function(){return Be.isWide},isPageHome:function(){return V()(this.currentFeedId)&&V()(this.currentOffset)},isPageFeed:function(){return!V()(this.currentFeedId)&&V()(this.currentOffset)},isPageStory:function(){return!V()(this.currentFeedId)&&!V()(this.currentOffset)},pageClasses:function(){return{"is-wide":this.isWide,"not-wide":!this.isWide,"is-page-home":this.isPageHome,"is-page-feed":this.isPageFeed,"is-page-story":this.isPageStory}},mainStyle:function(){return{width:"100%",maxWidth:"100%",position:"absolute",left:0,top:0,bottom:0,overflow:"auto"}},currentFeedId:function(){var e=this.$route.query.feed;return e||null},currentOffset:function(){if(V()(this.currentFeedId))return null;var e=this.$route.query.offset;return V()(e)?null:Fd()(e)},isHome:function(){return!!this.isWide||this.isPageHome},feed:function(){return V()(this.currentFeedId)?null:Ad.get(this.currentFeedId)},story:function(){return V()(this.currentFeedId)||V()(this.currentOffset)?null:Pd.get({feedId:this.currentFeedId,offset:this.currentOffset})},isPublishDisable:function(){return $s.isLoaded&&!$s.config.is_enable},websiteTitle:function(){return $s.websiteTitle},feedTitle:function(){var e;return(null===(e=this.feed)||void 0===e?void 0:e.title)||this.currentFeedId},storyTitle:function(){var e,t=this.feedTitle,n=null===(e=this.story)||void 0===e?void 0:e.title;return t&&n?"".concat(t," - ").concat(n):n||t},title:function(){return this.isHome?this.websiteTitle:this.isPageFeed?this.feedTitle:this.isPageStory?this.storyTitle:this.websiteTitle},showRssantPlaceholder:function(){return this.isWide&&this.isPageHome&&!this.feed&&!this.story}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$s.doLoad();case 2:if(window.document.title=$s.websiteTitle,$s.config.is_enable){t.next=5;break}return t.abrupt("return");case 5:return e.isReady=!0,t.next=8,Ad.doLoad();case 8:if(V()(e.currentFeedId)||V()(e.currentOffset)){t.next=11;break}return t.next=11,Pd.doLoadDetail({feedId:e.currentFeedId,offset:e.currentOffset});case 11:e.isWide&&e.setupInitFeedAndStory();case 12:case"end":return t.stop()}}),t)})))()},methods:{setupInitFeedAndStory:function(){var e=this,t=null;V()(this.currentFeedId)&&(t=Ad.getFirstFeedId(),V()(t)||this.$router.push({query:{feed:t}})),!V()(t)&&V()(this.currentOffset)&&Pd.setInitCallback(Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=Pd.getFirstStoryOffset(t),!V()(r)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Pd.doLoadDetail({feedId:t,offset:r});case 5:e.$router.push({query:{feed:t,offset:r}});case 6:case"end":return n.stop()}}),n)}))))},imageViewerContainerGetter:function(){return this.$el.querySelector(".story-image-viewer")},goFeedDetail:function(){this.$router.push({name:"PubFeedDetailPage",query:{id:this.currentFeedId}})},onClickTitle:function(){this.isWide&&!this.isPageHome&&this.$router.push({name:"PubHomePage"})}}},tl=el,nl=(n("8f70"),Object(Je["a"])(tl,Ed,Rd,!1,null,"4ebb29a0",null)),rl=nl.exports,il=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MoLayout",{attrs:{header:""}},[n("MoBackHeader",{attrs:{border:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.feedTitle))]},proxy:!0}])}),n("div",{staticClass:"feed-info"},e._l(e.feedInfo,(function(e){return n("MoFeedDetailInfoItem",{key:e.name,attrs:{name:e.name,type:e.type,value:e.value}})})),1)],1)},sl=[],ol=[{name:"标题",key:"title"},{name:"状态",key:function(e){var t="".concat(me()(e.status,"")," / ").concat(me()(e.response_status,""));return $t()(e.response_status_name)||(t="".concat(t," / ").concat(e.response_status_name)),t},type:"status"},{name:"异常",key:"warnings",process:function(e){return $t()(e)?"无":e}},{name:"主页",key:"link",type:"link"},{name:"简介",key:"description"},{name:"作者",key:"author"},{name:"供稿地址",key:"url",type:"link"},{name:"供稿格式",key:"version"},{name:"故事总数",key:"total_storys",type:"number"},{name:"发布周期",key:"dryness",process:function(e){if(V()(e))return"未知";var t=256/Math.pow(2,8*e/1e3)-1,n=31/(t+1);return n>=1?"约 ".concat(n.toFixed(0)," 天"):"小于 1 天"}},{name:"最老故事发布时间",key:"dt_first_story_published",type:"datetime"},{name:"最新故事发布时间",key:"dt_latest_story_published",type:"datetime"},{name:"创建时间",key:"dt_created",type:"datetime"},{name:"更新时间",key:"dt_updated",type:"datetime"},{name:"检查时间",key:"dt_checked",type:"datetime"},{name:"同步时间",key:"dt_synced",type:"datetime"}],al={components:{MoBackHeader:zi,MoLayout:Xe,MoFeedDetailInfoItem:rs},data:function(){return{}},mounted:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ad.doGetDetail({id:e.feedId});case 2:case"end":return t.stop()}}),t)})))()},computed:{feedId:function(){return this.$route.query.id},feed:function(){return Ad.get(this.feedId)},feedTitle:function(){return V()(this.feed)?"":this.feed.title},feedInfo:function(){var e=this.feed;V()(e)&&(e={id:this.feedId,title:this.feedTitle});var t=[];return ol.forEach((function(n){var r={name:n.name,type:n.type};sn()(n.key)?r.value=n.key(e):r.value=e[n.key],V()(n.process)||(r.value=n.process(r.value)),"datetime"===n.type?r.value=kt(r.value):"boolean"===n.type&&(r.value=r.value?"是":"否"),t.push(r)})),t}},methods:{}},ul=al,cl=(n("e14b"),Object(Je["a"])(ul,il,sl,!1,null,"40d08942",null)),dl=cl.exports,ll=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h2",[e._v("页面不存在")]),n("p",[n("router-link",{attrs:{replace:"",to:"/"}},[e._v("返回首页")])],1)])},fl=[],hl=(n("9e91"),{}),pl=Object(Je["a"])(hl,ll,fl,!1,null,"46b2ca96",null),ml=pl.exports,vl=[{path:"/",name:"PubHomePage",component:rl},{path:"/feed-detail",name:"PubFeedDetailPage",component:dl},{path:"*",component:ml}];function gl(){var e=new i["a"]({mode:"history",base:"/rssant/",routes:vl,strict:!0});return gd(e,{fallback:"/"}),e}var yl=n("3852"),bl=n.n(yl),_l=er.store({$name:"page",$state:{pages:{}},setPage:function(e,t){this.$patch((function(n){r["default"].set(n.pages,e,t)}))},getPage:function(e){return this.pages[e]}});function wl(e){return V()(e)||V()(e.$el)||(e=e.$el),e}function kl(e){var t=e.pageState,n=e.el,r=e.key;if(n=wl(n),V()(n))return null;var i=n.scrollTop;return t.set(me()(r,"scrollTop"),i),i}function xl(e,t){return e=wl(e),!V()(e)&&!V()(t)&&t>=0&&(e.scrollTo(0,t),!0)}function Cl(e){var t=e.pageState,n=e.el,r=e.key,i=t.get(me()(r,"scrollTop"));return xl(n,i)}var Sl=function(){function e(t){Object(tn["a"])(this,e),this._vid=t,this._data={}}return Object(nn["a"])(e,[{key:"get",value:function(e){if(bl()(this._data,e))return this._data[e];var t=_l.getPage(this._vid);return V()(t)?null:t[e]}},{key:"set",value:function(e,t){this._data[e]=t}},{key:"commit",value:function(){_l.setPage(this._vid,this._data)}},{key:"saveScrollTop",value:function(e){var t=e.el,n=e.key;return kl({pageState:this,el:t,key:n})}},{key:"restoreScrollTop",value:function(e){var t=e.el,n=e.key;return Cl({pageState:this,el:t,key:n})}}]),e}(),Ol=function(){function e(){Object(tn["a"])(this,e),this._data={}}return Object(nn["a"])(e,[{key:"get",value:function(e){return this._data[e]}},{key:"set",value:function(e,t){this._data[e]=t}},{key:"commit",value:function(){}},{key:"saveScrollTop",value:function(e){var t=e.el,n=e.key;return kl({pageState:this,el:t,key:n})}},{key:"restoreScrollTop",value:function(e){var t=e.el,n=e.key;return Cl({pageState:this,el:t,key:n})}}]),e}();function Il(e){e.$children.forEach((function(e){Il(e)}));var t=e.$options.savePageState;V()(t)||t.apply(e)}var Ll={props:{vid:{type:String,required:!1}},computed:{$pageState:function(){var e=this.vid;return $t()(e)&&(e=this.computedVid),$t()(e)?new Ol:new Sl(e)}},beforeRouteLeave:function(e,t,n){Il(this),n()}},El=function(){return/(\$\$[\s\S]+?\$\$)|(\\\[[\s\S]+?\\\])|(\\\([\s\S]+?\\\))/m},Rl=function(){return/(\\\([\s\S]+?\\\))|(\$[\s\S]+?\$(?!(?:(?![\t-\r <\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])))/m},Tl=function(){return/(\$\$[\s\S]+?\$\$)|(\\\[[\s\S]+?\\\])/m};function Fl(e){return El().test(e)}function Ml(e){return Rl().test(e)}function Al(e){return Tl().test(e)}function Pl(){return!V()(window.MathJax)&&!V()(window.MathJax.Hub)&&window.MathJax.isReady}var $l=!0,Dl={};function jl(e){if(!$t()(e)){var t,n=e.split(/\s+/g),r=Object(et["a"])(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(Dl[i.toLowerCase()])return!0}}catch(s){r.e(s)}finally{r.f()}}return!1}["asciimath2jax_ignore","tex2jax_ignore","mathjax_ignore","asciimath2jax-ignore","tex2jax-ignore","mathjax-ignore"].forEach((function(e){Dl[e]=!0}));var Gl=["mathoverflow.net"],Nl={};function Bl(e){if(V()(e)||""===e)return null;var t;try{t=new URL(e).hostname}catch(r){return null}if(!t)return null;var n=t.split(".");return n.length<2?null:n.slice(n.length-2,n.length).join(".")}function Hl(e){var t=Bl(e);return!!t&&!!Nl[t]}Gl.forEach((function(e){Nl[e]=!0}));var Ul={install:function(e){function t(e,t){e.querySelectorAll("code,pre").forEach((function(e){if(!jl(e.className)){var t=e.innerHTML,n=Ml(t),r=Al(t);(n||r)&&(e.outerHTML=n?'<span class="story-render-mathjax">'+t+"</span>":'<p class="story-render-mathjax">'+t+"</p>")}}));try{$l||MathJax.Hub.Queue(["resetEquationNumbers",MathJax.InputJax.TeX,t],["PreProcess",MathJax.Hub,t],["Reprocess",MathJax.Hub,t]),$l=!1,MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}catch(n){console.warn("MathJax "+n)}}function n(e,n){if(Pl())window._MathJaxStoryRender=null,t(e,n);else{var r=window.location.href;window._MathJaxStoryRender=function(){window._MathJaxStoryRender=null,window.location.href===r&&t(e,n)}}}e.directive("story",(function(e,t){var r=V()(t.value)?"":t.value.content,i=V()(t.oldValue)?"":t.oldValue.content;if(r!==i){var s=(r||"").trim(),o=Fl(s)||Hl(t.value.link);e.innerHTML=s,V()(t.value)||V()(t.value.callback)||t.value.callback(e),o&&!$t()(e.id)&&n(e,e.id)}}))}},Vl=Ul,zl=(n("8567"),n("efa6")),ql=n.n(zl);ql.a.add("rssant",{primary:Le,secondary:Re,success:Ie,warning:Ee,info:Le,error:Re,text:{primary:Fe,secondary:Me,alternate:Pe,disabled:Ae,hint:Ae},divider:Ge,background:{paper:$e,chip:je,default:$e}},"light"),ql.a.use("rssant");n("466d");var Wl=window,Kl=Wl.initREM=function(e,t,n){var r=t||100,i=n||1,s=Wl.document,o=navigator.userAgent,a=o.match(/Android[\S\s]+AppleWebkit\/(\d{3})/i),u=o.match(/U3\/((\d+|\.){5,})/i),c=u&&parseInt(u[1].split(".").join(""),10)>=80,d=navigator.appVersion.match(/(iphone|ipad|ipod)/gi),l=Wl.devicePixelRatio||1;d||a&&a[1]>534||c||(l=1);var f=e?1:1/l,h=function(){var t=s.querySelector('meta[name="viewport"]');t||(t=s.createElement("meta"),t.setAttribute("name","viewport"),s.head.appendChild(t)),t.setAttribute("content","width=device-width,user-scalable=no,initial-scale=".concat(f,",maximum-scale=").concat(f,",minimum-scale=").concat(f)),s.documentElement.style.fontSize="".concat(e?r/2:r/2*l*i,"px")};s.addEventListener("DOMContentLoaded",h),Wl.addEventListener("orientationchange"in window?"orientationchange":"resize",h)};function Jl(){var e=window.location.pathname;return e.startsWith("/rssant/")}function Yl(){if(Jl()){var e=gl();return new r["default"]({el:"#app",router:e,store:er.vuexStore,render:function(e){return e(Ld)}})}var t=yd();return new r["default"]({el:"#app",router:t,store:er.vuexStore,render:function(e){return e(kd)}})}mi(),Kl(!0,32,1),ue.init(),r["default"].config.productionTip=!1,r["default"].use(i["a"]),r["default"].prototype.$LAYOUT=Be,r["default"].mixin(Ll),r["default"].use(Vl),r["default"].component("mescroll",X["a"]),window.app=Yl(),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("rssant-spinner");void 0!==e&&null!==e&&e.remove();var t=document.getElementById("rssant-dark-mode-style");void 0!==t&&null!==t&&t.remove()}))},"56fa":function(e,t,n){"use strict";n("e8dd")},"59e3":function(e,t,n){"use strict";n("4e86")},"5a2c":function(e,t,n){},"5c15":function(e,t,n){},"5dfd":function(e,t,n){"use strict";n("843f")},"60a2":function(e,t,n){"use strict";n("d2a3")},"6a6f":function(e,t,n){},"6a8b":function(e,t,n){},"6ac1":function(e,t,n){"use strict";n("8df5")},"6cfa":function(e,t,n){"use strict";n("0b52")},"6ee9":function(e,t,n){},"6f73":function(e,t,n){},"744b":function(e,t,n){"use strict";n("29ea")},7535:function(e,t,n){"use strict";n("90dd")},"78b3":function(e,t,n){"use strict";n("6ee9")},"7b36":function(e,t,n){"use strict";n("d173")},"7bee":function(e,t,n){},"7c55":function(e,t,n){"use strict";n("2395")},"7df7":function(e,t,n){"use strict";n("303a")},"7e56":function(e,t,n){},8109:function(e,t,n){"use strict";n("bf8f")},8199:function(e,t,n){"use strict";n("2993")},"843f":function(e,t,n){},8452:function(e,t,n){"use strict";n("5c15")},"847f":function(e,t,n){},8567:function(e,t,n){},8589:function(e,t,n){},8626:function(e,t,n){},"895b":function(e,t,n){"use strict";n("e082")},"8d8f":function(e,t,n){},"8df5":function(e,t,n){},"8f70":function(e,t,n){"use strict";n("ce9c")},"8f9b":function(e,t,n){},"90dd":function(e,t,n){},"94bc":function(e,t,n){},9624:function(e,t,n){},9630:function(e,t,n){"use strict";n("2499")},"976f":function(e,t,n){},"9add":function(e,t,n){"use strict";n("7e56")},"9bd6":function(e,t,n){"use strict";n("1c18")},"9c09":function(e,t,n){},"9d58":function(e,t,n){},"9e91":function(e,t,n){"use strict";n("f73c")},a04e:function(e,t,n){"use strict";n("0059")},a522:function(e,t,n){"use strict";n("a7c1")},a5fa:function(e,t,n){"use strict";n("f4cb")},a7c1:function(e,t,n){},ab51:function(e,t,n){},b182:function(e,t,n){e.exports=n.p+"img/guyskk-qrcode.d2ed696c.jpg"},b330:function(e,t,n){"use strict";n("5516")},b35b:function(e,t,n){},bc39:function(e,t,n){"use strict";n("39bf")},be97:function(e,t,n){"use strict";n("5259")},bf8f:function(e,t,n){},c498:function(e,t,n){"use strict";n("7bee")},c764:function(e,t,n){"use strict";n("3b4b")},c86b:function(e,t,n){},ce9c:function(e,t,n){},d034:function(e,t,n){"use strict";n("3af9")},d173:function(e,t,n){},d235:function(e,t,n){},d2a3:function(e,t,n){},d4d5:function(e,t,n){"use strict";n("d235")},d81e:function(e,t,n){"use strict";n("5a2c")},dcdc:function(e,t,n){"use strict";n("847f")},ddee:function(e,t,n){},e082:function(e,t,n){},e14b:function(e,t,n){"use strict";n("b35b")},e322:function(e,t,n){"use strict";n("02f3")},e544:function(e,t,n){},e640:function(e,t,n){},e8dd:function(e,t,n){},ebe7:function(e,t,n){"use strict";n("4d54")},edba:function(e,t,n){},f221:function(e,t,n){},f4cb:function(e,t,n){},f73c:function(e,t,n){},fa20:function(e,t,n){"use strict";n("c86b")},fc68:function(e,t,n){"use strict";n("6f73")},fd89:function(e,t,n){"use strict";n("9c09")}});
//# sourceMappingURL=app.29a02d24.js.map