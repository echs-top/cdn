"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[7341],{47341:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var i=s(12162),a=s(98496),n=s(28093),p=s(45558),m=s(51861),o=s(10428),r=s(93090),l=s(49450);const u=()=>{const{t:t}=(0,a.B)("translation",{keyPrefix:"admin.smtp"}),e=(0,n.dj)(),{data:s}=(0,p.oh)(),u={title:t("page_title"),properties:{from_email:{type:"string",title:t("from_email.label"),description:t("from_email.text")},from_name:{type:"string",title:t("from_name.label"),description:t("from_name.text")},smtp_host:{type:"string",title:t("smtp_host.label"),description:t("smtp_host.text")},encryption:{type:"string",title:t("encryption.label"),description:t("encryption.text"),enum:["TLS","SSL",""],enumNames:["TLS","SSL","None"]},smtp_port:{type:"string",title:t("smtp_port.label"),description:t("smtp_port.text")},smtp_authentication:{type:"boolean",title:t("smtp_authentication.title"),enum:[!0,!1],enumNames:[t("smtp_authentication.yes"),t("smtp_authentication.no")]},smtp_username:{type:"string",title:t("smtp_username.label")},smtp_password:{type:"string",title:t("smtp_password.label")},test_email_recipient:{type:"string",title:t("test_email_recipient.label"),description:t("test_email_recipient.text")}}},_={from_email:{"ui:options":{inputType:"email"}},encryption:{"ui:widget":"select"},smtp_username:{"ui:options":{validator:(e,s)=>!(s.smtp_authentication.value&&!e)||t("smtp_username.msg")}},smtp_password:{"ui:options":{inputType:"password",validator:(e,s)=>!(s.smtp_authentication.value&&!e)||t("smtp_password.msg")}},smtp_authentication:{"ui:widget":"switch","ui:options":{label:t("smtp_authentication.label")}},smtp_port:{"ui:options":{inputType:"number",validator:e=>!(!/^[1-9][0-9]*$/.test(e)||Number(e)>65535)||t("smtp_port.msg")}},test_email_recipient:{"ui:options":{inputType:"email",validator:e=>!(e&&!m.A.email.test(e))||t("test_email_recipient.msg")}}},[c,d]=(0,i.useState)((0,o.pw)(u));(0,i.useEffect)((()=>{if(!s)return;const t={};Object.keys(s).forEach((e=>{t[e]={...c[e],value:s[e]}})),d({...c,...t})}),[s]),(0,i.useEffect)((()=>{/true|false/.test(c.smtp_authentication.value)&&(c.smtp_authentication.value?d({...c,smtp_username:{...c.smtp_username,hidden:!1},smtp_password:{...c.smtp_password,hidden:!1}}):d({...c,smtp_username:{...c.smtp_username,hidden:!0},smtp_password:{...c.smtp_password,hidden:!0}}))}),[c.smtp_authentication.value]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{className:"mb-4",children:t("page_title")}),(0,l.jsx)(o.q,{schema:u,uiSchema:_,formData:c,onChange:t=>{d(t)},onSubmit:s=>{s.preventDefault(),s.stopPropagation();const i={from_email:c.from_email.value,from_name:c.from_name.value,smtp_host:c.smtp_host.value,encryption:c.encryption.value,smtp_port:Number(c.smtp_port.value),smtp_authentication:c.smtp_authentication.value,...c.smtp_authentication.value?{smtp_username:c.smtp_username.value}:{},...c.smtp_authentication.value?{smtp_password:c.smtp_password.value}:{},test_email_recipient:c.test_email_recipient.value};(0,p.am)(i).then((()=>{e.onShow({msg:t("update",{keyPrefix:"toast"}),variant:"success"})})).catch((t=>{if(t.isError){const e=(0,r.NC)(t,c);d({...e});const s=document.getElementById(t.list[0].error_field);(0,r.qt)(s)}}))}})]})}}}]);
//# sourceMappingURL=7341.a0c08218.chunk.js.map