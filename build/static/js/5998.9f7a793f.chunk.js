"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[5998],{55998:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var i=t(12162),l=t(5423),n=t(8810),s=t(14592),r=t(18666),o=t(98496),c=t(28446),m=t(85940),d=t(10428),u=t(28093),v=t(59304),x=t(45558),f=t(66302),p=t(91374),g=t(93090),_=t(49450);const b=()=>{const{t:e}=(0,o.B)("translation",{keyPrefix:"oauth_bind_email"}),a=(0,m.Zp)(),[t,b]=(0,m.ok)(),h=(0,v.bb)((e=>e.update)),y=t.get("binding_key")||"",[j,k]=(0,i.useState)(!1);(0,u.M4)({title:e("confirm_email",{keyPrefix:"page_title"})});const[A,C]=(0,i.useState)({email:{value:"",isInvalid:!1,errorMsg:""}}),I=e=>{f.A.set(p.Xs,e),(0,x.aV)().then((e=>{h(e),setTimeout((()=>{a("/users/login?status=inactive",{replace:!0})}),0)}))};return(0,i.useEffect)((()=>{y||a("/",{replace:!0})}),[]),(0,_.jsxs)(l.A,{style:{paddingTop:"4rem",paddingBottom:"6rem"},children:[(0,_.jsx)(d.vU,{}),j?(0,_.jsxs)(n.A,{md:6,className:"mx-auto text-center",children:[(0,_.jsx)("p",{children:(0,_.jsx)(c.x,{i18nKey:"inactive.first",values:{mail:A.email.value},components:{bold:(0,_.jsx)("strong",{})}})}),(0,_.jsx)("p",{children:e("info",{keyPrefix:"inactive"})})]}):(0,_.jsxs)(n.A,{className:"mx-auto",md:6,lg:4,xl:3,children:[(0,_.jsx)("div",{className:"text-center mb-5",children:e("subtitle")}),(0,_.jsxs)(s.A,{noValidate:!0,onSubmit:a=>{a.preventDefault(),a.stopPropagation(),(()=>{let a=!0;if(A.email.value||(a=!1,A.email={value:"",isInvalid:!0,errorMsg:e("email.msg.empty")}),C({...A}),!a){const e=document.getElementById("email");(0,g.qt)(e)}return a})()&&y&&(0,x.LH)({binding_key:y,email:A.email.value,must:!1}).then((a=>{a.email_exist_and_must_be_confirmed&&d.aF.confirm({title:e("modal_title"),content:e("modal_content"),cancelText:e("modal_cancel"),confirmText:e("modal_confirm"),onConfirm:()=>{(0,x.LH)({binding_key:y,email:A.email.value,must:!0}).then((e=>{e.access_token?I(e.access_token):(t.delete("binding_key"),b(""),k(!0))}))},onCancel:()=>{C({email:{value:"",isInvalid:!1,errorMsg:""}})}}),a.access_token&&I(a.access_token)})).catch((e=>{if(e.isError){const a=(0,g.NC)(e,A);C({...a});const t=document.getElementById(e.list[0].error_field);(0,g.qt)(t)}}))},autoComplete:"off",children:[(0,_.jsxs)(s.A.Group,{controlId:"email",className:"mb-3",children:[(0,_.jsx)(s.A.Label,{children:e("email.label")}),(0,_.jsx)(s.A.Control,{required:!0,type:"email",value:A.email.value,isInvalid:A.email.isInvalid,onChange:e=>{var a;a={email:{value:e.target.value,isInvalid:!1,errorMsg:""}},C({...A,...a})}}),(0,_.jsx)(s.A.Control.Feedback,{type:"invalid",children:A.email.errorMsg})]}),(0,_.jsx)("div",{className:"d-grid mb-3",children:(0,_.jsx)(r.A,{variant:"primary",type:"submit",children:e("btn_update")})})]})]})]})},h=(0,i.memo)(b)},5423:(e,a,t)=>{t.d(a,{A:()=>c});var i=t(59660),l=t.n(i),n=t(12162),s=t(42700),r=t(49450);const o=n.forwardRef((({bsPrefix:e,fluid:a=!1,as:t="div",className:i,...n},o)=>{const c=(0,s.oU)(e,"container"),m="string"===typeof a?`-${a}`:"-fluid";return(0,r.jsx)(t,{ref:o,...n,className:l()(i,a?`${c}${m}`:c)})}));o.displayName="Container";const c=o}}]);
//# sourceMappingURL=5998.9f7a793f.chunk.js.map