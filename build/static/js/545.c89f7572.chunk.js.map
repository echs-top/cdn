{"version":3,"file":"static/js/545.c89f7572.chunk.js","mappings":"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","sources":["pages/Questions/Detail/components/WriteAnswer/index.tsx","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/AlertHeading.js","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/AlertLink.js","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/Alert.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { memo, useState, FC, useEffect } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\nimport { useTranslation, Trans } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\nimport { marked } from 'marked';\nimport classNames from 'classnames';\n\nimport { usePromptWithUnload } from '@/hooks';\nimport { useCaptchaPlugin } from '@/utils/pluginKit';\nimport { Editor, Modal, TextArea } from '@/components';\nimport { FormDataType, PostAnswerReq } from '@/common/interface';\nimport { postAnswer } from '@/services';\nimport { guard, handleFormError, SaveDraft, storageExpires } from '@/utils';\nimport { DRAFT_ANSWER_STORAGE_KEY } from '@/common/constants';\nimport { writeSettingStore } from '@/stores';\n\ninterface Props {\n  visible?: boolean;\n  data: {\n    /** question  id */\n    qid: string;\n    answered?: boolean;\n    loggedUserRank: number;\n    first_answer_id?: string;\n  };\n  callback?: (obj) => void;\n}\n\nconst saveDraft = new SaveDraft({ type: 'answer' });\n\nconst Index: FC<Props> = ({ visible = false, data, callback }) => {\n  const { t } = useTranslation('translation', {\n    keyPrefix: 'question_detail.write_answer',\n  });\n  const [formData, setFormData] = useState<FormDataType>({\n    content: {\n      value: '',\n      isInvalid: false,\n      errorMsg: '',\n    },\n  });\n  const [showEditor, setShowEditor] = useState<boolean>(visible);\n  const [focusType, setFocusType] = useState('');\n  const [editorFocusState, setEditorFocusState] = useState(false);\n  const [hasDraft, setHasDraft] = useState(false);\n  const [showTips, setShowTips] = useState(data.loggedUserRank < 100);\n  const aCaptcha = useCaptchaPlugin('answer');\n  const writeInfo = writeSettingStore((state) => state.write);\n  const [editorCanSave, setEditorCanSave] = useState(false);\n\n  usePromptWithUnload({\n    when: Boolean(formData.content.value),\n  });\n\n  const removeDraft = () => {\n    // immediately remove debounced save\n    saveDraft.save.cancel();\n    saveDraft.remove();\n    setHasDraft(false);\n  };\n\n  useEffect(() => {\n    const draft = storageExpires.get(DRAFT_ANSWER_STORAGE_KEY);\n    if (draft?.questionId === data.qid && draft?.content) {\n      setShowEditor(true);\n      setFormData({\n        content: {\n          value: draft.content,\n          isInvalid: false,\n          errorMsg: '',\n        },\n      });\n      setHasDraft(true);\n    }\n    setTimeout(() => {\n      setEditorCanSave(true);\n    }, 100);\n  }, []);\n\n  useEffect(() => {\n    const draft = storageExpires.get(DRAFT_ANSWER_STORAGE_KEY);\n    const { content } = formData;\n\n    if (content.value) {\n      // save Draft\n      saveDraft.save({\n        questionId: data?.qid,\n        content: content.value,\n      });\n\n      setHasDraft(true);\n    } else if (draft?.questionId === data.qid && !content.value) {\n      removeDraft();\n    }\n  }, [formData.content.value]);\n\n  const checkValidated = (): boolean => {\n    let bol = true;\n    const { content } = formData;\n\n    if (!content.value || Array.from(content.value.trim()).length < 6) {\n      bol = false;\n      formData.content = {\n        value: content.value,\n        isInvalid: true,\n        errorMsg: t('characters'),\n      };\n    } else {\n      formData.content = {\n        value: content.value,\n        isInvalid: false,\n        errorMsg: '',\n      };\n    }\n\n    setFormData({\n      ...formData,\n    });\n    return bol;\n  };\n\n  const resetForm = () => {\n    setFormData({\n      content: {\n        value: '',\n        isInvalid: false,\n        errorMsg: '',\n      },\n    });\n  };\n\n  const deleteDraft = () => {\n    const res = window.confirm(t('discard_confirm', { keyPrefix: 'draft' }));\n    if (res) {\n      removeDraft();\n      resetForm();\n    }\n  };\n\n  const submitAnswer = () => {\n    const params: PostAnswerReq = {\n      question_id: data?.qid,\n      content: formData.content.value,\n      html: marked.parse(formData.content.value),\n    };\n    const imgCode = aCaptcha?.getCaptcha();\n    if (imgCode?.verify) {\n      params.captcha_code = imgCode.captcha_code;\n      params.captcha_id = imgCode.captcha_id;\n    }\n    postAnswer(params)\n      .then(async (res) => {\n        await aCaptcha?.close();\n        setShowEditor(false);\n        setFormData({\n          content: {\n            value: '',\n            isInvalid: false,\n            errorMsg: '',\n          },\n        });\n        removeDraft();\n        callback?.(res.info);\n      })\n      .catch((ex) => {\n        if (ex.isError) {\n          aCaptcha?.handleCaptchaError(ex.list);\n          const stateData = handleFormError(ex, formData);\n          setFormData({ ...stateData });\n        }\n      });\n  };\n\n  const handleSubmit = () => {\n    if (!guard.tryNormalLogged(true)) {\n      return;\n    }\n    if (!checkValidated()) {\n      return;\n    }\n    if (!aCaptcha) {\n      submitAnswer();\n      return;\n    }\n    aCaptcha.check(() => submitAnswer());\n  };\n\n  const clickBtn = () => {\n    if (!guard.tryNormalLogged(true)) {\n      return;\n    }\n\n    if (data?.answered && !showEditor) {\n      Modal.confirm({\n        title: t('confirm_title'),\n        content: t('confirm_info'),\n        confirmText: t('continue'),\n        onConfirm: () => {\n          setShowEditor(true);\n        },\n      });\n      return;\n    }\n\n    if (!showEditor) {\n      setShowEditor(true);\n      return;\n    }\n\n    handleSubmit();\n  };\n  const handleFocusForTextArea = (evt) => {\n    if (!guard.tryNormalLogged(true)) {\n      evt.currentTarget.blur();\n      return;\n    }\n    setFocusType('answer');\n    setShowEditor(true);\n    setEditorFocusState(true);\n  };\n\n  return (\n    <Form noValidate className=\"mt-4\">\n      {(!data.answered || showEditor) && (\n        <Form.Group className=\"mb-3\">\n          <Form.Label>\n            <h5>{t('title')}</h5>\n          </Form.Label>\n          <Form.Control\n            isInvalid={formData.content.isInvalid}\n            className=\"d-none\"\n          />\n          {!showEditor && !data.answered && (\n            <div className=\"d-flex\">\n              <TextArea\n                className=\"w-100\"\n                rows={8}\n                autoFocus={false}\n                onFocus={handleFocusForTextArea}\n              />\n            </div>\n          )}\n          {showEditor && (\n            <>\n              <Editor\n                className={classNames(\n                  'form-control p-0',\n                  focusType === 'answer' && 'focus',\n                  formData.content.isInvalid && 'is-invalid',\n                )}\n                value={formData.content.value}\n                autoFocus={editorFocusState}\n                onChange={(val) => {\n                  if (editorCanSave) {\n                    setFormData({\n                      content: {\n                        value: val,\n                        isInvalid: false,\n                        errorMsg: '',\n                      },\n                    });\n                  }\n                }}\n                onFocus={() => {\n                  setFocusType('answer');\n                }}\n                onBlur={() => {\n                  setFocusType('');\n                }}\n              />\n\n              <Alert\n                variant=\"warning\"\n                show={data.loggedUserRank < 100 && showTips}\n                onClose={() => setShowTips(false)}\n                dismissible\n                className=\"mt-3\">\n                <p>{t('tips.header_1')}</p>\n                <ul>\n                  <li>\n                    <Trans\n                      i18nKey=\"question_detail.write_answer.tips.li1_1\"\n                      components={{ strong: <strong /> }}\n                    />\n                  </li>\n                  <li>{t('tips.li1_2')}</li>\n                </ul>\n                <p>\n                  <Trans\n                    i18nKey=\"question_detail.write_answer.tips.header_2\"\n                    components={{ strong: <strong /> }}\n                  />\n                </p>\n                <ul className=\"mb-0\">\n                  <li>{t('tips.li2_1')}</li>\n                </ul>\n              </Alert>\n            </>\n          )}\n\n          <Form.Control.Feedback type=\"invalid\">\n            {formData.content.errorMsg}\n          </Form.Control.Feedback>\n        </Form.Group>\n      )}\n\n      {data.answered && !showEditor ? (\n        // the 0th answer is the oldest one\n        <Link\n          to={`/posts/${data.qid}/${data.first_answer_id}/edit`}\n          className=\"btn btn-primary\">\n          {t('edit_answer')}\n        </Link>\n      ) : (\n        <Button onClick={clickBtn}>{t('btn_name')}</Button>\n      )}\n\n      {data.answered && !showEditor && !writeInfo.restrict_answer && (\n        <Button onClick={clickBtn} className=\"ms-2 \" variant=\"outline-primary\">\n          {t('add_another_answer')}\n        </Button>\n      )}\n\n      {hasDraft && (\n        <Button variant=\"link\" className=\"ms-2\" onClick={deleteDraft}>\n          {t('discard_draft', { keyPrefix: 'btns' })}\n        </Button>\n      )}\n    </Form>\n  );\n};\n\nexport default memo(Index);\n","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport divWithClassName from './divWithClassName';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nconst AlertHeading = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = DivStyledAsH4,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-heading');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertHeading.displayName = 'AlertHeading';\nexport default AlertHeading;","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst AlertLink = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = Anchor,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-link');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertLink.displayName = 'AlertLink';\nexport default AlertLink;","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AlertHeading from './AlertHeading';\nimport AlertLink from './AlertLink';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef((uncontrolledProps, ref) => {\n  const {\n    bsPrefix,\n    show = true,\n    closeLabel = 'Close alert',\n    closeVariant,\n    className,\n    children,\n    variant = 'primary',\n    onClose,\n    dismissible,\n    transition = Fade,\n    ...props\n  } = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  const handleClose = useEventCallback(e => {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  const Transition = transition === true ? Fade : transition;\n  const alert = /*#__PURE__*/_jsxs(\"div\", {\n    role: \"alert\",\n    ...(!Transition ? props : undefined),\n    ref: ref,\n    className: classNames(className, prefix, variant && `${prefix}-${variant}`, dismissible && `${prefix}-dismissible`),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  });\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, {\n    unmountOnExit: true,\n    ...props,\n    ref: undefined,\n    in: show,\n    children: alert\n  });\n});\nAlert.displayName = 'Alert';\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});"],"names":["saveDraft","SaveDraft","type","Index","visible","data","callback","t","useTranslation","keyPrefix","formData","setFormData","useState","content","value","isInvalid","errorMsg","showEditor","setShowEditor","focusType","setFocusType","editorFocusState","setEditorFocusState","hasDraft","setHasDraft","showTips","setShowTips","loggedUserRank","aCaptcha","useCaptchaPlugin","writeInfo","writeSettingStore","state","write","editorCanSave","setEditorCanSave","usePromptWithUnload","when","Boolean","removeDraft","save","cancel","remove","useEffect","draft","storageExpires","get","DRAFT_ANSWER_STORAGE_KEY","questionId","qid","setTimeout","submitAnswer","params","question_id","html","marked","parse","imgCode","getCaptcha","verify","captcha_code","captcha_id","postAnswer","then","async","close","res","info","catch","ex","isError","handleCaptchaError","list","stateData","handleFormError","handleSubmit","guard","checkValidated","bol","Array","from","trim","length","check","clickBtn","answered","Modal","confirm","title","confirmText","onConfirm","_jsxs","Form","noValidate","className","children","Group","_jsx","Label","Control","TextArea","rows","autoFocus","onFocus","evt","currentTarget","blur","_Fragment","Editor","classNames","onChange","val","onBlur","Alert","variant","show","onClose","dismissible","Trans","i18nKey","components","strong","Feedback","Link","to","first_answer_id","Button","onClick","restrict_answer","deleteDraft","window","memo","DivStyledAsH4","divWithClassName","displayName","AlertHeading","React","bsPrefix","as","Component","props","ref","useBootstrapPrefix","AlertLink","Anchor","uncontrolledProps","closeLabel","closeVariant","transition","Fade","useUncontrolled","prefix","handleClose","useEventCallback","e","Transition","alert","role","undefined","CloseButton","unmountOnExit","in","Object","assign","Heading"],"sourceRoot":""}