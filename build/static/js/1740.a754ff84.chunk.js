"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[1740,7851,9792],{7851:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var o=i(12162),n=i(18666),s=i(98128),d=i(8810),l=i(85940),a=i(98496),c=i(10428),r=i(91374),v=i(45558),_=i(49450);const u=({data:e,isAdmin:t,objectInfo:i,revisionList:u})=>{const{t:j}=(0,a.B)("translation",{keyPrefix:"timeline"}),[h,y]=(0,o.useState)(!1),[b,m]=(0,o.useState)({new_revision:{},old_revision:{}});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("tr",{children:[(0,_.jsxs)("td",{children:[(0,_.jsx)(c.H0,{time:e.created_at}),(0,_.jsx)("br",{}),e.cancelled_at>0&&(0,_.jsx)(c.H0,{time:e.cancelled_at})]}),(0,_.jsxs)("td",{className:"text-nowrap",children:[("rollback"===e.activity_type||"edited"===e.activity_type||"asked"===e.activity_type||"created"===e.activity_type||"answer"===i.object_type&&"answered"===e.activity_type)&&(0,_.jsxs)(n.A,{onClick:()=>(async e=>{if(!h){const t=null===u||void 0===u?void 0:u.find((t=>t.revision_id===e));let i;if((null===u||void 0===u?void 0:u.length)>0&&t){const e=u.indexOf(t)||0;i=e===u.length-1?0:u[e+1].revision_id}const o=await(0,v.Dh)({new_revision_id:e,old_revision_id:i});m(o)}y(!h)})(e.revision_id),variant:"link",className:"text-body p-0 btn-no-border",children:[(0,_.jsx)(c.In,{name:"caret-right-fill",className:"me-1 "+(h?"rotate-90-deg":"rotate-0-deg")}),j(e.activity_type)]}),"accept"===e.activity_type&&(0,_.jsx)(l.N_,{to:`/questions/${i.question_id}/${null===e||void 0===e?void 0:e.object_id}`,children:j(e.activity_type)}),"question"===i.object_type&&"answered"===e.activity_type&&(0,_.jsx)(l.N_,{to:`/questions/${i.question_id}/${e.object_id}`,children:j(e.activity_type)}),"commented"===e.activity_type&&(0,_.jsx)(l.N_,{to:"answer"===i.object_type?`/questions/${i.question_id}/${i.answer_id}?commentId=${e.object_id}`:`/questions/${i.question_id}?commentId=${e.object_id}`,children:j(e.activity_type)}),r.Hn.includes(e.activity_type)&&(0,_.jsx)("div",{children:j(e.activity_type)}),e.cancelled&&(0,_.jsx)("div",{className:"text-danger",children:j("cancelled")})]}),(0,_.jsx)("td",{children:"downvote"!==e.activity_type||t?(0,_.jsx)(c.fZ,{className:"fs-normal",data:null===e||void 0===e?void 0:e.user_info,showAvatar:!1,showReputation:!1}):(0,_.jsx)("div",{children:j("n_or_a")})}),(0,_.jsx)("td",{children:(0,_.jsx)("div",{dangerouslySetInnerHTML:{__html:e.comment}})})]}),(0,_.jsx)("tr",{className:h?"":"d-none",children:(0,_.jsx)("td",{colSpan:5,className:"p-0 py-5",children:(0,_.jsx)(s.A,{className:"justify-content-center",children:(0,_.jsx)(d.A,{xxl:8,children:(0,_.jsx)(c.V$,{objectType:i.object_type,newData:null===b||void 0===b?void 0:b.new_revision,oldData:null===b||void 0===b?void 0:b.old_revision})})})})})]})}},51740:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var o=i(12162),n=i(14592),s=i(27396),d=i(85940),l=i(98496),a=i(28093),c=i(91408),r=i(59304),v=i(45558),_=i(10428),u=i(7851),j=(i(99792),i(49450));const h=()=>{var e,t,i,h;const{t:y}=(0,l.B)("translation",{keyPrefix:"timeline"}),{qid:b="",aid:m="",tid:f=""}=(0,d.g)(),{role_id:p}=(0,r.bb)((e=>e.user)),[x,w]=(0,o.useState)(!1),[$,g]=(0,o.useState)(!1),[N,q]=(0,o.useState)(),k=e=>{g(!0),(0,v.Cy)({object_id:f||m||b,show_vote:e}).then((e=>{q(e)})).finally((()=>{g(!1)}))};(0,o.useEffect)((()=>{k(!1)}),[]);let A="",I="";"question"===(null===N||void 0===N?void 0:N.object_info.object_type)&&(A=c.w.questionLanding(null===N||void 0===N?void 0:N.object_info.question_id,null===N||void 0===N?void 0:N.object_info.url_title),I=`${y("title_for_question")} ${null===N||void 0===N?void 0:N.object_info.title}`),"answer"===(null===N||void 0===N?void 0:N.object_info.object_type)&&(A=c.w.answerLanding({questionId:null===N||void 0===N?void 0:N.object_info.question_id,slugTitle:null===N||void 0===N?void 0:N.object_info.url_title,answerId:null===N||void 0===N?void 0:N.object_info.answer_id}),I=`${y("title_for_answer",{title:null===N||void 0===N?void 0:N.object_info.title,author:null===N||void 0===N?void 0:N.object_info.display_name})}`),"tag"===(null===N||void 0===N?void 0:N.object_info.object_type)&&(A=`/tags/${null!==N&&void 0!==N&&N.object_info.main_tag_slug_name?encodeURIComponent(null===N||void 0===N?void 0:N.object_info.main_tag_slug_name):encodeURIComponent(null===N||void 0===N?void 0:N.object_info.title)}`,I=`${y("title_for_tag")} '${null===N||void 0===N?void 0:N.object_info.title}'`);const C=(null===N||void 0===N||null===(e=N.timeline)||void 0===e?void 0:e.filter((e=>e.revision_id>0)))||[];return(0,a.M4)({title:I}),(0,j.jsxs)("div",{className:"py-4 mb-5",children:[(0,j.jsxs)("h5",{className:"mb-4",children:["tag"===(null===N||void 0===N?void 0:N.object_info.object_type)?y("tag_title"):y("title")," ",(0,j.jsx)(d.N_,{to:A,children:null===N||void 0===N||null===(t=N.object_info)||void 0===t?void 0:t.title})]}),"tag"!==(null===N||void 0===N?void 0:N.object_info.object_type)&&(0,j.jsx)(n.A.Check,{className:"mb-4",type:"switch",id:"custom-switch",label:y("show_votes"),checked:x,onChange:e=>{return t=e.target.checked,w(t),void k(t);var t}}),(0,j.jsxs)(s.A,{hover:!0,responsive:"md",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{width:"20%"},children:y("datetime")}),(0,j.jsx)("th",{style:{width:"15%"},children:y("type")}),(0,j.jsx)("th",{style:{width:"19%"},children:y("by")}),(0,j.jsx)("th",{className:"min-w-15",children:y("comment")})]})}),(0,j.jsx)("tbody",{children:null===N||void 0===N||null===(i=N.timeline)||void 0===i?void 0:i.map((e=>(0,j.jsx)(u.default,{data:e,objectInfo:null===N||void 0===N?void 0:N.object_info,isAdmin:2===p,revisionList:C},e.activity_id)))})]}),!$&&Number(null===N||void 0===N||null===(h=N.timeline)||void 0===h?void 0:h.length)<=0&&(0,j.jsx)(_.Sv,{children:y("no_data")})]})}},98128:(e,t,i)=>{i.d(t,{A:()=>c});var o=i(59660),n=i.n(o),s=i(12162),d=i(42700),l=i(49450);const a=s.forwardRef((({bsPrefix:e,className:t,as:i="div",...o},s)=>{const a=(0,d.oU)(e,"row"),c=(0,d.gy)(),r=(0,d.Jm)(),v=`${a}-cols`,_=[];return c.forEach((e=>{const t=o[e];let i;delete o[e],null!=t&&"object"===typeof t?({cols:i}=t):i=t;const n=e!==r?`-${e}`:"";null!=i&&_.push(`${v}${n}-${i}`)})),(0,l.jsx)(i,{ref:s,...o,className:n()(t,a,..._)})}));a.displayName="Row";const c=a},27396:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(59660),n=i.n(o),s=i(12162),d=i(42700),l=i(49450);const a=s.forwardRef((({bsPrefix:e,className:t,striped:i,bordered:o,borderless:s,hover:a,size:c,variant:r,responsive:v,..._},u)=>{const j=(0,d.oU)(e,"table"),h=n()(t,j,r&&`${j}-${r}`,c&&`${j}-${c}`,i&&`${j}-${"string"===typeof i?`striped-${i}`:"striped"}`,o&&`${j}-bordered`,s&&`${j}-borderless`,a&&`${j}-hover`),y=(0,l.jsx)("table",{..._,className:h,ref:u});if(v){let e=`${j}-responsive`;return"string"===typeof v&&(e=`${e}-${v}`),(0,l.jsx)("div",{className:e,children:y})}return y}))},99792:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});const o={}}}]);
//# sourceMappingURL=1740.a754ff84.chunk.js.map