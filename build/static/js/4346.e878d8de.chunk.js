"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[4346],{94346:(e,a,r)=>{r.r(a),r.d(a,{default:()=>u});var t=r(12162),s=r(98496),i=r(14592),n=r(18666),l=r(10428),o=r(28093),d=r(45558),m=r(93090),_=r(59304),g=r(49450);const c={reserved_tags:{value:[],errorMsg:"",isInvalid:!1},recommend_tags:{value:[],errorMsg:"",isInvalid:!1},required_tag:{value:!1,errorMsg:"",isInvalid:!1},restrict_answer:{value:!1,errorMsg:"",isInvalid:!1},max_image_size:{value:0,errorMsg:"",isInvalid:!1},max_attachment_size:{value:0,errorMsg:"",isInvalid:!1},max_image_megapixel:{value:0,errorMsg:"",isInvalid:!1},authorized_image_extensions:{value:"",errorMsg:"",isInvalid:!1},authorized_attachment_extensions:{value:"",errorMsg:"",isInvalid:!1}},u=()=>{const{t:e}=(0,s.B)("translation",{keyPrefix:"admin.write"}),a=(0,o.dj)(),[r,u]=(0,t.useState)(c),x=e=>{u({...r,...e})};return(0,t.useEffect)((()=>{(0,d.bJ)().then((e=>{var a,t;Array.isArray(e.recommend_tags)&&(r.recommend_tags.value=e.recommend_tags),r.required_tag.value=e.required_tag,r.restrict_answer.value=e.restrict_answer,Array.isArray(e.reserved_tags)&&(r.reserved_tags.value=e.reserved_tags),r.max_image_size.value=e.max_image_size,r.max_attachment_size.value=e.max_attachment_size,r.max_image_megapixel.value=e.max_image_megapixel,r.authorized_image_extensions.value=null===(a=e.authorized_image_extensions)||void 0===a?void 0:a.join(", ").toLowerCase(),r.authorized_attachment_extensions.value=null===(t=e.authorized_attachment_extensions)||void 0===t?void 0:t.join(", ").toLowerCase(),u({...r})}))}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h3",{className:"mb-4",children:e("page_title")}),(0,g.jsxs)(i.A,{noValidate:!0,onSubmit:t=>{var s,i,n,l;if(t.preventDefault(),t.stopPropagation(),!(()=>{let a=!0;const{recommend_tags:t,reserved_tags:s}=r;if(t.value.filter((e=>s.value.some((a=>(null===a||void 0===a?void 0:a.slug_name)===(null===e||void 0===e?void 0:e.slug_name))))).length>0){x({recommend_tags:{...t,errorMsg:e("recommend_tags.msg.contain_reserved"),isInvalid:!0}}),a=!1;const r=document.getElementById("recommend_tags");(0,m.qt)(r)}else x({recommend_tags:{...t,errorMsg:"",isInvalid:!1}});return a})())return;const o={recommend_tags:r.recommend_tags.value,reserved_tags:r.reserved_tags.value,required_tag:r.required_tag.value,restrict_answer:r.restrict_answer.value,max_image_size:Number(r.max_image_size.value),max_attachment_size:Number(r.max_attachment_size.value),max_image_megapixel:Number(r.max_image_megapixel.value),authorized_image_extensions:(null===(s=r.authorized_image_extensions.value)||void 0===s?void 0:s.length)>0?null===(i=r.authorized_image_extensions.value.split(","))||void 0===i?void 0:i.map((e=>e.trim().toLowerCase())):[],authorized_attachment_extensions:(null===(n=r.authorized_attachment_extensions.value)||void 0===n?void 0:n.length)>0?null===(l=r.authorized_attachment_extensions.value.split(","))||void 0===l?void 0:l.map((e=>e.trim().toLowerCase())):[]};(0,d.pM)(o).then((()=>{a.onShow({msg:e("update",{keyPrefix:"toast"}),variant:"success"}),_.j7.getState().update({restrict_answer:o.restrict_answer,...o})})).catch((e=>{if(e.isError){const a=(0,m.NC)(e,r);u({...a});const t=document.getElementById(e.list[0].error_field);(0,m.qt)(t)}}))},children:[(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"reserved_tags",children:[(0,g.jsx)(i.A.Label,{children:e("reserved_tags.label")}),(0,g.jsx)(l.Cx,{value:r.reserved_tags.value,onChange:e=>{x({reserved_tags:{value:e,errorMsg:"",isInvalid:!1}})},showRequiredTag:!1,maxTagLength:0,tagStyleMode:"simple",formText:e("reserved_tags.text"),isInvalid:r.reserved_tags.isInvalid,errMsg:r.reserved_tags.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"recommend_tags",children:[(0,g.jsx)(i.A.Label,{children:e("recommend_tags.label")}),(0,g.jsx)(l.Cx,{value:r.recommend_tags.value,onChange:e=>{x({recommend_tags:{value:e,errorMsg:"",isInvalid:!1}})},showRequiredTag:!1,tagStyleMode:"simple",formText:e("recommend_tags.text"),isInvalid:r.recommend_tags.isInvalid,errMsg:r.recommend_tags.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"required_tag",children:[(0,g.jsx)(i.A.Label,{children:e("required_tag.title")}),(0,g.jsx)(i.A.Switch,{label:e("required_tag.label"),checked:r.required_tag.value,onChange:e=>{x({required_tag:{value:e.target.checked,errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("required_tag.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.required_tag.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"restrict_answer",children:[(0,g.jsx)(i.A.Label,{children:e("restrict_answer.title")}),(0,g.jsx)(i.A.Switch,{label:e("restrict_answer.label"),checked:r.restrict_answer.value,onChange:e=>{x({restrict_answer:{value:e.target.checked,errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("restrict_answer.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.restrict_answer.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"max_image_size",children:[(0,g.jsx)(i.A.Label,{children:e("image_size.label")}),(0,g.jsx)(i.A.Control,{type:"number",value:r.max_image_size.value,isInvalid:r.max_image_size.isInvalid,onChange:e=>{x({max_image_size:{value:e.target.value,errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("image_size.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.max_image_size.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"max_attachment_size",children:[(0,g.jsx)(i.A.Label,{children:e("attachment_size.label")}),(0,g.jsx)(i.A.Control,{type:"number",value:r.max_attachment_size.value,isInvalid:r.max_attachment_size.isInvalid,onChange:e=>{x({max_attachment_size:{value:e.target.value,errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("attachment_size.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.max_attachment_size.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"max_image_megapixel",children:[(0,g.jsx)(i.A.Label,{children:e("image_megapixels.label")}),(0,g.jsx)(i.A.Control,{type:"number",isInvalid:r.max_image_megapixel.isInvalid,value:r.max_image_megapixel.value,onChange:e=>{x({max_image_megapixel:{value:e.target.value,errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("image_megapixels.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.max_image_megapixel.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"authorized_image_extensions",children:[(0,g.jsx)(i.A.Label,{children:e("image_extensions.label")}),(0,g.jsx)(i.A.Control,{type:"text",value:r.authorized_image_extensions.value,isInvalid:r.authorized_image_extensions.isInvalid,onChange:e=>{x({authorized_image_extensions:{value:e.target.value.toLowerCase(),errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("image_extensions.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.authorized_image_extensions.errorMsg})]}),(0,g.jsxs)(i.A.Group,{className:"mb-3",controlId:"authorized_attachment_extensions",children:[(0,g.jsx)(i.A.Label,{children:e("attachment_extensions.label")}),(0,g.jsx)(i.A.Control,{type:"text",value:r.authorized_attachment_extensions.value,isInvalid:r.authorized_attachment_extensions.isInvalid,onChange:e=>{x({authorized_attachment_extensions:{value:e.target.value.toLowerCase(),errorMsg:"",isInvalid:!1}})}}),(0,g.jsx)(i.A.Text,{children:e("attachment_extensions.text")}),(0,g.jsx)(i.A.Control.Feedback,{type:"invalid",children:r.authorized_attachment_extensions.errorMsg})]}),(0,g.jsx)(i.A.Group,{className:"mb-3",children:(0,g.jsx)(n.A,{type:"submit",children:e("save",{keyPrefix:"btns"})})})]})]})}}}]);
//# sourceMappingURL=4346.e878d8de.chunk.js.map