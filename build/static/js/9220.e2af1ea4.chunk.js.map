{"version":3,"file":"static/js/9220.e2af1ea4.chunk.js","mappings":"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","sources":["pages/Admin/Questions/components/Action/index.tsx","pages/Admin/Questions/index.tsx","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/Table.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Dropdown } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\nimport { Icon, Modal } from '@/components';\nimport {\n  changeQuestionStatus,\n  questionOperation,\n  reopenQuestion,\n} from '@/services';\nimport { useReportModal, useToast } from '@/hooks';\nimport { toastStore } from '@/stores';\n\nconst AnswerActions = ({ itemData, refreshList, curFilter, show, pin }) => {\n  const { t } = useTranslation('translation', { keyPrefix: 'delete' });\n  const toast = useToast();\n  const closeCallback = () => {\n    toastStore.getState().show({\n      msg: t('post_closed', { keyPrefix: 'messages' }),\n      variant: 'success',\n    });\n    refreshList();\n  };\n  const closeModal = useReportModal(closeCallback);\n\n  const handleAction = (type) => {\n    if (type === 'delete') {\n      Modal.confirm({\n        title: t('title', { keyPrefix: 'delete' }),\n        content:\n          itemData.answer_count > 0\n            ? t('question', { keyPrefix: 'delete' })\n            : t('other', { keyPrefix: 'delete' }),\n        cancelBtnVariant: 'link',\n        confirmBtnVariant: 'danger',\n        confirmText: t('delete', { keyPrefix: 'btns' }),\n        onConfirm: () => {\n          changeQuestionStatus(itemData.id, 'deleted').then(() => {\n            toastStore.getState().show({\n              msg: t('post_deleted', { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n\n    if (type === 'undelete') {\n      Modal.confirm({\n        title: t('undelete_title'),\n        content: t('undelete_desc'),\n        cancelBtnVariant: 'link',\n        confirmBtnVariant: 'danger',\n        confirmText: t('undelete', { keyPrefix: 'btns' }),\n        onConfirm: () => {\n          changeQuestionStatus(itemData.id, 'available').then(() => {\n            toastStore.getState().show({\n              msg: t('post_cancel_deleted', { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n\n    if (type === 'close') {\n      closeModal.onShow({\n        type: 'question',\n        id: itemData.id,\n        action: 'close',\n      });\n    }\n\n    if (type === 'reopen') {\n      Modal.confirm({\n        title: t('title', { keyPrefix: 'question_detail.reopen' }),\n        content: t('content', { keyPrefix: 'question_detail.reopen' }),\n        cancelBtnVariant: 'link',\n        confirmText: t('confirm_btn', { keyPrefix: 'question_detail.reopen' }),\n        onConfirm: () => {\n          reopenQuestion({\n            question_id: itemData.id,\n          }).then(() => {\n            toastStore.getState().show({\n              msg: t('post_reopen', { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n\n    if (type === 'list' || type === 'unlist') {\n      const keyPrefix =\n        type === 'list' ? 'question_detail.list' : 'question_detail.unlist';\n      Modal.confirm({\n        title: t('title', { keyPrefix }),\n        content: t('content', { keyPrefix }),\n        cancelBtnVariant: 'link',\n        confirmText: t('confirm_btn', { keyPrefix }),\n        onConfirm: () => {\n          questionOperation({\n            id: itemData.id,\n            operation: type === 'list' ? 'show' : 'hide',\n          }).then(() => {\n            toast.onShow({\n              msg: t(`post_${type}`, { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n  };\n\n  if (curFilter === 'pending') {\n    return (\n      <Link\n        to={`/review?type=queued_post&objectId=${itemData.id}`}\n        className=\"btn btn-link p-0\"\n        title={t('review', { keyPrefix: 'header.nav' })}>\n        <Icon name=\"three-dots-vertical\" />\n      </Link>\n    );\n  }\n\n  return (\n    <Dropdown>\n      <Dropdown.Toggle variant=\"link\" className=\"no-toggle p-0\">\n        <Icon\n          name=\"three-dots-vertical\"\n          title={t('action', { keyPrefix: 'admin.answers' })}\n        />\n      </Dropdown.Toggle>\n      <Dropdown.Menu align=\"end\">\n        {curFilter === 'normal' && (\n          <Dropdown.Item onClick={() => handleAction('close')}>\n            {t('close', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        )}\n        {curFilter === 'closed' && (\n          <Dropdown.Item onClick={() => handleAction('reopen')}>\n            {t('reopen', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        )}\n        {curFilter !== 'deleted' ? (\n          <Dropdown.Item onClick={() => handleAction('delete')}>\n            {t('delete', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        ) : (\n          <Dropdown.Item onClick={() => handleAction('undelete')}>\n            {t('undelete', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        )}\n        {show === 2 ? (\n          <Dropdown.Item onClick={() => handleAction('list')}>\n            {t('list', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        ) : (\n          pin !== 2 && (\n            <Dropdown.Item onClick={() => handleAction('unlist')}>\n              {t('unlist', { keyPrefix: 'btns' })}\n            </Dropdown.Item>\n          )\n        )}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nexport default AnswerActions;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC } from 'react';\nimport { Form, Table, Stack, Button } from 'react-bootstrap';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport classNames from 'classnames';\n\nimport {\n  FormatTime,\n  Icon,\n  Pagination,\n  BaseUserCard,\n  Empty,\n  QueryGroup,\n  Modal,\n} from '@/components';\nimport { ADMIN_LIST_STATUS } from '@/common/constants';\nimport * as Type from '@/common/interface';\nimport { deletePermanently, useQuestionSearch } from '@/services';\nimport { pathFactory } from '@/router/pathFactory';\nimport { toastStore } from '@/stores';\n\nimport Action from './components/Action';\n\nconst questionFilterItems: Type.AdminContentsFilterBy[] = [\n  'normal',\n  'pending',\n  'closed',\n  'deleted',\n];\n\nconst PAGE_SIZE = 20;\nconst Questions: FC = () => {\n  const [urlSearchParams, setUrlSearchParams] = useSearchParams();\n  const curFilter = urlSearchParams.get('status') || questionFilterItems[0];\n  const curPage = Number(urlSearchParams.get('page')) || 1;\n  const curQuery = urlSearchParams.get('query') || '';\n  const { t } = useTranslation('translation', { keyPrefix: 'admin.questions' });\n\n  const {\n    data: listData,\n    isLoading,\n    mutate: refreshList,\n  } = useQuestionSearch({\n    page_size: PAGE_SIZE,\n    page: curPage,\n    status: curFilter as Type.AdminContentsFilterBy,\n    query: curQuery,\n  });\n  const count = listData?.count || 0;\n\n  const handleDeletePermanently = () => {\n    Modal.confirm({\n      title: t('title', { keyPrefix: 'delete_permanently' }),\n      content: t('content', { keyPrefix: 'delete_permanently' }),\n      cancelBtnVariant: 'link',\n      confirmText: t('delete', { keyPrefix: 'btns' }),\n      confirmBtnVariant: 'danger',\n      onConfirm: () => {\n        deletePermanently('questions').then(() => {\n          toastStore.getState().show({\n            msg: t('posts_deleted', { keyPrefix: 'messages' }),\n            variant: 'success',\n          });\n          refreshList();\n        });\n      },\n    });\n  };\n\n  const handleFilter = (e) => {\n    urlSearchParams.set('query', e.target.value);\n    urlSearchParams.delete('page');\n    setUrlSearchParams(urlSearchParams);\n  };\n  return (\n    <>\n      <h3 className=\"mb-4\">{t('page_title')}</h3>\n      <div className=\"d-flex flex-wrap justify-content-between align-items-center\">\n        <Stack direction=\"horizontal\" gap={3} className=\"mb-3\">\n          <QueryGroup\n            data={questionFilterItems}\n            currentSort={curFilter}\n            sortKey=\"status\"\n            i18nKeyPrefix=\"btns\"\n          />\n          {curFilter === 'deleted' && count > 0 ? (\n            <Button\n              variant=\"outline-danger\"\n              size=\"sm\"\n              onClick={() => handleDeletePermanently()}>\n              {t('deleted_permanently', { keyPrefix: 'btns' })}\n            </Button>\n          ) : null}\n        </Stack>\n\n        <Form.Control\n          value={curQuery}\n          size=\"sm\"\n          type=\"search\"\n          placeholder={t('filter.placeholder')}\n          onChange={handleFilter}\n          style={{ width: '12.25rem' }}\n          className=\"mb-3\"\n        />\n      </div>\n      <Table responsive=\"md\">\n        <thead>\n          <tr>\n            <th className=\"min-w-15\">{t('post')}</th>\n            <th style={{ width: '8%' }}>{t('votes')}</th>\n            <th style={{ width: '8%' }}>{t('answers')}</th>\n            <th style={{ width: '15%' }}>{t('created')}</th>\n            <th style={{ width: '14%' }}>{t('status')}</th>\n            <th style={{ width: '10%' }} className=\"text-end\">\n              {t('action')}\n            </th>\n          </tr>\n        </thead>\n        <tbody className=\"align-middle\">\n          {listData?.list?.map((li) => {\n            return (\n              <tr key={li.id}>\n                <td>\n                  <Link\n                    to={pathFactory.questionLanding(li.id, li.url_title)}\n                    target=\"_blank\"\n                    className=\"text-break text-wrap\"\n                    rel=\"noreferrer\">\n                    {li.title}\n                  </Link>\n                  {li.accepted_answer_id > 0 && (\n                    <Icon\n                      name=\"check-circle-fill\"\n                      className=\"ms-2 text-success\"\n                    />\n                  )}\n                </td>\n                <td>{li.vote_count}</td>\n                <td>\n                  <Link\n                    to={`/admin/answers?questionId=${li.id}`}\n                    rel=\"noreferrer\">\n                    {li.answer_count}\n                  </Link>\n                </td>\n                <td>\n                  <Stack>\n                    <BaseUserCard\n                      avatarSize=\"20\"\n                      data={li.user_info}\n                      nameMaxWidth=\"130px\"\n                    />\n                    <FormatTime\n                      className=\"small text-secondary\"\n                      time={li.create_time}\n                    />\n                  </Stack>\n                </td>\n                <td>\n                  <span\n                    className={classNames(\n                      'badge',\n                      'me-1',\n                      'mb-1',\n                      ADMIN_LIST_STATUS[curFilter]?.variant,\n                    )}>\n                    {t(ADMIN_LIST_STATUS[curFilter]?.name, {\n                      keyPrefix: 'btns',\n                    })}\n                  </span>\n                  {li.show === 2 && (\n                    <span\n                      className={classNames(\n                        'badge',\n                        ADMIN_LIST_STATUS.unlisted.variant,\n                      )}>\n                      {t(ADMIN_LIST_STATUS.unlisted.name, {\n                        keyPrefix: 'btns',\n                      })}\n                    </span>\n                  )}\n                </td>\n\n                <td className=\"text-end\">\n                  <Action\n                    itemData={{ id: li.id, answer_count: li.answer_count }}\n                    refreshList={refreshList}\n                    curFilter={curFilter}\n                    show={li.show}\n                    pin={li.pin}\n                  />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n      {Number(count) <= 0 && !isLoading && <Empty />}\n      <div className=\"mt-4 mb-2 d-flex justify-content-center\">\n        <Pagination\n          currentPage={curPage}\n          totalSize={count}\n          pageSize={PAGE_SIZE}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Questions;\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  const classes = classNames(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-${typeof striped === 'string' ? `striped-${striped}` : 'striped'}`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n  const table = /*#__PURE__*/_jsx(\"table\", {\n    ...props,\n    className: classes,\n    ref: ref\n  });\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n  return table;\n});\nexport default Table;"],"names":["AnswerActions","itemData","refreshList","curFilter","show","pin","t","useTranslation","keyPrefix","toast","useToast","closeModal","useReportModal","closeCallback","toastStore","getState","msg","variant","handleAction","type","Modal","confirm","title","content","answer_count","cancelBtnVariant","confirmBtnVariant","confirmText","onConfirm","changeQuestionStatus","id","then","onShow","action","reopenQuestion","question_id","questionOperation","operation","_jsx","Link","to","className","children","Icon","name","_jsxs","Dropdown","Toggle","Menu","align","Item","onClick","questionFilterItems","Questions","_listData$list","urlSearchParams","setUrlSearchParams","useSearchParams","get","curPage","Number","curQuery","data","listData","isLoading","mutate","useQuestionSearch","page_size","page","status","query","count","_Fragment","Stack","direction","gap","QueryGroup","currentSort","sortKey","i18nKeyPrefix","Button","size","deletePermanently","Form","Control","value","placeholder","onChange","e","set","target","delete","style","width","Table","responsive","list","map","li","_ADMIN_LIST_STATUS$cu","_ADMIN_LIST_STATUS$cu2","pathFactory","questionLanding","url_title","rel","accepted_answer_id","vote_count","BaseUserCard","avatarSize","user_info","nameMaxWidth","FormatTime","time","create_time","classNames","ADMIN_LIST_STATUS","unlisted","Action","Empty","Pagination","currentPage","totalSize","pageSize","React","bsPrefix","striped","bordered","borderless","hover","props","ref","decoratedBsPrefix","useBootstrapPrefix","classes","table","responsiveClass"],"sourceRoot":""}