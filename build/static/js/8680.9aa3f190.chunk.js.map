{"version":3,"file":"static/js/8680.9aa3f190.chunk.js","mappings":"sRAgDA,MAAMA,EAAmBA,EACvBC,MACAC,OACAC,WACAC,gBAAgB,GAChBC,WACAC,aAAY,MACP,IAADC,EAAAC,EAAAC,EAAAC,EACJ,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,GAAe,cAAe,CAC1CC,UAAW,qBAENC,IAAgBC,EAAAA,EAAAA,MACjBC,GAAYC,EAAAA,EAAAA,QAAuB,OAEzCC,EAAAA,EAAAA,IAAqC,QAAlBX,EAACS,EAAUG,eAAO,IAAAZ,OAAA,EAAjBA,EAAmBa,cAAc,SAkCrD,OAvBAC,EAAAA,EAAAA,YAAU,KACM,OAATL,QAAS,IAATA,GAAAA,EAAWG,UAIhBG,EAAAA,EAAAA,IAAWN,EAAUG,QAAQC,cAAc,QAAS,CAClDG,gBAAiBZ,EAAE,SAAU,CAAEE,UAAW,aAC1CW,SAAUb,EAAE,OAAQ,CAAEE,UAAW,cACjC,GACD,CAACG,EAAUG,WAEdE,EAAAA,EAAAA,YAAU,KACJpB,IAAQC,EAAKuB,IACfC,YAAW,KACT,MAAMC,EAAUX,EAAUG,SAC1BS,EAAAA,EAAAA,IAAmBD,GACdb,EAAae,IAAI,eACpBC,EAAAA,EAAAA,IAAUd,EAAUG,QACtB,GACC,IACL,GACC,CAACjB,EAAKuB,KAEA,OAAJvB,QAAI,IAAJA,GAAAA,EAAMuB,IAKTM,EAAAA,EAAAA,MAAA,OAAKN,GAAIvB,EAAKuB,GAAIO,IAAKhB,EAAWiB,UAAU,mBAAkBC,SAAA,CAC3C,KAAhBhC,EAAKiC,SACJC,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CAACC,QAAQ,SAASL,UAAU,OAAMC,SACrCvB,EAAE,eAAgB,CAAEE,UAAW,eAGnB,KAAhBX,EAAKiC,SACJC,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CAACC,QAAQ,YAAYL,UAAU,OAAMC,SACxCvB,EAAE,eAAgB,CAAEE,UAAW,eAIhB,KAAf,OAAJX,QAAI,IAAJA,OAAI,EAAJA,EAAMqC,YACLH,EAAAA,EAAAA,KAAA,OAAKH,UAAU,YAAWC,UACxBH,EAAAA,EAAAA,MAACS,EAAAA,EAAK,CAACC,GAAG,UAAUC,MAAI,EAAAR,SAAA,EACtBE,EAAAA,EAAAA,KAACO,EAAAA,GAAI,CAACC,KAAK,2BAA2B,oBAK5CR,EAAAA,EAAAA,KAACS,EAAAA,GAAS,CAAAX,UACRE,EAAAA,EAAAA,KAAA,WACEH,UAAU,2BACVa,wBAAyB,CAAEC,OAAY,OAAJ7C,QAAI,IAAJA,OAAI,EAAJA,EAAM8C,WAG7CjB,EAAAA,EAAAA,MAAA,OAAKE,UAAU,iCAAgCC,SAAA,EAC7CE,EAAAA,EAAAA,KAACa,EAAAA,GAAO,CACNC,OAAO,SACPhD,KAAM,CACJuB,GAAQ,OAAJvB,QAAI,IAAJA,OAAI,EAAJA,EAAMuB,GACV0B,OAA8B,eAAlB,OAAJjD,QAAI,IAAJA,OAAI,EAAJA,EAAMkD,aACdC,OAA8B,aAAlB,OAAJnD,QAAI,IAAJA,OAAI,EAAJA,EAAMkD,aACdE,WAAgB,OAAJpD,QAAI,IAAJA,OAAI,EAAJA,EAAMqD,WAClBC,aAAa,EACbC,UAAe,OAAJvD,QAAI,IAAJA,OAAI,EAAJA,EAAMuD,UACjBC,aAAc,EACdC,SAAc,OAAJzD,QAAI,IAAJA,GAAe,QAAXM,EAAJN,EAAM0D,iBAAS,IAAApD,OAAX,EAAJA,EAAiBmD,YAI9BrD,IACCyB,EAAAA,EAAAA,MAAC8B,EAAAA,EAAM,CACLvB,QAA2B,IAAlBpC,EAAKqC,SAAiB,UAAY,kBAC3CN,UAAU,OACV6B,QAlFWC,MACnBC,EAAAA,EAAAA,IAAiB,CACfC,YAAa/D,EAAK+D,YAClBC,UAA6B,IAAlBhE,EAAKqC,SAAiB,IAAMrC,EAAKuB,KAC3C0C,MAAK,KACE,OAAR9D,QAAQ,IAARA,GAAAA,EAAW,GAAG,GACd,EA4E4B6B,SAAA,EACtBE,EAAAA,EAAAA,KAACO,EAAAA,GAAI,CAACC,KAAK,oBAAoBX,UAAU,UACzCG,EAAAA,EAAAA,KAAA,QAAAF,SACqB,IAAlBhC,EAAKqC,SACF5B,EAAE,wBACFA,EAAE,+BAMdoB,EAAAA,EAAAA,MAAA,OAAKE,UAAU,wCAAuCC,SAAA,EACpDE,EAAAA,EAAAA,KAAA,OAAKH,UAAU,gCAA+BC,UAC5CE,EAAAA,EAAAA,KAACgC,EAAAA,GAAO,CACNC,IAAKnE,EAAK+D,YACVhE,IAAKC,EAAKuB,GACV6C,cAAmB,OAAJpE,QAAI,IAAJA,OAAI,EAAJA,EAAMqE,eACrBC,KAAK,SACLC,WAA8B,IAAlBvE,EAAKqC,SACjBmC,MAAOtE,EACPC,SAAUA,OAGd+B,EAAAA,EAAAA,KAAA,OAAKH,UAAU,oBAAoB0C,MAAO,CAAEC,SAAU,SAAU1C,SAC7DhC,EAAK2E,mBACe,QAArBpE,EAAAP,EAAK2E,wBAAgB,IAAApE,OAAA,EAArBA,EAAuBkD,aAA2B,QAAnBjD,EAAKR,EAAK0D,iBAAS,IAAAlD,OAAA,EAAdA,EAAgBiD,WAClDvB,EAAAA,EAAAA,KAAC0C,EAAAA,GAAQ,CACP5E,KAAU,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM2E,iBACZE,KAAMC,OAAO9E,EAAK+E,aAClBC,OAAQvE,EAAE,QACVR,SAAUA,EACVgF,aAAc,UAAUjF,EAAK+D,eAAe/D,EAAKuB,gBAEjDtB,GACFiC,EAAAA,EAAAA,KAACgD,EAAAA,GAAI,CAACC,GAAI,UAAUnF,EAAK+D,eAAe/D,EAAKuB,cAAcS,UACzDE,EAAAA,EAAAA,KAACkD,EAAAA,GAAU,CACTP,KAAMC,OAAO9E,EAAK+E,aAClBC,OAAQvE,EAAE,QACVsB,UAAU,4BAIdG,EAAAA,EAAAA,KAACkD,EAAAA,GAAU,CACTP,KAAMC,OAAO9E,EAAK+E,aAClBC,OAAQvE,EAAE,QACVsB,UAAU,4BAIhBG,EAAAA,EAAAA,KAAA,OAAKuC,MAAO,CAAEC,SAAU,SAAU1C,UAChCE,EAAAA,EAAAA,KAAC0C,EAAAA,GAAQ,CACP5E,KAAU,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM0D,UACZmB,KAAMC,OAAO9E,EAAKqF,aAClBL,OAAQvE,EAAE,YACVR,SAAUA,EACVgF,aAAc,UAAUjF,EAAK+D,eAAe/D,EAAKuB,sBAKvDW,EAAAA,EAAAA,KAACoD,EAAAA,GAAO,CACNC,SAAUvF,EAAKuB,GACfiE,KAAK,SACLC,UAAW7E,EAAae,IAAI,kBAhHzB,IAkHD,EAIV,GAAe+D,EAAAA,EAAAA,MAAK5F,E,4HChNpB,MAAM6F,GAAgBC,EAAAA,EAAAA,GAAiB,MACvCD,EAAcE,YAAc,gBAC5B,MAAMC,EAA4BC,EAAAA,YAAiB,EACjDhE,YACAiE,WACAC,GAAIC,EAAYP,KACbQ,GACFrE,KACDkE,GAAWI,EAAAA,EAAAA,IAAmBJ,EAAU,kBACpB9D,EAAAA,EAAAA,KAAKgE,EAAW,CAClCpE,IAAKA,EACLC,UAAWsE,IAAWtE,EAAWiE,MAC9BG,OAGPL,EAAaD,YAAc,eAC3B,U,eChBA,MAAMS,EAAyBP,EAAAA,YAAiB,EAC9ChE,YACAiE,WACAC,GAAIC,EAAYK,EAAAA,KACbJ,GACFrE,KACDkE,GAAWI,EAAAA,EAAAA,IAAmBJ,EAAU,eACpB9D,EAAAA,EAAAA,KAAKgE,EAAW,CAClCpE,IAAKA,EACLC,UAAWsE,IAAWtE,EAAWiE,MAC9BG,OAGPG,EAAUT,YAAc,YACxB,U,yBCRA,MAAM1D,EAAqB4D,EAAAA,YAAiB,CAACS,EAAmB1E,KAC9D,MAAM,SACJkE,EAAQ,KACRS,GAAO,EAAI,WACXC,EAAa,cAAa,aAC1BC,EAAY,UACZ5E,EAAS,SACTC,EAAQ,QACRI,EAAU,UAAS,QACnBwE,EAAO,YACPC,EAAW,WACXC,EAAaC,EAAAA,KACVZ,IACDa,EAAAA,EAAAA,IAAgBR,EAAmB,CACrCC,KAAM,YAEFQ,GAASb,EAAAA,EAAAA,IAAmBJ,EAAU,SACtCkB,GAAcC,EAAAA,EAAAA,IAAiBC,IAC/BR,GACFA,GAAQ,EAAOQ,EACjB,IAEIC,GAA4B,IAAfP,EAAsBC,EAAAA,EAAOD,EAC1CQ,GAAqBzF,EAAAA,EAAAA,MAAM,MAAO,CACtC0F,KAAM,WACDF,OAAqBG,EAARrB,EAClBrE,IAAKA,EACLC,UAAWsE,IAAWtE,EAAWkF,EAAQ7E,GAAW,GAAG6E,KAAU7E,IAAWyE,GAAe,GAAGI,iBAC9FjF,SAAU,CAAC6E,IAA4B3E,EAAAA,EAAAA,KAAKuF,EAAAA,EAAa,CACvD7D,QAASsD,EACT,aAAcR,EACdtE,QAASuE,IACP3E,KAEN,OAAKqF,GACenF,EAAAA,EAAAA,KAAKmF,EAAY,CACnCK,eAAe,KACZvB,EACHrE,SAAK0F,EACLG,GAAIlB,EACJzE,SAAUsF,IANYb,EAAOa,EAAQ,IAOrC,IAEJnF,EAAM0D,YAAc,QACpB,QAAe+B,OAAOC,OAAO1F,EAAO,CAClC+C,KAAMoB,EACNwB,QAAShC,G","sources":["pages/Questions/Detail/components/Answer/index.tsx","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/AlertHeading.js","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/AlertLink.js","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/Alert.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { memo, FC, useEffect, useRef } from 'react';\nimport { Button, Alert, Badge } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { Link, useSearchParams } from 'react-router-dom';\n\nimport {\n  Actions,\n  Operate,\n  UserCard,\n  Icon,\n  Comment,\n  FormatTime,\n  htmlRender,\n  ImgViewer,\n} from '@/components';\nimport { scrollToElementTop, bgFadeOut } from '@/utils';\nimport { AnswerItem } from '@/common/interface';\nimport { acceptanceAnswer } from '@/services';\nimport { useRenderHtmlPlugin } from '@/utils/pluginKit';\n\ninterface Props {\n  data: AnswerItem;\n  /** router answer id */\n  aid?: string;\n  canAccept: boolean;\n  questionTitle: string;\n  isLogged: boolean;\n  callback: (type: string) => void;\n}\nconst Index: FC<Props> = ({\n  aid,\n  data,\n  isLogged,\n  questionTitle = '',\n  callback,\n  canAccept = false,\n}) => {\n  const { t } = useTranslation('translation', {\n    keyPrefix: 'question_detail',\n  });\n  const [searchParams] = useSearchParams();\n  const answerRef = useRef<HTMLDivElement>(null);\n\n  useRenderHtmlPlugin(answerRef.current?.querySelector('.fmt') as HTMLElement);\n\n  const acceptAnswer = () => {\n    acceptanceAnswer({\n      question_id: data.question_id,\n      answer_id: data.accepted === 2 ? '0' : data.id,\n    }).then(() => {\n      callback?.('');\n    });\n  };\n\n  useEffect(() => {\n    if (!answerRef?.current) {\n      return;\n    }\n\n    htmlRender(answerRef.current.querySelector('.fmt'), {\n      copySuccessText: t('copied', { keyPrefix: 'messages' }),\n      copyText: t('copy', { keyPrefix: 'messages' }),\n    });\n  }, [answerRef.current]);\n\n  useEffect(() => {\n    if (aid === data.id) {\n      setTimeout(() => {\n        const element = answerRef.current;\n        scrollToElementTop(element);\n        if (!searchParams.get('commentId')) {\n          bgFadeOut(answerRef.current);\n        }\n      }, 100);\n    }\n  }, [data.id]);\n\n  if (!data?.id) {\n    return null;\n  }\n\n  return (\n    <div id={data.id} ref={answerRef} className=\"answer-item py-4\">\n      {data.status === 10 && (\n        <Alert variant=\"danger\" className=\"mb-4\">\n          {t('post_deleted', { keyPrefix: 'messages' })}\n        </Alert>\n      )}\n      {data.status === 11 && (\n        <Alert variant=\"secondary\" className=\"mb-4\">\n          {t('post_pending', { keyPrefix: 'messages' })}\n        </Alert>\n      )}\n\n      {data?.accepted === 2 && (\n        <div className=\"mb-3 lh-1\">\n          <Badge bg=\"success\" pill>\n            <Icon name=\"check-circle-fill me-1\" />\n            Best answer\n          </Badge>\n        </div>\n      )}\n      <ImgViewer>\n        <article\n          className=\"fmt text-break text-wrap\"\n          dangerouslySetInnerHTML={{ __html: data?.html }}\n        />\n      </ImgViewer>\n      <div className=\"d-flex align-items-center mt-4\">\n        <Actions\n          source=\"answer\"\n          data={{\n            id: data?.id,\n            isHate: data?.vote_status === 'vote_down',\n            isLike: data?.vote_status === 'vote_up',\n            votesCount: data?.vote_count,\n            hideCollect: true,\n            collected: data?.collected,\n            collectCount: 0,\n            username: data?.user_info?.username,\n          }}\n        />\n\n        {canAccept && (\n          <Button\n            variant={data.accepted === 2 ? 'success' : 'outline-success'}\n            className=\"ms-3\"\n            onClick={acceptAnswer}>\n            <Icon name=\"check-circle-fill\" className=\"me-2\" />\n            <span>\n              {data.accepted === 2\n                ? t('answers.btn_accepted')\n                : t('answers.btn_accept')}\n            </span>\n          </Button>\n        )}\n      </div>\n\n      <div className=\"d-block d-md-flex flex-wrap mt-4 mb-3\">\n        <div className=\"mb-3 mb-md-0 me-4 flex-grow-1\">\n          <Operate\n            qid={data.question_id}\n            aid={data.id}\n            memberActions={data?.member_actions}\n            type=\"answer\"\n            isAccepted={data.accepted === 2}\n            title={questionTitle}\n            callback={callback}\n          />\n        </div>\n        <div className=\"mb-3 mb-md-0 me-4\" style={{ minWidth: '196px' }}>\n          {data.update_user_info &&\n          data.update_user_info?.username !== data.user_info?.username ? (\n            <UserCard\n              data={data?.update_user_info}\n              time={Number(data.update_time)}\n              preFix={t('edit')}\n              isLogged={isLogged}\n              timelinePath={`/posts/${data.question_id}/${data.id}/timeline`}\n            />\n          ) : isLogged ? (\n            <Link to={`/posts/${data.question_id}/${data.id}/timeline`}>\n              <FormatTime\n                time={Number(data.update_time)}\n                preFix={t('edit')}\n                className=\"link-secondary small\"\n              />\n            </Link>\n          ) : (\n            <FormatTime\n              time={Number(data.update_time)}\n              preFix={t('edit')}\n              className=\"text-secondary small\"\n            />\n          )}\n        </div>\n        <div style={{ minWidth: '196px' }}>\n          <UserCard\n            data={data?.user_info}\n            time={Number(data.create_time)}\n            preFix={t('answered')}\n            isLogged={isLogged}\n            timelinePath={`/posts/${data.question_id}/${data.id}/timeline`}\n          />\n        </div>\n      </div>\n\n      <Comment\n        objectId={data.id}\n        mode=\"answer\"\n        commentId={searchParams.get('commentId')}\n      />\n    </div>\n  );\n};\n\nexport default memo(Index);\n","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport divWithClassName from './divWithClassName';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nconst AlertHeading = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = DivStyledAsH4,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-heading');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertHeading.displayName = 'AlertHeading';\nexport default AlertHeading;","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst AlertLink = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = Anchor,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-link');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertLink.displayName = 'AlertLink';\nexport default AlertLink;","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AlertHeading from './AlertHeading';\nimport AlertLink from './AlertLink';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef((uncontrolledProps, ref) => {\n  const {\n    bsPrefix,\n    show = true,\n    closeLabel = 'Close alert',\n    closeVariant,\n    className,\n    children,\n    variant = 'primary',\n    onClose,\n    dismissible,\n    transition = Fade,\n    ...props\n  } = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  const handleClose = useEventCallback(e => {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  const Transition = transition === true ? Fade : transition;\n  const alert = /*#__PURE__*/_jsxs(\"div\", {\n    role: \"alert\",\n    ...(!Transition ? props : undefined),\n    ref: ref,\n    className: classNames(className, prefix, variant && `${prefix}-${variant}`, dismissible && `${prefix}-dismissible`),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  });\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, {\n    unmountOnExit: true,\n    ...props,\n    ref: undefined,\n    in: show,\n    children: alert\n  });\n});\nAlert.displayName = 'Alert';\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});"],"names":["Index","aid","data","isLogged","questionTitle","callback","canAccept","_answerRef$current","_data$user_info","_data$update_user_inf","_data$user_info2","t","useTranslation","keyPrefix","searchParams","useSearchParams","answerRef","useRef","useRenderHtmlPlugin","current","querySelector","useEffect","htmlRender","copySuccessText","copyText","id","setTimeout","element","scrollToElementTop","get","bgFadeOut","_jsxs","ref","className","children","status","_jsx","Alert","variant","accepted","Badge","bg","pill","Icon","name","ImgViewer","dangerouslySetInnerHTML","__html","html","Actions","source","isHate","vote_status","isLike","votesCount","vote_count","hideCollect","collected","collectCount","username","user_info","Button","onClick","acceptAnswer","acceptanceAnswer","question_id","answer_id","then","Operate","qid","memberActions","member_actions","type","isAccepted","title","style","minWidth","update_user_info","UserCard","time","Number","update_time","preFix","timelinePath","Link","to","FormatTime","create_time","Comment","objectId","mode","commentId","memo","DivStyledAsH4","divWithClassName","displayName","AlertHeading","React","bsPrefix","as","Component","props","useBootstrapPrefix","classNames","AlertLink","Anchor","uncontrolledProps","show","closeLabel","closeVariant","onClose","dismissible","transition","Fade","useUncontrolled","prefix","handleClose","useEventCallback","e","Transition","alert","role","undefined","CloseButton","unmountOnExit","in","Object","assign","Heading"],"sourceRoot":""}