"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[6602],{16602:(e,i,t)=>{t.r(i),t.d(i,{default:()=>g});var s=t(12162),n=t(84873),a=t(68442),l=t(63962),r=t(18666),o=t(85940),d=t(98496),c=t(10428),u=t(45558),v=t(91408),x=t(93090),m=t(49450);const g=({refreshCount:e})=>{const{t:i}=(0,d.B)("translation",{keyPrefix:"page_review"}),[t,g]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[p,j]=(0,s.useState)(1),[_,b]=(0,s.useState)(),w=null===_||void 0===_?void 0:_.list[0],{info:y,type:A,unreviewed_info:N}=w||{info:null,type:"",unreviewed_info:null},k=e=>{(0,u.Xm)(e).then((i=>{((e,i)=>{const{count:t,list:s=[]}=e;if(!s.length&&t&&1!==p)return j(i=1),void k(i);i!==p&&j(i),b(e),s.length||f(!0),setTimeout((()=>{(0,x.Mv)()}),150)})(i,e)}))},C=null===N||void 0===N?void 0:N.content;let T="",L="",P=null===N||void 0===N?void 0:N.reason;const S=null===N||void 0===N?void 0:N.user_info,q=null===N||void 0===N?void 0:N.create_at;if("question"===A)T=v.w.questionLanding(null===y||void 0===y?void 0:y.object_id,null===y||void 0===y?void 0:y.url_title),L=null===y||void 0===y?void 0:y.object_id,P||=i("edit_question");else if("answer"===A)T=v.w.answerLanding({questionId:N.content.question_id,slugTitle:null===y||void 0===y?void 0:y.url_title,answerId:N.object_id}),L=N.object_id,P||=i("edit_answer");else if("tag"===A){const e=N.content;T=v.w.tagLanding(e.slug_name),L=(null===e||void 0===e?void 0:e.tag_id)||e.slug_name,P||=i("edit_tag")}if((0,s.useEffect)((()=>{k(p)}),[]),h)return null;let H={},U={},$={showTitle:!0,showTagUrlSlug:!0};return"question"===A&&y&&C&&"content"in C&&(H={title:C.title,original_text:C.content,tags:C.tags},U={title:y.title,original_text:y.content,tags:y.tags}),"answer"===A&&y&&C&&"content"in C&&(H={original_text:C.content},U={original_text:y.content}),"tag"===A&&y&&C&&(H={original_text:C.original_text},U={original_text:y.content},$={showTitle:!1,showTagUrlSlug:!1}),(0,m.jsxs)(n.A,{children:[(0,m.jsx)(n.A.Header,{children:i("suggest_edits")}),(0,m.jsxs)(n.A.Body,{className:"p-0",children:[(0,m.jsxs)(a.A,{variant:"info",className:"border-0 rounded-0 mb-0",children:[(0,m.jsxs)(l.A,{direction:"horizontal",gap:1,className:"align-items-center mb-2",children:[(0,m.jsx)(c.fZ,{data:S,avatarSize:"24",avatarClass:"me-2"}),q&&(0,m.jsx)(c.H0,{time:q,className:"small text-secondary",preFix:i("proposed")})]}),(0,m.jsx)(l.A,{className:"align-items-start",children:(0,m.jsx)("p",{className:"mb-0",children:P})})]}),(0,m.jsxs)("div",{className:"p-3",children:[(0,m.jsxs)("small",{className:"d-block text-secondary mb-4",children:[(0,m.jsxs)("span",{children:[i(A,{keyPrefix:"btns"})," "]}),(0,m.jsxs)(o.N_,{to:T,target:"_blank",className:"link-secondary",children:["#",L]})]}),(0,m.jsx)(c.V$,{className:"mt-2",objectType:A,newData:H,oldData:U,opts:$})]})]}),(0,m.jsxs)(n.A.Footer,{className:"p-3",children:[(0,m.jsx)("p",{children:i("approve_revision_tip")}),(0,m.jsxs)(l.A,{direction:"horizontal",gap:2,children:[(0,m.jsx)(r.A,{variant:"outline-primary",disabled:t,onClick:()=>{N&&(g(!0),(0,u.LG)(N.id,"approve").then((()=>{e(),k(p)})).finally((()=>{g(!1)})))},children:i("approve",{keyPrefix:"btns"})}),(0,m.jsx)(r.A,{variant:"outline-primary",disabled:t,onClick:()=>{N&&(g(!0),(0,u.LG)(N.id,"reject").then((()=>{e(),k(p)})).catch((e=>{console.error("revisionAudit reject error: ",e)})).finally((()=>{g(!1)})))},children:i("reject",{keyPrefix:"btns"})}),(0,m.jsx)(r.A,{variant:"outline-primary",disabled:t,onClick:()=>{k(p+1)},children:i("skip",{keyPrefix:"btns"})})]})]})]})}},68442:(e,i,t)=>{t.d(i,{A:()=>_});var s=t(59660),n=t.n(s),a=t(12162),l=t(18525),r=t(1921),o=t(42700),d=t(46024),c=t(49450);const u=(0,d.A)("h4");u.displayName="DivStyledAsH4";const v=a.forwardRef((({className:e,bsPrefix:i,as:t=u,...s},a)=>(i=(0,o.oU)(i,"alert-heading"),(0,c.jsx)(t,{ref:a,className:n()(e,i),...s}))));v.displayName="AlertHeading";const x=v;var m=t(41055);const g=a.forwardRef((({className:e,bsPrefix:i,as:t=m.A,...s},a)=>(i=(0,o.oU)(i,"alert-link"),(0,c.jsx)(t,{ref:a,className:n()(e,i),...s}))));g.displayName="AlertLink";const h=g;var f=t(70200),p=t(4576);const j=a.forwardRef(((e,i)=>{const{bsPrefix:t,show:s=!0,closeLabel:a="Close alert",closeVariant:d,className:u,children:v,variant:x="primary",onClose:m,dismissible:g,transition:h=f.A,...j}=(0,l.Zw)(e,{show:"onClose"}),_=(0,o.oU)(t,"alert"),b=(0,r.A)((e=>{m&&m(!1,e)})),w=!0===h?f.A:h,y=(0,c.jsxs)("div",{role:"alert",...w?void 0:j,ref:i,className:n()(u,_,x&&`${_}-${x}`,g&&`${_}-dismissible`),children:[g&&(0,c.jsx)(p.A,{onClick:b,"aria-label":a,variant:d}),v]});return w?(0,c.jsx)(w,{unmountOnExit:!0,...j,ref:void 0,in:s,children:y}):s?y:null}));j.displayName="Alert";const _=Object.assign(j,{Link:h,Heading:x})}}]);
//# sourceMappingURL=6602.8c96f617.chunk.js.map