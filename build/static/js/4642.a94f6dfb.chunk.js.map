{"version":3,"file":"static/js/4642.a94f6dfb.chunk.js","mappings":"4UA+BA,MAAMA,EAAW,CAAC,UAAW,OAAQ,UAwIrC,EAtIaC,KAAO,IAADC,EACjB,MAAOC,EAAWC,IAAgBC,EAAAA,EAAAA,OAC5B,EAAEC,IAAMC,EAAAA,EAAAA,GAAe,cAAe,CAAEC,UAAW,UAClDC,EAAWC,IAAgBC,EAAAA,EAAAA,UAAS,KACrC,QAAEC,IAAYC,EAAAA,EAAAA,KAAqBC,GAAMA,EAAEC,OAE3CC,EAAOC,OAAOd,EAAUe,IAAI,UAAY,EACxCC,EAAOhB,EAAUe,IAAI,SAAWlB,EAAS,IAI7CoB,KAAMC,EAAI,OACVC,EAAM,UACNC,IACEC,EAAAA,EAAAA,IAAa,CACfR,OACAS,UAPe,MAQXhB,EAAY,CAAEiB,UAAWjB,GAAc,CAAC,KACxCU,EAAO,CAAEQ,WAAYR,GAAS,CAAC,KAG/B,eAAES,IAAmBC,EAAAA,EAAAA,IAAmBN,GA0B9C,OAJAO,EAAAA,EAAAA,IAAY,CACVC,MAAOzB,EAAE,OAAQ,CAAEE,UAAW,kBAI9BwB,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,UAAU,YAAWC,SAAA,EACxBH,EAAAA,EAAAA,MAACI,EAAAA,EAAG,CAACC,IAAK,GAAGF,SAAA,EACXG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,OAAMC,SAAE7B,EAAE,YACxB0B,EAAAA,EAAAA,MAAA,OAAKE,UAAU,yEAAwEC,SAAA,EACrFH,EAAAA,EAAAA,MAACO,EAAAA,EAAK,CAACC,UAAU,aAAaC,IAAK,EAAGP,UAAU,eAAcC,SAAA,EAC5DG,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAAAP,UACHG,EAAAA,EAAAA,KAACI,EAAAA,EAAKC,MAAK,CAACC,UAAU,iBAAgBT,UACpCG,EAAAA,EAAAA,KAACI,EAAAA,EAAKG,QAAO,CACXC,MAAOrC,EACPsC,YAAazC,EAAE,sBACf0C,KAAK,SACLC,SApCMC,IACpBxC,EAAawC,EAAEC,OAAOL,OACtB1C,GAAcgD,IACZA,EAAKC,IAAI,OAAQ,KACVD,IACP,EAgCYE,KAAK,WAIE,IAAZ1C,GAA6B,IAAZA,GAChB0B,EAAAA,EAAAA,KAACiB,EAAAA,GAAI,CACHrB,UAAU,iCACVsB,GAAG,eAAcrB,SAChB7B,EAAE,QAAS,CAAEE,UAAW,gBAEzB,SAEN8B,EAAAA,EAAAA,KAACmB,EAAAA,GAAU,CACTrC,KAAMpB,EACN0D,YAAavC,GAAQ,UACrBwC,QAAQ,OACRC,cAAc,6BAKpB5B,EAAAA,EAAAA,MAACI,EAAAA,EAAG,CAACF,UAAU,OAAOG,IAAK,GAAGF,SAAA,EAC5BG,EAAAA,EAAAA,KAACL,EAAAA,EAAG,CAAAE,SACDP,GACCU,EAAAA,EAAAA,KAACuB,EAAAA,GAAU,IAEP,OAAJxC,QAAI,IAAJA,GAAU,QAANnB,EAAJmB,EAAMyC,YAAI,IAAA5D,OAAN,EAAJA,EAAY6D,KAAKC,IACf1B,EAAAA,EAAAA,KAACF,EAAAA,EAAG,CAEF6B,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GACJnC,UAAU,OAAMC,UAChBG,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CAACpC,UAAU,QAAOC,UACrBH,EAAAA,EAAAA,MAACsC,EAAAA,EAAKC,KAAI,CAACrC,UAAU,uCAAsCC,SAAA,EACzDG,EAAAA,EAAAA,KAACkC,EAAAA,GAAG,CAACtC,UAAU,OAAOd,KAAM4C,KAE5B1B,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oEAAmEC,UAC/EsC,EAAAA,EAAAA,IAAaT,EAAIU,YAEpB1C,EAAAA,EAAAA,MAAA,OAAKE,UAAU,4BAA2BC,SAAA,EACxCG,EAAAA,EAAAA,KAACqC,EAAAA,EAAM,CACLzC,UAAW,SAAQ8B,EAAIY,YAAc,SAAW,IAChDC,QAAQ,kBACRvB,KAAK,KACLwB,QAASA,IA5ETd,MACfe,EAAAA,EAAAA,kBAAgB,KAGrBC,EAAAA,EAAAA,IAAU,CACRC,UAAWjB,EAAIkB,OACfC,UAAWnB,EAAIY,cACdQ,MAAK,KACN9D,GAAQ,GACR,EAmEiC+D,CAAarB,GAAK7B,SAChC6B,EAAIY,YACDtE,EAAE,oBACFA,EAAE,oBAER0B,EAAAA,EAAAA,MAAA,QAAME,UAAU,mCAAkCC,SAAA,EAC/CmD,EAAAA,EAAAA,IAAYtB,EAAIuB,gBAAgB,IAAEjF,EAAE,yBAzBxC0D,EAAItC,gBAkCjBY,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gCAA+BC,UAC5CG,EAAAA,EAAAA,KAACkD,EAAAA,GAAU,CACTC,YAAazE,EACb0E,WAAe,OAAJrE,QAAI,IAAJA,OAAI,EAAJA,EAAMsE,QAAS,EAC1BC,SArHO,YAyHT,C,4FC7JV,MAAM3D,EAAmB4D,EAAAA,YAAiB,EACxCC,WACA5D,YAEA6D,GAAIC,EAAY,SACbC,GACFC,KACD,MAAMC,GAAoBC,EAAAA,EAAAA,IAAmBN,EAAU,OACjDO,GAAcC,EAAAA,EAAAA,MACdC,GAAgBC,EAAAA,EAAAA,MAChBC,EAAa,GAAGN,SAChBO,EAAU,GAehB,OAdAL,EAAYM,SAAQC,IAClB,MAAMC,EAAYZ,EAAMW,GAExB,IAAIE,SADGb,EAAMW,GAEI,MAAbC,GAA0C,kBAAdA,IAE5BC,QACED,GAEJC,EAAOD,EAET,MAAME,EAAQH,IAAaL,EAAgB,IAAIK,IAAa,GAChD,MAARE,GAAcJ,EAAQM,KAAK,GAAGP,IAAaM,KAASD,IAAO,KAE7CxE,EAAAA,EAAAA,KAAK0D,EAAW,CAClCE,IAAKA,KACFD,EACH/D,UAAW+E,IAAW/E,EAAWiE,KAAsBO,IACvD,IAEJzE,EAAIiF,YAAc,MAClB,S","sources":["pages/Tags/index.tsx","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/Row.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useState } from 'react';\nimport { Row, Col, Card, Button, Form, Stack } from 'react-bootstrap';\nimport { useSearchParams, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { usePageTags, useSkeletonControl } from '@/hooks';\nimport { Tag, Pagination, QueryGroup, TagsLoader } from '@/components';\nimport { formatCount, escapeRemove } from '@/utils';\nimport { tryNormalLogged } from '@/utils/guard';\nimport { useQueryTags, following } from '@/services';\nimport { loggedUserInfoStore } from '@/stores';\n\nconst sortBtns = ['popular', 'name', 'newest'];\n\nconst Tags = () => {\n  const [urlSearch, setUrlSearch] = useSearchParams();\n  const { t } = useTranslation('translation', { keyPrefix: 'tags' });\n  const [searchTag, setSearchTag] = useState('');\n  const { role_id } = loggedUserInfoStore((_) => _.user);\n\n  const page = Number(urlSearch.get('page')) || 1;\n  const sort = urlSearch.get('sort') || sortBtns[0];\n\n  const pageSize = 20;\n  const {\n    data: tags,\n    mutate,\n    isLoading,\n  } = useQueryTags({\n    page,\n    page_size: pageSize,\n    ...(searchTag ? { slug_name: searchTag } : {}),\n    ...(sort ? { query_cond: sort } : {}),\n  });\n\n  const { isSkeletonShow } = useSkeletonControl(isLoading);\n\n  const handleChange = (e) => {\n    setSearchTag(e.target.value);\n    setUrlSearch((prev) => {\n      prev.set('page', '1');\n      return prev;\n    });\n  };\n\n  const handleFollow = (tag) => {\n    if (!tryNormalLogged(true)) {\n      return;\n    }\n    following({\n      object_id: tag.tag_id,\n      is_cancel: tag.is_follower,\n    }).then(() => {\n      mutate();\n    });\n  };\n\n  usePageTags({\n    title: t('tags', { keyPrefix: 'page_title' }),\n  });\n\n  return (\n    <Row className=\"py-4 mb-4\">\n      <Col xxl={12}>\n        <h3 className=\"mb-4\">{t('title')}</h3>\n        <div className=\"d-block d-sm-flex justify-content-between align-items-center flex-wrap\">\n          <Stack direction=\"horizontal\" gap={3} className=\"mb-3 mb-sm-0\">\n            <Form>\n              <Form.Group controlId=\"formBasicEmail\">\n                <Form.Control\n                  value={searchTag}\n                  placeholder={t('search_placeholder')}\n                  type=\"search\"\n                  onChange={handleChange}\n                  size=\"sm\"\n                />\n              </Form.Group>\n            </Form>\n            {role_id === 2 || role_id === 3 ? (\n              <Link\n                className=\"btn btn-outline-primary btn-sm\"\n                to=\"/tags/create\">\n                {t('title', { keyPrefix: 'tag_modal' })}\n              </Link>\n            ) : null}\n          </Stack>\n          <QueryGroup\n            data={sortBtns}\n            currentSort={sort || 'popular'}\n            sortKey=\"sort\"\n            i18nKeyPrefix=\"tags.sort_buttons\"\n          />\n        </div>\n      </Col>\n\n      <Col className=\"mt-4\" xxl={12}>\n        <Row>\n          {isSkeletonShow ? (\n            <TagsLoader />\n          ) : (\n            tags?.list?.map((tag) => (\n              <Col\n                key={tag.slug_name}\n                xl={3}\n                lg={4}\n                md={4}\n                sm={6}\n                xs={12}\n                className=\"mb-4\">\n                <Card className=\"h-100\">\n                  <Card.Body className=\"d-flex flex-column align-items-start\">\n                    <Tag className=\"mb-3\" data={tag} />\n\n                    <div className=\"small flex-fill text-break text-wrap text-truncate-3 reset-p mb-3\">\n                      {escapeRemove(tag.excerpt)}\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                      <Button\n                        className={`me-2 ${tag.is_follower ? 'active' : ''}`}\n                        variant=\"outline-primary\"\n                        size=\"sm\"\n                        onClick={() => handleFollow(tag)}>\n                        {tag.is_follower\n                          ? t('button_following')\n                          : t('button_follow')}\n                      </Button>\n                      <span className=\"text-secondary small text-nowrap\">\n                        {formatCount(tag.question_count)} {t('tag_label')}\n                      </span>\n                    </div>\n                  </Card.Body>\n                </Card>\n              </Col>\n            ))\n          )}\n        </Row>\n        <div className=\"d-flex justify-content-center\">\n          <Pagination\n            currentPage={page}\n            totalSize={tags?.count || 0}\n            pageSize={pageSize}\n          />\n        </div>\n      </Col>\n    </Row>\n  );\n};\n\nexport default Tags;\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints, useBootstrapMinBreakpoint } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const breakpoints = useBootstrapBreakpoints();\n  const minBreakpoint = useBootstrapMinBreakpoint();\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  breakpoints.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n    const infix = brkPoint !== minBreakpoint ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;"],"names":["sortBtns","Tags","_tags$list","urlSearch","setUrlSearch","useSearchParams","t","useTranslation","keyPrefix","searchTag","setSearchTag","useState","role_id","loggedUserInfoStore","_","user","page","Number","get","sort","data","tags","mutate","isLoading","useQueryTags","page_size","slug_name","query_cond","isSkeletonShow","useSkeletonControl","usePageTags","title","_jsxs","Row","className","children","Col","xxl","_jsx","Stack","direction","gap","Form","Group","controlId","Control","value","placeholder","type","onChange","e","target","prev","set","size","Link","to","QueryGroup","currentSort","sortKey","i18nKeyPrefix","TagsLoader","list","map","tag","xl","lg","md","sm","xs","Card","Body","Tag","escapeRemove","excerpt","Button","is_follower","variant","onClick","tryNormalLogged","following","object_id","tag_id","is_cancel","then","handleFollow","formatCount","question_count","Pagination","currentPage","totalSize","count","pageSize","React","bsPrefix","as","Component","props","ref","decoratedBsPrefix","useBootstrapPrefix","breakpoints","useBootstrapBreakpoints","minBreakpoint","useBootstrapMinBreakpoint","sizePrefix","classes","forEach","brkPoint","propValue","cols","infix","push","classNames","displayName"],"sourceRoot":""}