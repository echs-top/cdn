"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[7795],{7795:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var i=a(12162),s=a(98496),l=a(10428),c=a(28093),r=a(59304),n=a(45558),o=a(51861),u=a(72055),p=a(93090),d=a(49450);const _=()=>{const{t:e}=(0,s.B)("translation",{keyPrefix:"admin.general"}),t=(0,c.dj)(),a=(0,r.Ty)((e=>e.update)),{data:_}=(0,n.qu)(),h={title:e("page_title"),required:["name","site_url","contact_email"],properties:{name:{type:"string",title:e("name.label"),description:e("name.text")},site_url:{type:"string",title:e("site_url.label"),description:e("site_url.text")},short_description:{type:"string",title:`${e("short_desc.label")} ${e("optional",{keyPrefix:"form"})}`,description:e("short_desc.text")},description:{type:"string",title:`${e("desc.label")} ${e("optional",{keyPrefix:"form"})}`,description:e("desc.text")},contact_email:{type:"string",title:e("contact_email.label"),description:e("contact_email.text")},check_update:{type:"boolean",title:e("check_update.label"),default:!0}}},m={site_url:{"ui:options":{inputType:"url",validator:t=>{let a;try{a=new URL(t)}catch(i){return e("site_url.validate")}return!(!a||!/^https?:$/.test(a.protocol)||u.Ui&&a.pathname!==u.Ui||!u.Ui&&"/"!==a.pathname||""!==a.search||""!==a.hash)||e("site_url.validate")}}},contact_email:{"ui:options":{inputType:"email",validator:t=>!!o.A.email.test(t)||e("contact_email.validate")}},check_update:{"ui:widget":"switch","ui:options":{label:e("check_update.text")}}},[v,k]=(0,i.useState)((0,l.pw)(h));(0,i.useEffect)((()=>{if(!_)return;const e={};Object.keys(v).forEach((t=>{e[t]={...v[t],value:_[t]}})),k({...v,...e})}),[_]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{className:"mb-4",children:e("page_title")}),(0,d.jsx)(l.q,{schema:h,formData:v,onSubmit:i=>{i.preventDefault(),i.stopPropagation();const s={name:v.name.value,description:v.description.value,short_description:v.short_description.value,site_url:v.site_url.value,contact_email:v.contact_email.value,check_update:v.check_update.value};(0,n.G8)(s).then((i=>{t.onShow({msg:e("update",{keyPrefix:"toast"}),variant:"success"}),i.name&&(v.name.value=i.name,v.description.value=i.description,v.short_description.value=i.short_description,v.site_url.value=i.site_url,v.contact_email.value=i.contact_email,v.check_update.value=i.check_update),k({...v}),a(i)})).catch((e=>{if(e.isError){const t=(0,p.NC)(e,v);k({...t});const a=document.getElementById(e.list[0].error_field);(0,p.qt)(a)}}))},uiSchema:m,onChange:e=>{k(e)}})]})}}}]);
//# sourceMappingURL=7795.a78883ce.chunk.js.map