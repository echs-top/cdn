"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[8587],{68587:(e,a,l)=>{l.r(a),l.d(a,{default:()=>m});var s=l(12162),i=l(14592),r=l(18666),n=l(98496),t=l(28093),o=l(32563),d=l(45558),c=l(93090),v=l(49450);const u=()=>{var e;const{t:a}=(0,n.B)("translation",{keyPrefix:"settings.account"}),[l,u]=(0,s.useState)(1),[m,p]=(0,s.useState)({e_mail:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""}}),[h,g]=(0,s.useState)(),_=(0,t.dj)(),b=(0,o.T5)("edit_userinfo");(0,s.useEffect)((()=>{(0,d.aV)().then((e=>{g(e)}))}),[]);const x=e=>{p({...m,...e})},j=e=>{e&&e.preventDefault();const l={e_mail:m.e_mail.value,pass:m.pass.value},s=null===b||void 0===b?void 0:b.getCaptcha();null!==s&&void 0!==s&&s.verify&&(l.captcha_code=s.captcha_code,l.captcha_id=s.captcha_id),(0,d.BZ)(l).then((async()=>{await(null===b||void 0===b?void 0:b.close()),u(1),_.onShow({msg:a("change_email_info"),variant:"warning"}),p({e_mail:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""}})})).catch((e=>{if(e.isError){null===b||void 0===b||b.handleCaptchaError(e.list);const a=(0,c.NC)(e,m);p({...a});const l=document.getElementById(e.list[0].error_field);(0,c.qt)(l)}}))};return(0,v.jsxs)("div",{children:[1===l&&(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(i.A.Group,{controlId:"oldEmail",className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:a("email.label")}),(0,v.jsx)(i.A.Control,{type:"text",disabled:!0,defaultValue:null===h||void 0===h||null===(e=h.e_mail)||void 0===e?void 0:e.replace(/(.{2})(.+)(@.+)/i,"$1****$3")})]}),(0,v.jsx)(r.A,{variant:"outline-secondary",onClick:()=>{u(2)},children:a("change_email_btn")})]}),2===l&&(0,v.jsxs)(i.A,{noValidate:!0,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),(()=>{let e=!0;const{e_mail:l,pass:s}=m;if(l.value||(e=!1,m.e_mail={value:"",isInvalid:!0,errorMsg:a("new_email.msg")}),s.value||(e=!1,m.pass={value:"",isInvalid:!0,errorMsg:a("pass.msg")}),p({...m}),!e){const e=Object.keys(m).filter((e=>m[e].isInvalid)),a=document.getElementById(e[0]);(0,c.qt)(a)}return e})()&&(b?b.check((()=>{j()})):j())},children:[(0,v.jsxs)(i.A.Group,{controlId:"pass",className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:a("pass.label")}),(0,v.jsx)(i.A.Control,{autoComplete:"new-password",required:!0,type:"password",isInvalid:m.pass.isInvalid,onChange:e=>x({pass:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,v.jsx)(i.A.Control.Feedback,{type:"invalid",children:m.pass.errorMsg})]}),(0,v.jsxs)(i.A.Group,{controlId:"e_mail",className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:a("new_email.label")}),(0,v.jsx)(i.A.Control,{autoComplete:"off",required:!0,type:"email",placeholder:"",value:m.e_mail.value,isInvalid:m.e_mail.isInvalid,onChange:e=>x({e_mail:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,v.jsx)(i.A.Control.Feedback,{type:"invalid",children:m.e_mail.errorMsg})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(r.A,{type:"submit",variant:"primary",className:"me-2",children:a("save",{keyPrefix:"btns"})}),(0,v.jsx)(r.A,{variant:"link",onClick:()=>u(1),children:a("cancel",{keyPrefix:"btns"})})]})]})]})},m=s.memo(u)}}]);
//# sourceMappingURL=8587.4d09dd74.chunk.js.map