"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[2684],{12684:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var i=a(12162),l=a(98496),r=a(51780),s=a(10428),n=a(28093),_=a(45558),o=a(93090),c=a(59304),p=a(49450);const y=()=>{const{t:e}=(0,l.B)("translation",{keyPrefix:"admin.legal"}),t=(0,n.dj)(),a=[{value:"always_display",label:e("external_content_display.always_display")},{value:"ask_before_display",label:e("external_content_display.ask_before_display")}],y={title:e("page_title"),required:["terms_of_service","privacy_policy"],properties:{external_content_display:{type:"string",title:e("external_content_display.label"),description:e("external_content_display.text"),enum:null===a||void 0===a?void 0:a.map((e=>e.value)),enumNames:null===a||void 0===a?void 0:a.map((e=>e.label)),default:0},terms_of_service:{type:"string",title:e("terms_of_service.label"),description:e("terms_of_service.text")},privacy_policy:{type:"string",title:e("privacy_policy.label"),description:e("privacy_policy.text")}}},[d,v]=(0,i.useState)((0,s.pw)(y));(0,i.useEffect)((()=>{(0,_.SU)().then((e=>{if(e){const t={...d};t.external_content_display.value=e.external_content_display,t.terms_of_service.value=e.terms_of_service_original_text,t.privacy_policy.value=e.privacy_policy_original_text,v(t)}}))}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"mb-4",children:e("page_title")}),(0,p.jsx)(s.q,{schema:y,formData:d,onSubmit:a=>{a.preventDefault(),a.stopPropagation();const i={external_content_display:d.external_content_display.value,terms_of_service_original_text:d.terms_of_service.value,terms_of_service_parsed_text:r.xI.parse(d.terms_of_service.value),privacy_policy_original_text:d.privacy_policy.value,privacy_policy_parsed_text:r.xI.parse(d.privacy_policy.value)};(0,_.BA)(i).then((()=>{t.onShow({msg:e("update",{keyPrefix:"toast"}),variant:"success"}),c.xG.getState().update({external_content_display:i.external_content_display})})).catch((e=>{if(e.isError){const t=(0,o.NC)(e,d);v({...t});const a=document.getElementById(e.list[0].error_field);(0,o.qt)(a)}}))},uiSchema:{external_content_display:{"ui:widget":"select"},terms_of_service:{"ui:widget":"textarea","ui:options":{rows:10}},privacy_policy:{"ui:widget":"textarea","ui:options":{rows:10}}},onChange:e=>{v(e)}})]})}}}]);
//# sourceMappingURL=2684.a88deb4b.chunk.js.map