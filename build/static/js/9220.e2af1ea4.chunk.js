"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[7264,9220],{14883:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var s=n(69805),i=n(98496),r=n(85940),a=n(10428),l=n(45558),d=n(28093),c=n(59304),o=n(49450);const x=({itemData:e,refreshList:t,curFilter:n,show:x,pin:m})=>{const{t:h}=(0,i.B)("translation",{keyPrefix:"delete"}),u=(0,d.dj)(),f=(0,d.TS)((()=>{c.ZW.getState().show({msg:h("post_closed",{keyPrefix:"messages"}),variant:"success"}),t()})),p=n=>{if("delete"===n&&a.aF.confirm({title:h("title",{keyPrefix:"delete"}),content:e.answer_count>0?h("question",{keyPrefix:"delete"}):h("other",{keyPrefix:"delete"}),cancelBtnVariant:"link",confirmBtnVariant:"danger",confirmText:h("delete",{keyPrefix:"btns"}),onConfirm:()=>{(0,l.bM)(e.id,"deleted").then((()=>{c.ZW.getState().show({msg:h("post_deleted",{keyPrefix:"messages"}),variant:"success"}),t()}))}}),"undelete"===n&&a.aF.confirm({title:h("undelete_title"),content:h("undelete_desc"),cancelBtnVariant:"link",confirmBtnVariant:"danger",confirmText:h("undelete",{keyPrefix:"btns"}),onConfirm:()=>{(0,l.bM)(e.id,"available").then((()=>{c.ZW.getState().show({msg:h("post_cancel_deleted",{keyPrefix:"messages"}),variant:"success"}),t()}))}}),"close"===n&&f.onShow({type:"question",id:e.id,action:"close"}),"reopen"===n&&a.aF.confirm({title:h("title",{keyPrefix:"question_detail.reopen"}),content:h("content",{keyPrefix:"question_detail.reopen"}),cancelBtnVariant:"link",confirmText:h("confirm_btn",{keyPrefix:"question_detail.reopen"}),onConfirm:()=>{(0,l.aA)({question_id:e.id}).then((()=>{c.ZW.getState().show({msg:h("post_reopen",{keyPrefix:"messages"}),variant:"success"}),t()}))}}),"list"===n||"unlist"===n){const s="list"===n?"question_detail.list":"question_detail.unlist";a.aF.confirm({title:h("title",{keyPrefix:s}),content:h("content",{keyPrefix:s}),cancelBtnVariant:"link",confirmText:h("confirm_btn",{keyPrefix:s}),onConfirm:()=>{(0,l.W7)({id:e.id,operation:"list"===n?"show":"hide"}).then((()=>{u.onShow({msg:h(`post_${n}`,{keyPrefix:"messages"}),variant:"success"}),t()}))}})}};return"pending"===n?(0,o.jsx)(r.N_,{to:`/review?type=queued_post&objectId=${e.id}`,className:"btn btn-link p-0",title:h("review",{keyPrefix:"header.nav"}),children:(0,o.jsx)(a.In,{name:"three-dots-vertical"})}):(0,o.jsxs)(s.A,{children:[(0,o.jsx)(s.A.Toggle,{variant:"link",className:"no-toggle p-0",children:(0,o.jsx)(a.In,{name:"three-dots-vertical",title:h("action",{keyPrefix:"admin.answers"})})}),(0,o.jsxs)(s.A.Menu,{align:"end",children:["normal"===n&&(0,o.jsx)(s.A.Item,{onClick:()=>p("close"),children:h("close",{keyPrefix:"btns"})}),"closed"===n&&(0,o.jsx)(s.A.Item,{onClick:()=>p("reopen"),children:h("reopen",{keyPrefix:"btns"})}),"deleted"!==n?(0,o.jsx)(s.A.Item,{onClick:()=>p("delete"),children:h("delete",{keyPrefix:"btns"})}):(0,o.jsx)(s.A.Item,{onClick:()=>p("undelete"),children:h("undelete",{keyPrefix:"btns"})}),2===x?(0,o.jsx)(s.A.Item,{onClick:()=>p("list"),children:h("list",{keyPrefix:"btns"})}):2!==m&&(0,o.jsx)(s.A.Item,{onClick:()=>p("unlist"),children:h("unlist",{keyPrefix:"btns"})})]})]})}},39220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(63962),i=n(18666),r=n(14592),a=n(27396),l=n(85940),d=n(98496),c=n(59660),o=n.n(c),x=n(10428),m=n(91374),h=n(45558),u=n(91408),f=n(59304),p=n(14883),y=n(49450);const j=["normal","pending","closed","deleted"],k=()=>{var e;const[t,n]=(0,l.ok)(),c=t.get("status")||j[0],k=Number(t.get("page"))||1,g=t.get("query")||"",{t:_}=(0,d.B)("translation",{keyPrefix:"admin.questions"}),{data:b,isLoading:v,mutate:w}=(0,h.Al)({page_size:20,page:k,status:c,query:g}),P=(null===b||void 0===b?void 0:b.count)||0;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h3",{className:"mb-4",children:_("page_title")}),(0,y.jsxs)("div",{className:"d-flex flex-wrap justify-content-between align-items-center",children:[(0,y.jsxs)(s.A,{direction:"horizontal",gap:3,className:"mb-3",children:[(0,y.jsx)(x.gu,{data:j,currentSort:c,sortKey:"status",i18nKeyPrefix:"btns"}),"deleted"===c&&P>0?(0,y.jsx)(i.A,{variant:"outline-danger",size:"sm",onClick:()=>{x.aF.confirm({title:_("title",{keyPrefix:"delete_permanently"}),content:_("content",{keyPrefix:"delete_permanently"}),cancelBtnVariant:"link",confirmText:_("delete",{keyPrefix:"btns"}),confirmBtnVariant:"danger",onConfirm:()=>{(0,h.jM)("questions").then((()=>{f.ZW.getState().show({msg:_("posts_deleted",{keyPrefix:"messages"}),variant:"success"}),w()}))}})},children:_("deleted_permanently",{keyPrefix:"btns"})}):null]}),(0,y.jsx)(r.A.Control,{value:g,size:"sm",type:"search",placeholder:_("filter.placeholder"),onChange:e=>{t.set("query",e.target.value),t.delete("page"),n(t)},style:{width:"12.25rem"},className:"mb-3"})]}),(0,y.jsxs)(a.A,{responsive:"md",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{className:"min-w-15",children:_("post")}),(0,y.jsx)("th",{style:{width:"8%"},children:_("votes")}),(0,y.jsx)("th",{style:{width:"8%"},children:_("answers")}),(0,y.jsx)("th",{style:{width:"15%"},children:_("created")}),(0,y.jsx)("th",{style:{width:"14%"},children:_("status")}),(0,y.jsx)("th",{style:{width:"10%"},className:"text-end",children:_("action")})]})}),(0,y.jsx)("tbody",{className:"align-middle",children:null===b||void 0===b||null===(e=b.list)||void 0===e?void 0:e.map((e=>{var t,n;return(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{children:[(0,y.jsx)(l.N_,{to:u.w.questionLanding(e.id,e.url_title),target:"_blank",className:"text-break text-wrap",rel:"noreferrer",children:e.title}),e.accepted_answer_id>0&&(0,y.jsx)(x.In,{name:"check-circle-fill",className:"ms-2 text-success"})]}),(0,y.jsx)("td",{children:e.vote_count}),(0,y.jsx)("td",{children:(0,y.jsx)(l.N_,{to:`/admin/answers?questionId=${e.id}`,rel:"noreferrer",children:e.answer_count})}),(0,y.jsx)("td",{children:(0,y.jsxs)(s.A,{children:[(0,y.jsx)(x.fZ,{avatarSize:"20",data:e.user_info,nameMaxWidth:"130px"}),(0,y.jsx)(x.H0,{className:"small text-secondary",time:e.create_time})]})}),(0,y.jsxs)("td",{children:[(0,y.jsx)("span",{className:o()("badge","me-1","mb-1",null===(t=m.__[c])||void 0===t?void 0:t.variant),children:_(null===(n=m.__[c])||void 0===n?void 0:n.name,{keyPrefix:"btns"})}),2===e.show&&(0,y.jsx)("span",{className:o()("badge",m.__.unlisted.variant),children:_(m.__.unlisted.name,{keyPrefix:"btns"})})]}),(0,y.jsx)("td",{className:"text-end",children:(0,y.jsx)(p.default,{itemData:{id:e.id,answer_count:e.answer_count},refreshList:w,curFilter:c,show:e.show,pin:e.pin})})]},e.id)}))})]}),Number(P)<=0&&!v&&(0,y.jsx)(x.Sv,{}),(0,y.jsx)("div",{className:"mt-4 mb-2 d-flex justify-content-center",children:(0,y.jsx)(x.dK,{currentPage:k,totalSize:P,pageSize:20})})]})}},27396:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(59660),i=n.n(s),r=n(12162),a=n(42700),l=n(49450);const d=r.forwardRef((({bsPrefix:e,className:t,striped:n,bordered:s,borderless:r,hover:d,size:c,variant:o,responsive:x,...m},h)=>{const u=(0,a.oU)(e,"table"),f=i()(t,u,o&&`${u}-${o}`,c&&`${u}-${c}`,n&&`${u}-${"string"===typeof n?`striped-${n}`:"striped"}`,s&&`${u}-bordered`,r&&`${u}-borderless`,d&&`${u}-hover`),p=(0,l.jsx)("table",{...m,className:f,ref:h});if(x){let e=`${u}-responsive`;return"string"===typeof x&&(e=`${e}-${x}`),(0,l.jsx)("div",{className:e,children:p})}return p}))}}]);
//# sourceMappingURL=9220.e2af1ea4.chunk.js.map