"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[1646,2229,3950],{73950:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var s=n(12162),a=n(98496),l=n(53652),i=n(14592),o=n(69805),r=n(18666),d=n(79673),c=n.n(d),m=n(45558),u=(n(1646),n(49450));const x=({visible:e,sourceTag:t,onClose:n,onConfirm:d})=>{const{t:x}=(0,a.B)("translation",{keyPrefix:"tag_info.merge"}),[v,g]=(0,s.useState)(null),[h,_]=(0,s.useState)(""),[f,y]=(0,s.useState)([]),[p,j]=(0,s.useState)(0),[b,A]=(0,s.useState)(!1),k=(0,s.useRef)(null),N=(0,s.useCallback)(c()((e=>{e?(0,m._D)(e).then((e=>{const n=e.filter((e=>e.slug_name!==t.slug_name))||[];y(n||[]),A(!0)})):y([])}),400),[]),w=e=>{var t;g(e),A(!1),_(e.display_name),null===(t=k.current)||void 0===t||t.blur()};return(0,s.useEffect)((()=>{e&&(N(""),_(""),g(null),j(0),A(!1))}),[e]),(0,u.jsxs)(l.A,{show:e,onCancel:n,className:"mergeTagModal",children:[(0,u.jsx)(l.A.Header,{children:(0,u.jsx)(l.A.Title,{children:x("title")})}),(0,u.jsx)(l.A.Body,{children:(0,u.jsxs)(i.A,{children:[(0,u.jsxs)(i.A.Group,{className:"mb-3",children:[(0,u.jsx)(i.A.Label,{children:x("source_tag_title")}),(0,u.jsx)(i.A.Control,{value:t.display_name,disabled:!0}),(0,u.jsx)(i.A.Text,{className:"text-muted",children:x("source_tag_description")})]}),(0,u.jsxs)(i.A.Group,{children:[(0,u.jsx)(i.A.Label,{children:x("target_tag_title")}),(0,u.jsx)("div",{className:"position-relative",children:(0,u.jsxs)(o.A,{show:Boolean(b&&h),onToggle:A,children:[(0,u.jsx)(i.A.Control,{ref:k,type:"text",value:h,onChange:e=>{const t=e.currentTarget.value.trim();_(t),N(t)},onKeyDown:e=>{var t;if(f.length)switch(e.key){case"ArrowDown":e.preventDefault(),j((e=>e<f.length-1?e+1:e));break;case"ArrowUp":e.preventDefault(),j((e=>e>0?e-1:e));break;case"Enter":e.preventDefault(),p>=0&&p<f.length&&w(f[p]);break;case"Escape":e.preventDefault(),null===(t=k.current)||void 0===t||t.blur(),A(!1)}},onBlur:()=>{setTimeout((()=>{v||A(!1)}),200)},autoComplete:"off"}),(0,u.jsxs)(o.A.Menu,{className:"w-100",children:[f.map(((e,t)=>(0,u.jsx)(o.A.Item,{active:t===p,onClick:()=>w(e),children:e.display_name},e.slug_name))),!f.length&&h&&(0,u.jsx)(o.A.Item,{disabled:!0,children:x("no_results")})]})]})}),(0,u.jsx)(i.A.Text,{className:"text-muted",children:x("target_tag_description")})]})]})}),(0,u.jsxs)(l.A.Footer,{children:[(0,u.jsx)(r.A,{variant:"link",onClick:n,children:x("close",{keyPrefix:"btns"})}),(0,u.jsx)(r.A,{onClick:()=>{v&&d(t.tag_id,v.tag_id)},disabled:!v,children:x("submit",{keyPrefix:"btns"})})]})]})}},82229:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var s=n(12162),a=n(98128),l=n(8810),i=n(68442),o=n(18666),r=n(84873),d=n(85940),c=n(98496),m=n(59660),u=n.n(m),x=n(28093),v=n(10428),g=n(45558),h=n(91408),_=n(59304),f=n(73950),y=n(49450);const p=()=>{var e,t,n;const m=(0,_.bb)((e=>e.user)),p=(0,d.zy)(),j=Boolean(null===m||void 0===m?void 0:m.access_token),[b,A]=(0,s.useState)(!1),{tagName:k}=(0,d.g)(),{data:N,mutate:w}=(0,g.MF)({name:k}),{t:C}=(0,c.B)("translation",{keyPrefix:"tag_info"}),T=(0,d.Zp)(),{data:P,mutate:S}=(0,g.hn)(null===N||void 0===N?void 0:N.tag_id,null===N||void 0===N?void 0:N.status),[F,$]=(0,s.useState)(!1);let B="";if(N&&(B=`'${N.display_name}' ${C("tag_wiki",{keyPrefix:"page_title"})}`),(0,x.M4)({title:B}),(0,s.useEffect)((()=>{var e;if(null!==(e=p.state)&&void 0!==e&&e.isReview){_.ZW.getState().show({msg:C("review",{keyPrefix:"toast"}),variant:"warning"});const e={...p};delete e.state,window.history.replaceState(null,"",e.pathname)}}),[p.state]),(0,s.useEffect)((()=>{const e=document.querySelector(".content.fmt");e&&(0,v._A)(e,{copySuccessText:C("copied",{keyPrefix:"messages"}),copyText:C("copy",{keyPrefix:"messages"})})}),[null===N||void 0===N?void 0:N.parsed_text]),!N)return null;if(N.main_tag_slug_name)return T(h.w.tagInfo(N.main_tag_slug_name),{replace:!0}),null;const D=()=>{A(!0)},E=e=>{"edit"===e.action&&(0,g.xJ)(null===N||void 0===N?void 0:N.tag_id).then((()=>{T(h.w.tagEdit(null===N||void 0===N?void 0:N.tag_id))})),"delete"===e.action&&(null!==P&&void 0!==P&&P.synonyms&&P.synonyms.length>0?v.aF.confirm({title:C("delete.title"),content:C("delete.tip_with_synonyms"),showConfirm:!1,cancelText:C("delete.close")}):N.question_count>0?v.aF.confirm({title:C("delete.title"),content:C("delete.tip_with_posts"),showConfirm:!1,cancelText:C("delete.close")}):v.aF.confirm({title:C("delete.title"),content:C("delete.tip"),confirmText:C("delete",{keyPrefix:"btns"}),confirmBtnVariant:"danger",onConfirm:()=>{(0,g._R)(N.tag_id).then((()=>{T("/tags",{replace:!0})}))}})),"merge"===e.action&&$(!0),"undelete"===e.action&&v.aF.confirm({title:C("undelete_title",{keyPrefix:"delete"}),content:C("undelete_desc",{keyPrefix:"delete"}),cancelBtnVariant:"link",confirmBtnVariant:"danger",confirmText:C("undelete",{keyPrefix:"btns"}),onConfirm:()=>{(0,g.fU)(N.tag_id).then((()=>{w()}))}})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(a.A,{className:"pt-4 mb-5",children:[(0,y.jsxs)(l.A,{className:"page-main flex-auto",children:["deleted"===(null===N||void 0===N?void 0:N.status)&&(0,y.jsx)(i.A,{variant:"danger",className:"mb-4",children:C("post_deleted",{keyPrefix:"messages"})}),(0,y.jsx)("h3",{className:"mb-3",children:(0,y.jsx)(d.N_,{to:h.w.tagLanding(N.slug_name),replace:!0,className:"link-dark",children:N.display_name})}),(0,y.jsxs)("div",{className:"text-secondary mb-4 small",children:[(0,y.jsx)(v.H0,{preFix:C("created_at"),time:N.created_at}),(0,y.jsx)(v.H0,{preFix:C("edited_at"),className:"ms-3",time:N.updated_at})]}),(0,y.jsx)("div",{className:"content text-break fmt",dangerouslySetInnerHTML:{__html:null===N||void 0===N?void 0:N.parsed_text}}),(0,y.jsxs)("div",{className:"mt-4",children:[null===N||void 0===N?void 0:N.member_actions.map(((e,t)=>(0,y.jsx)(o.A,{variant:"link",size:"sm",className:u()("link-secondary btn-no-border p-0",t>0&&"ms-3"),onClick:()=>E(e),children:e.name},e.name))),j&&(0,y.jsx)(d.N_,{to:`/tags/${null===N||void 0===N?void 0:N.tag_id}/timeline`,className:u()("link-secondary btn-no-border p-0 small",(null===N||void 0===N||null===(e=N.member_actions)||void 0===e?void 0:e.length)>0&&"ms-3"),children:C("history")})]})]}),(0,y.jsx)(l.A,{className:"page-right-side mt-4 mt-xl-0",children:(0,y.jsxs)(r.A,{children:[(0,y.jsxs)(r.A.Header,{className:"d-flex justify-content-between",children:[(0,y.jsx)("span",{children:C("synonyms.title")}),b?(0,y.jsx)(o.A,{variant:"link",className:"p-0 btn-no-border",onClick:()=>{(0,g.tN)({tag_id:null===N||void 0===N?void 0:N.tag_id,synonym_tag_list:null===P||void 0===P?void 0:P.synonyms}).then((()=>{S(),A(!1)}))},children:C("synonyms.btn_save")}):null!==P&&void 0!==P&&null!==(t=P.member_actions)&&void 0!==t&&t.find((e=>"edit"===e.action))?(0,y.jsx)(o.A,{variant:"link",className:"p-0 btn-no-border",onClick:D,children:C("synonyms.btn_edit")}):null]}),(0,y.jsxs)(r.A.Body,{children:[b&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mb-3",children:[C("synonyms.text")," ",(0,y.jsx)(v.vw,{data:{slug_name:k||"",main_tag_slug_name:"",display_name:(null===N||void 0===N?void 0:N.display_name)||(null===N||void 0===N?void 0:N.slug_name)||"",recommend:!1,reserved:!1}})]}),(0,y.jsx)(v.Cx,{value:null===P||void 0===P?void 0:P.synonyms,onChange:e=>{S({...P,synonyms:[...e]},{revalidate:!1})},hiddenDescription:!0})]}),!b&&(null!==P&&void 0!==P&&P.synonyms&&P.synonyms.length>0?(0,y.jsx)("div",{className:"m-n1",children:P.synonyms.map((e=>(0,y.jsx)(v.vw,{className:"m-1",data:e},e.tag_id)))}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"text-muted mb-3",children:C("synonyms.empty")}),(null===P||void 0===P||null===(n=P.member_actions)||void 0===n?void 0:n.find((e=>"edit"===e.action)))&&(0,y.jsx)(o.A,{variant:"outline-primary",size:"sm",onClick:D,children:C("synonyms.btn_add")})]}))]})]})})]}),(0,y.jsx)(f.default,{visible:F,sourceTag:N,onClose:()=>$(!1),onConfirm:(e,t)=>{(0,g.LJ)({source_tag_id:e,target_tag_id:t}).then((()=>{$(!1),T("/tags",{replace:!0})}))}})]})}},68442:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(59660),a=n.n(s),l=n(12162),i=n(18525),o=n(1921),r=n(42700),d=n(46024),c=n(49450);const m=(0,d.A)("h4");m.displayName="DivStyledAsH4";const u=l.forwardRef((({className:e,bsPrefix:t,as:n=m,...s},l)=>(t=(0,r.oU)(t,"alert-heading"),(0,c.jsx)(n,{ref:l,className:a()(e,t),...s}))));u.displayName="AlertHeading";const x=u;var v=n(41055);const g=l.forwardRef((({className:e,bsPrefix:t,as:n=v.A,...s},l)=>(t=(0,r.oU)(t,"alert-link"),(0,c.jsx)(n,{ref:l,className:a()(e,t),...s}))));g.displayName="AlertLink";const h=g;var _=n(70200),f=n(4576);const y=l.forwardRef(((e,t)=>{const{bsPrefix:n,show:s=!0,closeLabel:l="Close alert",closeVariant:d,className:m,children:u,variant:x="primary",onClose:v,dismissible:g,transition:h=_.A,...y}=(0,i.Zw)(e,{show:"onClose"}),p=(0,r.oU)(n,"alert"),j=(0,o.A)((e=>{v&&v(!1,e)})),b=!0===h?_.A:h,A=(0,c.jsxs)("div",{role:"alert",...b?void 0:y,ref:t,className:a()(m,p,x&&`${p}-${x}`,g&&`${p}-dismissible`),children:[g&&(0,c.jsx)(f.A,{onClick:j,"aria-label":l,variant:d}),u]});return b?(0,c.jsx)(b,{unmountOnExit:!0,...y,ref:void 0,in:s,children:A}):s?A:null}));y.displayName="Alert";const p=Object.assign(y,{Link:h,Heading:x})},98128:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(59660),a=n.n(s),l=n(12162),i=n(42700),o=n(49450);const r=l.forwardRef((({bsPrefix:e,className:t,as:n="div",...s},l)=>{const r=(0,i.oU)(e,"row"),d=(0,i.gy)(),c=(0,i.Jm)(),m=`${r}-cols`,u=[];return d.forEach((e=>{const t=s[e];let n;delete s[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const a=e!==c?`-${e}`:"";null!=n&&u.push(`${m}${a}-${n}`)})),(0,o.jsx)(n,{ref:l,...s,className:a()(t,r,...u)})}));r.displayName="Row";const d=r},1646:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});const s={}}}]);
//# sourceMappingURL=2229.d038d5ee.chunk.js.map