{"version":3,"file":"static/js/7851.084d0451.chunk.js","mappings":"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","sources":["pages/Timeline/components/Item/index.tsx","../node_modules/.pnpm/react-bootstrap@2.10.6_@types+react@18.3.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-bootstrap/esm/Row.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC, useState } from 'react';\nimport { Button, Row, Col } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { Icon, BaseUserCard, DiffContent, FormatTime } from '@/components';\nimport { TIMELINE_NORMAL_ACTIVITY_TYPE } from '@/common/constants';\nimport * as Type from '@/common/interface';\nimport { getTimelineDetail } from '@/services';\n\ninterface Props {\n  data: Type.TimelineItem;\n  objectInfo: Type.TimelineObject;\n  isAdmin: boolean;\n  revisionList: Type.TimelineItem[];\n}\nconst Index: FC<Props> = ({ data, isAdmin, objectInfo, revisionList }) => {\n  const { t } = useTranslation('translation', { keyPrefix: 'timeline' });\n  const [isOpen, setIsOpen] = useState(false);\n  const [detailData, setDetailData] = useState({\n    new_revision: {},\n    old_revision: {},\n  });\n\n  const handleItemClick = async (id) => {\n    if (!isOpen) {\n      const revisionItem = revisionList?.find((v) => v.revision_id === id);\n      let oldId;\n      if (revisionList?.length > 0 && revisionItem) {\n        const idIndex = revisionList.indexOf(revisionItem) || 0;\n        if (idIndex === revisionList.length - 1) {\n          oldId = 0;\n        } else {\n          oldId = revisionList[idIndex + 1].revision_id;\n        }\n      }\n      const res = await getTimelineDetail({\n        new_revision_id: id,\n        old_revision_id: oldId,\n      });\n      setDetailData(res);\n    }\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <>\n      <tr>\n        <td>\n          <FormatTime time={data.created_at} />\n          <br />\n          {data.cancelled_at > 0 && <FormatTime time={data.cancelled_at} />}\n        </td>\n        <td className=\"text-nowrap\">\n          {(data.activity_type === 'rollback' ||\n            data.activity_type === 'edited' ||\n            data.activity_type === 'asked' ||\n            data.activity_type === 'created' ||\n            (objectInfo.object_type === 'answer' &&\n              data.activity_type === 'answered')) && (\n            <Button\n              onClick={() => handleItemClick(data.revision_id)}\n              variant=\"link\"\n              className=\"text-body p-0 btn-no-border\">\n              <Icon\n                name=\"caret-right-fill\"\n                className={`me-1 ${isOpen ? 'rotate-90-deg' : 'rotate-0-deg'}`}\n              />\n              {t(data.activity_type)}\n            </Button>\n          )}\n          {data.activity_type === 'accept' && (\n            <Link\n              to={`/questions/${objectInfo.question_id}/${data?.object_id}`}>\n              {t(data.activity_type)}\n            </Link>\n          )}\n\n          {objectInfo.object_type === 'question' &&\n            data.activity_type === 'answered' && (\n              <Link\n                to={`/questions/${objectInfo.question_id}/${data.object_id}`}>\n                {t(data.activity_type)}\n              </Link>\n            )}\n\n          {data.activity_type === 'commented' && (\n            <Link\n              to={\n                objectInfo.object_type === 'answer'\n                  ? `/questions/${objectInfo.question_id}/${objectInfo.answer_id}?commentId=${data.object_id}`\n                  : `/questions/${objectInfo.question_id}?commentId=${data.object_id}`\n              }>\n              {t(data.activity_type)}\n            </Link>\n          )}\n\n          {TIMELINE_NORMAL_ACTIVITY_TYPE.includes(data.activity_type) && (\n            <div>{t(data.activity_type)}</div>\n          )}\n\n          {data.cancelled && (\n            <div className=\"text-danger\">{t('cancelled')}</div>\n          )}\n        </td>\n        <td>\n          {data.activity_type === 'downvote' && !isAdmin ? (\n            <div>{t('n_or_a')}</div>\n          ) : (\n            <BaseUserCard\n              className=\"fs-normal\"\n              data={data?.user_info}\n              showAvatar={false}\n              showReputation={false}\n            />\n          )}\n        </td>\n        <td>\n          <div dangerouslySetInnerHTML={{ __html: data.comment }} />\n        </td>\n      </tr>\n      <tr className={isOpen ? '' : 'd-none'}>\n        <td colSpan={5} className=\"p-0 py-5\">\n          <Row className=\"justify-content-center\">\n            <Col xxl={8}>\n              <DiffContent\n                objectType={objectInfo.object_type}\n                newData={detailData?.new_revision}\n                oldData={detailData?.old_revision}\n              />\n            </Col>\n          </Row>\n        </td>\n      </tr>\n    </>\n  );\n};\n\nexport default Index;\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints, useBootstrapMinBreakpoint } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const breakpoints = useBootstrapBreakpoints();\n  const minBreakpoint = useBootstrapMinBreakpoint();\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  breakpoints.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n    const infix = brkPoint !== minBreakpoint ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;"],"names":["Index","data","isAdmin","objectInfo","revisionList","t","useTranslation","keyPrefix","isOpen","setIsOpen","useState","detailData","setDetailData","new_revision","old_revision","_jsxs","_Fragment","children","_jsx","FormatTime","time","created_at","cancelled_at","className","activity_type","object_type","Button","onClick","async","revisionItem","find","v","revision_id","id","oldId","length","idIndex","indexOf","res","getTimelineDetail","new_revision_id","old_revision_id","handleItemClick","variant","Icon","name","Link","to","question_id","object_id","answer_id","TIMELINE_NORMAL_ACTIVITY_TYPE","includes","cancelled","BaseUserCard","user_info","showAvatar","showReputation","dangerouslySetInnerHTML","__html","comment","colSpan","Row","Col","xxl","DiffContent","objectType","newData","oldData","React","bsPrefix","as","Component","props","ref","decoratedBsPrefix","useBootstrapPrefix","breakpoints","useBootstrapBreakpoints","minBreakpoint","useBootstrapMinBreakpoint","sizePrefix","classes","forEach","brkPoint","propValue","cols","infix","push","classNames","displayName"],"sourceRoot":""}