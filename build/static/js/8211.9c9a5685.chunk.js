"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[6351,8211,9164],{97463:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var i=s(12162),n=s(84873),a=s(68442),l=s(63962),r=s(18666),o=s(98496),d=s(85940),c=s(59660),u=s.n(c),m=s(45558),x=s(10428),v=s(93090),h=s(91374),p=s(98058),j=s(49450);const _=({refreshCount:e})=>{var t,s,c;const[_,f]=(0,d.ok)(),b=_.get("objectId")||"",{t:g}=(0,o.B)("translation",{keyPrefix:"page_review"}),y=(0,i.useRef)(null),[k,N]=(0,i.useState)(!1),[w,A]=(0,i.useState)(!1),[P,C]=(0,i.useState)(1),[T,S]=(0,i.useState)(),q=null===T||void 0===T?void 0:T.list[0],I=(e,t)=>{(0,m.IX)(e,t).then((t=>{((e,t)=>{const{count:s,list:i=[]}=e;if(!i.length&&s&&1!==P)return C(t=1),void I(t,"");t!==P&&C(t),S(e),i.length||N(!0),setTimeout((()=>{(0,v.Mv)()}),150)})(t,e)}))};(0,i.useEffect)((()=>{y.current&&setTimeout((()=>{(0,x._A)(y.current,{copySuccessText:g("copied",{keyPrefix:"messages"}),copyText:g("copy",{keyPrefix:"messages"})})}),70)}),[y.current]),(0,i.useEffect)((()=>{I(P,b)}),[]);const L=t=>{q&&(A(!0),(0,m.j6)({status:t,review_id:null===q||void 0===q?void 0:q.review_id}).then((()=>{e(),I(P,""),b&&(_.delete("objectId"),f(_))})).finally((()=>{A(!1)})))},{object_type:z,author_user_info:F,object_status:H,reason:B}=q||{object_type:"",author_user_info:null,reason:null,object_status:0},{itemLink:E,itemId:M,itemTimePrefix:D}=(0,p.default)(q);return k?null:(0,j.jsxs)(n.A,{children:[(0,j.jsx)(n.A.Header,{children:g("user"!==z?"queued_post":"queued_post_user")}),(0,j.jsxs)(n.A.Body,{className:"p-0",children:[(0,j.jsxs)(a.A,{variant:"info",className:"border-0 rounded-0 mb-0",children:[(0,j.jsxs)(l.A,{direction:"horizontal",gap:1,className:"align-items-center mb-2",children:[(0,j.jsxs)("div",{className:"small d-flex align-items-center",children:[(0,j.jsx)(x.In,{type:"bi",name:"plugin",size:"24px",className:"me-2 lh-1"}),(0,j.jsx)("span",{children:null===q||void 0===q?void 0:q.submitter_display_name})]}),(null===q||void 0===q?void 0:q.submit_at)&&(0,j.jsx)(x.H0,{time:q.submit_at,className:"small text-secondary",preFix:g("proposed")})]}),(0,j.jsx)(l.A,{className:"align-items-start",children:(0,j.jsx)("p",{className:"mb-0",children:B})})]}),(0,j.jsxs)("div",{className:"p-3",children:[(0,j.jsxs)("small",{className:"d-block text-secondary mb-4",children:[(0,j.jsxs)("span",{children:[g(z,{keyPrefix:"btns"})," "]}),(0,j.jsxs)(d.N_,{to:E,target:"_blank",className:"link-secondary",children:["#",M]})]}),"question"===z&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{className:"mb-3",children:null===q||void 0===q?void 0:q.title}),(0,j.jsx)("div",{className:"mb-4",children:null===q||void 0===q||null===(t=q.tags)||void 0===t?void 0:t.map((e=>(0,j.jsx)(x.vw,{className:"me-1",data:e},e.slug_name)))})]}),(0,j.jsx)("div",{className:"small font-monospace",children:(0,j.jsx)(x.EQ,{children:(0,j.jsx)("article",{ref:y,className:"fmt text-break text-wrap",dangerouslySetInnerHTML:{__html:null===q||void 0===q?void 0:q.parsed_text}})})}),(0,j.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between mt-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:u()("badge",null===(s=h.__[H])||void 0===s?void 0:s.variant),children:g(null===(c=h.__[H])||void 0===c?void 0:c.name,{keyPrefix:"btns"})}),2===(null===q||void 0===q?void 0:q.object_show_status)&&(0,j.jsx)("span",{className:u()("ms-1 badge",h.__.unlisted.variant),children:g(h.__.unlisted.name,{keyPrefix:"btns"})})]}),(0,j.jsxs)("div",{className:"d-flex align-items-center small",children:[(0,j.jsx)(x.fZ,{data:F,avatarSize:"24",avatarClass:"me-2"}),(0,j.jsx)(x.H0,{time:Number(null===q||void 0===q?void 0:q.created_at),className:"text-secondary ms-1 flex-shrink-0",preFix:g(D,{keyPrefix:"question_detail"})})]})]})]})]}),(0,j.jsxs)(n.A.Footer,{className:"p-3",children:[(0,j.jsx)("p",{children:g("user"!==z?"approve_post_tip":"approve_user_tip")}),(0,j.jsxs)(l.A,{direction:"horizontal",gap:2,children:[(0,j.jsx)(r.A,{variant:"outline-primary",disabled:w,onClick:()=>L("approve"),children:g("approve",{keyPrefix:"btns"})}),(0,j.jsx)(r.A,{variant:"outline-primary",disabled:w,onClick:()=>L("reject"),children:g("reject",{keyPrefix:"btns"})}),(0,j.jsx)(r.A,{variant:"outline-primary",disabled:w,onClick:()=>{I(P+1,""),b&&(_.delete("objectId"),f(_))},children:g("skip",{keyPrefix:"btns"})})]})]})]})}},26351:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var i=s(84873),n=s(14592),a=s(98496),l=s(49450);const r=({list:e,checked:t,callback:s})=>{const{t:r}=(0,a.B)("translation",{keyPrefix:"page_review"});return(0,l.jsxs)(i.A,{children:[(0,l.jsx)(i.A.Header,{children:r("filter",{keyPrefix:"btns"})}),(0,l.jsx)(i.A.Body,{children:(0,l.jsxs)(n.A.Group,{children:[(0,l.jsx)(n.A.Label,{children:r("filter_label")}),null===e||void 0===e?void 0:e.map((e=>(0,l.jsx)(n.A.Check,{type:"radio",id:e.name,disabled:e.todo_amount<=0,label:`${e.label} (${e.todo_amount})`,checked:t===e.name,onChange:()=>s(e.name)},e.name)))]})})]})}},16602:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var i=s(12162),n=s(84873),a=s(68442),l=s(63962),r=s(18666),o=s(85940),d=s(98496),c=s(10428),u=s(45558),m=s(91408),x=s(93090),v=s(49450);const h=({refreshCount:e})=>{const{t:t}=(0,d.B)("translation",{keyPrefix:"page_review"}),[s,h]=(0,i.useState)(!1),[p,j]=(0,i.useState)(!1),[_,f]=(0,i.useState)(1),[b,g]=(0,i.useState)(),y=null===b||void 0===b?void 0:b.list[0],{info:k,type:N,unreviewed_info:w}=y||{info:null,type:"",unreviewed_info:null},A=e=>{(0,u.Xm)(e).then((t=>{((e,t)=>{const{count:s,list:i=[]}=e;if(!i.length&&s&&1!==_)return f(t=1),void A(t);t!==_&&f(t),g(e),i.length||j(!0),setTimeout((()=>{(0,x.Mv)()}),150)})(t,e)}))},P=null===w||void 0===w?void 0:w.content;let C="",T="",S=null===w||void 0===w?void 0:w.reason;const q=null===w||void 0===w?void 0:w.user_info,I=null===w||void 0===w?void 0:w.create_at;if("question"===N)C=m.w.questionLanding(null===k||void 0===k?void 0:k.object_id,null===k||void 0===k?void 0:k.url_title),T=null===k||void 0===k?void 0:k.object_id,S||=t("edit_question");else if("answer"===N)C=m.w.answerLanding({questionId:w.content.question_id,slugTitle:null===k||void 0===k?void 0:k.url_title,answerId:w.object_id}),T=w.object_id,S||=t("edit_answer");else if("tag"===N){const e=w.content;C=m.w.tagLanding(e.slug_name),T=(null===e||void 0===e?void 0:e.tag_id)||e.slug_name,S||=t("edit_tag")}if((0,i.useEffect)((()=>{A(_)}),[]),p)return null;let L={},z={},F={showTitle:!0,showTagUrlSlug:!0};return"question"===N&&k&&P&&"content"in P&&(L={title:P.title,original_text:P.content,tags:P.tags},z={title:k.title,original_text:k.content,tags:k.tags}),"answer"===N&&k&&P&&"content"in P&&(L={original_text:P.content},z={original_text:k.content}),"tag"===N&&k&&P&&(L={original_text:P.original_text},z={original_text:k.content},F={showTitle:!1,showTagUrlSlug:!1}),(0,v.jsxs)(n.A,{children:[(0,v.jsx)(n.A.Header,{children:t("suggest_edits")}),(0,v.jsxs)(n.A.Body,{className:"p-0",children:[(0,v.jsxs)(a.A,{variant:"info",className:"border-0 rounded-0 mb-0",children:[(0,v.jsxs)(l.A,{direction:"horizontal",gap:1,className:"align-items-center mb-2",children:[(0,v.jsx)(c.fZ,{data:q,avatarSize:"24",avatarClass:"me-2"}),I&&(0,v.jsx)(c.H0,{time:I,className:"small text-secondary",preFix:t("proposed")})]}),(0,v.jsx)(l.A,{className:"align-items-start",children:(0,v.jsx)("p",{className:"mb-0",children:S})})]}),(0,v.jsxs)("div",{className:"p-3",children:[(0,v.jsxs)("small",{className:"d-block text-secondary mb-4",children:[(0,v.jsxs)("span",{children:[t(N,{keyPrefix:"btns"})," "]}),(0,v.jsxs)(o.N_,{to:C,target:"_blank",className:"link-secondary",children:["#",T]})]}),(0,v.jsx)(c.V$,{className:"mt-2",objectType:N,newData:L,oldData:z,opts:F})]})]}),(0,v.jsxs)(n.A.Footer,{className:"p-3",children:[(0,v.jsx)("p",{children:t("approve_revision_tip")}),(0,v.jsxs)(l.A,{direction:"horizontal",gap:2,children:[(0,v.jsx)(r.A,{variant:"outline-primary",disabled:s,onClick:()=>{w&&(h(!0),(0,u.LG)(w.id,"approve").then((()=>{e(),A(_)})).finally((()=>{h(!1)})))},children:t("approve",{keyPrefix:"btns"})}),(0,v.jsx)(r.A,{variant:"outline-primary",disabled:s,onClick:()=>{w&&(h(!0),(0,u.LG)(w.id,"reject").then((()=>{e(),A(_)})).catch((e=>{console.error("revisionAudit reject error: ",e)})).finally((()=>{h(!1)})))},children:t("reject",{keyPrefix:"btns"})}),(0,v.jsx)(r.A,{variant:"outline-primary",disabled:s,onClick:()=>{A(_+1)},children:t("skip",{keyPrefix:"btns"})})]})]})]})}},65084:(e,t,s)=>{s.r(t),s.d(t,{ApproveDropdown:()=>n.default,EditPostModal:()=>a.default,FlagContent:()=>r.default,QueuedContent:()=>o.default,ReviewType:()=>i.default,SuggestContent:()=>l.default});var i=s(26351),n=s(8653),a=s(27768),l=s(16602),r=s(64800),o=s(97463)}}]);
//# sourceMappingURL=8211.9c9a5685.chunk.js.map