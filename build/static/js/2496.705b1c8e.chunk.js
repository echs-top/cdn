"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[1679,2496,2508],{49740:(e,i,l)=>{l.r(i),l.d(i,{default:()=>m});var n=l(12162),o=l(98128),s=l(8810),d=l(85940),a=l(98496),t=l(10428),u=l(59304),r=l(93090),v=l(28093),c=l(45558),_=l(18931),f=(l(82508),l(49450));const m=()=>{var e,i,l,m;const p=(0,d.Zp)(),{t:w}=(0,a.B)("translation"),{qid:g="",slugPermalink:y=""}=(0,d.g)();let{aid:x=""}=(0,d.g)();!x&&y&&(x=y);const[h]=(0,d.ok)(),j=Number(h.get("page")||0),N=h.get("order")||"",[b,k]=(0,n.useState)(null),[A,S]=(0,n.useState)(!0),{isSkeletonShow:q}=(0,v.Ub)(A),[E,P]=(0,n.useState)({count:-1,list:[]}),{setUsers:L}=(0,v.L7)(),R=(0,u.bb)((e=>e.user)),T=(null===R||void 0===R?void 0:R.username)===(null===b||void 0===b||null===(e=b.user_info)||void 0===e?void 0:e.username),$=2===(null===R||void 0===R?void 0:R.role_id),z=3===(null===R||void 0===R?void 0:R.role_id),U=Boolean(null===R||void 0===R?void 0:R.access_token),B=null===R||void 0===R?void 0:R.rank,C=(0,d.zy)();(0,n.useEffect)((()=>{var e;if(null!==(e=C.state)&&void 0!==e&&e.isReview){u.ZW.getState().show({msg:w("review",{keyPrefix:"toast"}),variant:"warning"});const e={...C};delete e.state,window.history.replaceState(null,"",e.pathname)}}),[C.state]);const I=async()=>{const e=await(0,c.oo)({order:"updated"===N||"created"===N?N:"default",question_id:g,page:1,page_size:999});if(e){var i;if(e.list=null===(i=e.list)||void 0===i?void 0:i.filter((e=>{var i;return 10===e.status&&((null===e||void 0===e||null===(i=e.user_info)||void 0===i?void 0:i.username)!==(null===R||void 0===R?void 0:R.username)&&!$||x!==e.id)?null:e})),P({...e,count:e.list.length}),j>0||N){const e=document.getElementById("answerHeader");(0,r.qt)(e)}e.list.forEach((e=>{var i,l,n,o;L([{displayName:null===(i=e.user_info)||void 0===i?void 0:i.display_name,userName:null===(l=e.user_info)||void 0===l?void 0:l.username},{displayName:null===e||void 0===e||null===(n=e.update_user_info)||void 0===n?void 0:n.display_name,userName:null===e||void 0===e||null===(o=e.update_user_info)||void 0===o?void 0:o.username}])}))}},M=async()=>{S(!0);try{const _=await(0,c.on)(g);var e,i,l,n,o,s,d,a,t,u,r,v;if(_)L([{id:null===(e=_.user_info)||void 0===e?void 0:e.id,displayName:null===(i=_.user_info)||void 0===i?void 0:i.display_name,userName:null===(l=_.user_info)||void 0===l?void 0:l.username,avatar_url:null===(n=_.user_info)||void 0===n?void 0:n.avatar},{id:null===_||void 0===_||null===(o=_.update_user_info)||void 0===o?void 0:o.id,displayName:null===_||void 0===_||null===(s=_.update_user_info)||void 0===s?void 0:s.display_name,userName:null===_||void 0===_||null===(d=_.update_user_info)||void 0===d?void 0:d.username,avatar_url:null===_||void 0===_||null===(a=_.update_user_info)||void 0===a?void 0:a.avatar},{id:null===_||void 0===_||null===(t=_.last_answered_user_info)||void 0===t?void 0:t.id,displayName:null===_||void 0===_||null===(u=_.last_answered_user_info)||void 0===u?void 0:u.display_name,userName:null===_||void 0===_||null===(r=_.last_answered_user_info)||void 0===r?void 0:r.username,avatar_url:null===_||void 0===_||null===(v=_.last_answered_user_info)||void 0===v?void 0:v.avatar}]),k(_);S(!1)}catch(_){S(!1)}},Q=e=>{if("delete_question"!==e){if("default"===e)return(0,r.Mv)(),void M();"delete_answer"===e&&M(),I()}else setTimeout((()=>{p("/",{replace:!0})}),1e3)};(0,n.useEffect)((()=>{g&&(M(),I())}),[g]),(0,n.useEffect)((()=>{(j||N)&&I()}),[j,N]),(0,v.M4)({title:null===b||void 0===b?void 0:b.title,description:null===b||void 0===b?void 0:b.description,keywords:null===b||void 0===b?void 0:b.tags.map((e=>e.slug_name)).join(",")});const H=null===b||void 0===b?void 0:b.id,J=(null===b||void 0===b?void 0:b.id)&&""!==b.id;let W=!1;if(H&&Array.isArray(b.extends_actions)){b.extends_actions.find((e=>"invite_other_to_answer"===e.action))&&(W=!0)}return(0,f.jsxs)(o.A,{className:"questionDetailPage pt-4 mb-5",children:[(0,f.jsxs)(s.A,{className:"page-main flex-auto",children:[(null===b||void 0===b||null===(i=b.operation)||void 0===i?void 0:i.level)&&(0,f.jsx)(_.Alert,{data:b.operation}),q?(0,f.jsx)(_.ContentLoader,{}):(0,f.jsx)(_.Question,{data:b,initPage:Q,hasAnswer:E.count>0,isLogged:U}),!A&&E.count>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_.AnswerHead,{count:E.count,order:N}),null===E||void 0===E||null===(l=E.list)||void 0===l?void 0:l.map((e=>(0,f.jsx)(_.Answer,{aid:x,data:e,questionTitle:(null===b||void 0===b?void 0:b.title)||"",canAccept:T||$||z,callback:Q,isLogged:U},null===e||void 0===e?void 0:e.id)))]}),!A&&Math.ceil(E.count/15)>1&&(0,f.jsx)("div",{className:"d-flex justify-content-center answer-item pt-4",children:(0,f.jsx)(t.dK,{currentPage:Number(j||1),pageSize:15,totalSize:(null===E||void 0===E?void 0:E.count)||0})}),!A&&2!==Number(null===b||void 0===b?void 0:b.status)&&!(null!==b&&void 0!==b&&null!==(m=b.operation)&&void 0!==m&&m.type)&&(0,f.jsx)(_.WriteAnswer,{data:{qid:g,answered:null===b||void 0===b?void 0:b.answered,loggedUserRank:B,first_answer_id:null===b||void 0===b?void 0:b.first_answer_id},callback:e=>{P({count:E.count+1,list:[...E.list,e]}),b&&k({...b,answered:!0,first_answer_id:b.first_answer_id?b.first_answer_id:e.id})}})]}),(0,f.jsxs)(s.A,{className:"page-right-side mt-4 mt-xl-0",children:[(0,f.jsx)(t._J,{}),H?(0,f.jsx)(_.InviteToAnswer,{questionId:b.id,readOnly:!W}):null,J?(0,f.jsx)(_.LinkedQuestions,{id:b.id}):null,(0,f.jsx)(_.RelatedQuestions,{id:(null===b||void 0===b?void 0:b.id)||""})]})]})}},98128:(e,i,l)=>{l.d(i,{A:()=>u});var n=l(59660),o=l.n(n),s=l(12162),d=l(42700),a=l(49450);const t=s.forwardRef((({bsPrefix:e,className:i,as:l="div",...n},s)=>{const t=(0,d.oU)(e,"row"),u=(0,d.gy)(),r=(0,d.Jm)(),v=`${t}-cols`,c=[];return u.forEach((e=>{const i=n[e];let l;delete n[e],null!=i&&"object"===typeof i?({cols:l}=i):l=i;const o=e!==r?`-${e}`:"";null!=l&&c.push(`${v}${o}-${l}`)})),(0,a.jsx)(l,{ref:s,...n,className:o()(i,t,...c)})}));t.displayName="Row";const u=t},82508:(e,i,l)=>{l.r(i),l.d(i,{default:()=>n});const n={}}}]);
//# sourceMappingURL=2496.705b1c8e.chunk.js.map