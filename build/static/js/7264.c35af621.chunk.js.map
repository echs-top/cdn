{"version":3,"file":"static/js/7264.c35af621.chunk.js","mappings":"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","sources":["pages/Admin/Questions/components/Action/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Dropdown } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\nimport { Icon, Modal } from '@/components';\nimport {\n  changeQuestionStatus,\n  questionOperation,\n  reopenQuestion,\n} from '@/services';\nimport { useReportModal, useToast } from '@/hooks';\nimport { toastStore } from '@/stores';\n\nconst AnswerActions = ({ itemData, refreshList, curFilter, show, pin }) => {\n  const { t } = useTranslation('translation', { keyPrefix: 'delete' });\n  const toast = useToast();\n  const closeCallback = () => {\n    toastStore.getState().show({\n      msg: t('post_closed', { keyPrefix: 'messages' }),\n      variant: 'success',\n    });\n    refreshList();\n  };\n  const closeModal = useReportModal(closeCallback);\n\n  const handleAction = (type) => {\n    if (type === 'delete') {\n      Modal.confirm({\n        title: t('title', { keyPrefix: 'delete' }),\n        content:\n          itemData.answer_count > 0\n            ? t('question', { keyPrefix: 'delete' })\n            : t('other', { keyPrefix: 'delete' }),\n        cancelBtnVariant: 'link',\n        confirmBtnVariant: 'danger',\n        confirmText: t('delete', { keyPrefix: 'btns' }),\n        onConfirm: () => {\n          changeQuestionStatus(itemData.id, 'deleted').then(() => {\n            toastStore.getState().show({\n              msg: t('post_deleted', { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n\n    if (type === 'undelete') {\n      Modal.confirm({\n        title: t('undelete_title'),\n        content: t('undelete_desc'),\n        cancelBtnVariant: 'link',\n        confirmBtnVariant: 'danger',\n        confirmText: t('undelete', { keyPrefix: 'btns' }),\n        onConfirm: () => {\n          changeQuestionStatus(itemData.id, 'available').then(() => {\n            toastStore.getState().show({\n              msg: t('post_cancel_deleted', { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n\n    if (type === 'close') {\n      closeModal.onShow({\n        type: 'question',\n        id: itemData.id,\n        action: 'close',\n      });\n    }\n\n    if (type === 'reopen') {\n      Modal.confirm({\n        title: t('title', { keyPrefix: 'question_detail.reopen' }),\n        content: t('content', { keyPrefix: 'question_detail.reopen' }),\n        cancelBtnVariant: 'link',\n        confirmText: t('confirm_btn', { keyPrefix: 'question_detail.reopen' }),\n        onConfirm: () => {\n          reopenQuestion({\n            question_id: itemData.id,\n          }).then(() => {\n            toastStore.getState().show({\n              msg: t('post_reopen', { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n\n    if (type === 'list' || type === 'unlist') {\n      const keyPrefix =\n        type === 'list' ? 'question_detail.list' : 'question_detail.unlist';\n      Modal.confirm({\n        title: t('title', { keyPrefix }),\n        content: t('content', { keyPrefix }),\n        cancelBtnVariant: 'link',\n        confirmText: t('confirm_btn', { keyPrefix }),\n        onConfirm: () => {\n          questionOperation({\n            id: itemData.id,\n            operation: type === 'list' ? 'show' : 'hide',\n          }).then(() => {\n            toast.onShow({\n              msg: t(`post_${type}`, { keyPrefix: 'messages' }),\n              variant: 'success',\n            });\n            refreshList();\n          });\n        },\n      });\n    }\n  };\n\n  if (curFilter === 'pending') {\n    return (\n      <Link\n        to={`/review?type=queued_post&objectId=${itemData.id}`}\n        className=\"btn btn-link p-0\"\n        title={t('review', { keyPrefix: 'header.nav' })}>\n        <Icon name=\"three-dots-vertical\" />\n      </Link>\n    );\n  }\n\n  return (\n    <Dropdown>\n      <Dropdown.Toggle variant=\"link\" className=\"no-toggle p-0\">\n        <Icon\n          name=\"three-dots-vertical\"\n          title={t('action', { keyPrefix: 'admin.answers' })}\n        />\n      </Dropdown.Toggle>\n      <Dropdown.Menu align=\"end\">\n        {curFilter === 'normal' && (\n          <Dropdown.Item onClick={() => handleAction('close')}>\n            {t('close', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        )}\n        {curFilter === 'closed' && (\n          <Dropdown.Item onClick={() => handleAction('reopen')}>\n            {t('reopen', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        )}\n        {curFilter !== 'deleted' ? (\n          <Dropdown.Item onClick={() => handleAction('delete')}>\n            {t('delete', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        ) : (\n          <Dropdown.Item onClick={() => handleAction('undelete')}>\n            {t('undelete', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        )}\n        {show === 2 ? (\n          <Dropdown.Item onClick={() => handleAction('list')}>\n            {t('list', { keyPrefix: 'btns' })}\n          </Dropdown.Item>\n        ) : (\n          pin !== 2 && (\n            <Dropdown.Item onClick={() => handleAction('unlist')}>\n              {t('unlist', { keyPrefix: 'btns' })}\n            </Dropdown.Item>\n          )\n        )}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nexport default AnswerActions;\n"],"names":["AnswerActions","itemData","refreshList","curFilter","show","pin","t","useTranslation","keyPrefix","toast","useToast","closeModal","useReportModal","closeCallback","toastStore","getState","msg","variant","handleAction","type","Modal","confirm","title","content","answer_count","cancelBtnVariant","confirmBtnVariant","confirmText","onConfirm","changeQuestionStatus","id","then","onShow","action","reopenQuestion","question_id","questionOperation","operation","_jsx","Link","to","className","children","Icon","name","_jsxs","Dropdown","Toggle","Menu","align","Item","onClick"],"sourceRoot":""}