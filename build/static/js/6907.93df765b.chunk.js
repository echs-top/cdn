"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[104,1177,3225,3326,6907,8293,9998],{8293:(e,l,a)=>{a.r(l),a.d(l,{default:()=>t});var s=a(18666),r=a(98496),n=a(28446),i=a(73225),d=a(49450);const t=({visible:e,siteUrl:l=""})=>{const{t:a}=(0,r.B)("translation",{keyPrefix:"install"});return e?(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{children:a("ready_title")}),(0,d.jsx)("p",{children:(0,d.jsxs)(n.x,{i18nKey:"install.ready_desc",children:["If you ever feel like changing more settings, visit",(0,d.jsx)("a",{href:`${l}/users/login`,children:" admin section"}),"; find it in the site menu."]})}),(0,d.jsx)("p",{children:a("good_luck")}),(0,d.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,d.jsx)(i.default,{step:5}),(0,d.jsx)(s.A,{href:l,children:a("done")})]})]}):null}},50104:(e,l,a)=>{a.r(l),a.d(l,{default:()=>m});var s=a(12162),r=a(14592),n=a(18666),i=a(98496),d=a(73225),t=a(45558),o=a(3176),c=a(91374),u=a(93090),v=a(49450);const m=({visible:e,data:l,changeCallback:a,nextCallback:m})=>{const{t:_}=(0,i.B)("translation",{keyPrefix:"install"}),[h,b]=(0,s.useState)();return(0,s.useEffect)((()=>{(async()=>{const e=await(0,t.KO)(),l=u.wc.get(c.rZ)||e[0].value;b(e),(0,o.setupInstallLanguage)(l),a({lang:{value:l,isInvalid:!1,errorMsg:""}})})()}),[]),e?(0,v.jsxs)(r.A,{noValidate:!0,onSubmit:()=>{m()},children:[(0,v.jsxs)(r.A.Group,{controlId:"lang",className:"mb-3",children:[(0,v.jsx)(r.A.Label,{children:_("lang.label")}),(0,v.jsx)(r.A.Select,{value:l.value,isInvalid:l.isInvalid,onChange:e=>{(0,o.setupInstallLanguage)(e.target.value),a({lang:{value:e.target.value,isInvalid:!1,errorMsg:""}})},children:null===h||void 0===h?void 0:h.map((e=>(0,v.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,v.jsx)(d.default,{step:1}),(0,v.jsx)(n.A,{type:"submit",children:_("next")})]})]}):null}},69998:(e,l,a)=>{a.r(l),a.d(l,{default:()=>o});var s=a(14592),r=a(18666),n=a(98496),i=a(51861),d=a(73225),t=a(49450);const o=({visible:e,data:l,changeCallback:a,nextCallback:o})=>{const{t:c}=(0,n.B)("translation",{keyPrefix:"install"});return e?(0,t.jsxs)(s.A,{noValidate:!0,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),(()=>{let e=!0;const{site_name:s,site_url:r,confirm_password:n,contact_email:d,name:t,password:o,email:u}=l;return s.value||(e=!1,l.site_name={value:"",isInvalid:!0,errorMsg:c("site_name.msg")}),s.value&&s.value.length>30&&(e=!1,l.site_url={value:s.value,isInvalid:!0,errorMsg:c("site_name.msg_max_length")}),r.value||(e=!1,l.site_url={value:"",isInvalid:!0,errorMsg:c("site_name.msg.empty")}),r.value&&!r.value.match(/^(http|https):\/\//g)?(e=!1,l.site_url={value:r.value,isInvalid:!0,errorMsg:c("site_url.msg.incorrect")}):r.value.length>512&&(e=!1,l.site_url={value:r.value,isInvalid:!0,errorMsg:c("site_url.msg.max_length")}),d.value||(e=!1,l.contact_email={value:"",isInvalid:!0,errorMsg:c("contact_email.msg.empty")}),d.value&&!i.A.email.test(d.value)&&(e=!1,l.contact_email={value:d.value,isInvalid:!0,errorMsg:c("contact_email.msg.incorrect")}),t.value?t.value.length<2||t.value.length>30?(e=!1,l.name={value:t.value,isInvalid:!0,errorMsg:c("admin_name.msg_max_length")}):/^[\w.-\s]{2,30}$/.test(t.value)||(e=!1,l.name={value:t.value,isInvalid:!0,errorMsg:c("admin_name.character")}):(e=!1,l.name={value:"",isInvalid:!0,errorMsg:c("admin_name.msg")}),o.value||(e=!1,l.password={value:"",isInvalid:!0,errorMsg:c("admin_password.msg")}),o.value&&o.value.length<4&&(e=!1,l.password={value:l.password.value,isInvalid:!0,errorMsg:c("admin_password.msg_min_length")}),o.value&&o.value.length>32&&(e=!1,l.password={value:l.password.value,isInvalid:!0,errorMsg:c("admin_password.msg_max_length")}),n.value!==o.value&&(e=!1,l.confirm_password={value:"",isInvalid:!0,errorMsg:c("admin_confirm_password.msg")}),u.value||(e=!1,l.email={value:"",isInvalid:!0,errorMsg:c("admin_email.msg.empty")}),u.value&&!i.A.email.test(u.value)&&(e=!1,l.email={value:u.value,isInvalid:!0,errorMsg:c("admin_email.msg.incorrect")}),a({...l}),e})()&&o()},children:[(0,t.jsx)("h5",{children:c("site_information")}),(0,t.jsxs)(s.A.Group,{controlId:"site_name",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("site_name.label")}),(0,t.jsx)(s.A.Control,{required:!0,value:l.site_name.value,isInvalid:l.site_name.isInvalid,onChange:e=>{a({site_name:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.site_name.errorMsg})]}),(0,t.jsxs)(s.A.Group,{controlId:"site_url",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("site_url.label")}),(0,t.jsx)(s.A.Control,{required:!0,value:l.site_url.value,isInvalid:l.site_url.isInvalid,onChange:e=>{a({site_url:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Text,{children:c("site_url.text")}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.site_url.errorMsg})]}),(0,t.jsxs)(s.A.Group,{controlId:"contact_email",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("contact_email.label")}),(0,t.jsx)(s.A.Control,{required:!0,type:"email",value:l.contact_email.value,isInvalid:l.contact_email.isInvalid,onChange:e=>{a({contact_email:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Text,{children:c("contact_email.text")}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.contact_email.errorMsg})]}),(0,t.jsx)("h5",{children:c("login_required.label")}),(0,t.jsxs)(s.A.Group,{controlId:"login_required",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("login_required.label")}),(0,t.jsx)(s.A.Check,{type:"switch",id:"login_required",label:c("login_required.switch"),checked:l.login_required.value,onChange:e=>{a({login_required:{value:e.target.checked,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Text,{children:c("login_required.text")})]}),(0,t.jsxs)(s.A.Group,{controlId:"external_content_display",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("external_content_display.label",{keyPrefix:"admin.legal"})}),(0,t.jsxs)(s.A.Select,{value:l.external_content_display.value,onChange:e=>{a({external_content_display:{value:e.target.value,isInvalid:!1,errorMsg:""}})},children:[(0,t.jsx)("option",{value:"always_display",children:c("external_content_display.always_display",{keyPrefix:"admin.legal"})}),(0,t.jsx)("option",{value:"ask_before_display",children:c("external_content_display.ask_before_display",{keyPrefix:"admin.legal"})})]}),(0,t.jsx)(s.A.Text,{children:c("external_content_display.text",{keyPrefix:"admin.legal"})})]}),(0,t.jsx)("h5",{children:c("admin_account")}),(0,t.jsxs)(s.A.Group,{controlId:"name",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("admin_name.label")}),(0,t.jsx)(s.A.Control,{required:!0,value:l.name.value,isInvalid:l.name.isInvalid,onChange:e=>{a({name:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.name.errorMsg})]}),(0,t.jsxs)(s.A.Group,{controlId:"password",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("admin_password.label")}),(0,t.jsx)(s.A.Control,{required:!0,type:"password",value:l.password.value,isInvalid:l.password.isInvalid,onChange:e=>{a({password:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Text,{children:c("admin_password.text")}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.password.errorMsg})]}),(0,t.jsxs)(s.A.Group,{controlId:"confirm_password",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("admin_confirm_password.label")}),(0,t.jsx)(s.A.Control,{required:!0,type:"password",value:l.confirm_password.value,isInvalid:l.confirm_password.isInvalid,onChange:e=>{a({confirm_password:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Text,{children:c("admin_confirm_password.text")}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.confirm_password.errorMsg})]}),(0,t.jsxs)(s.A.Group,{controlId:"email",className:"mb-3",children:[(0,t.jsx)(s.A.Label,{children:c("admin_email.label")}),(0,t.jsx)(s.A.Control,{required:!0,value:l.email.value,isInvalid:l.email.isInvalid,onChange:e=>{a({email:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,t.jsx)(s.A.Text,{children:c("admin_email.text")}),(0,t.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.email.errorMsg})]}),(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsx)(d.default,{step:4}),(0,t.jsx)(r.A,{type:"submit",children:c("next")})]})]}):null}},73225:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_});var s=a(12162),r=a(59660),n=a.n(r),i=a(42700),d=a(66087),t=a(49450);function o(e,l,a){const s=(e-l)/(a-l)*100;return Math.round(1e3*s)/1e3}function c({min:e,now:l,max:a,label:s,visuallyHidden:r,striped:i,animated:d,className:c,style:u,variant:v,bsPrefix:m,..._},h){return(0,t.jsx)("div",{ref:h,..._,role:"progressbar",className:n()(c,`${m}-bar`,{[`bg-${v}`]:v,[`${m}-bar-animated`]:d,[`${m}-bar-striped`]:d||i}),style:{width:`${o(l,e,a)}%`,...u},"aria-valuenow":l,"aria-valuemin":e,"aria-valuemax":a,children:r?(0,t.jsx)("span",{className:"visually-hidden",children:s}):s})}const u=s.forwardRef((({isChild:e=!1,...l},a)=>{const r={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...l};if(r.bsPrefix=(0,i.oU)(r.bsPrefix,"progress"),e)return c(r,a);const{min:o,now:u,max:v,label:m,visuallyHidden:_,striped:h,animated:b,bsPrefix:x,variant:g,className:p,children:j,...I}=r;return(0,t.jsx)("div",{ref:a,...I,className:n()(p,x),children:j?(0,d.Tj)(j,(e=>(0,s.cloneElement)(e,{isChild:!0}))):c({min:o,now:u,max:v,label:m,visuallyHidden:_,striped:h,animated:b,bsPrefix:x,variant:g},a)})}));u.displayName="ProgressBar";const v=u,m=({step:e})=>(0,t.jsxs)("div",{className:"d-flex align-items-center small text-secondary",children:[(0,t.jsx)(v,{now:e/5*100,variant:"success",style:{width:"200px"},className:"me-2"}),(0,t.jsxs)("span",{children:[e,"/5"]})]}),_=(0,s.memo)(m)},63326:(e,l,a)=>{a.r(l),a.d(l,{default:()=>v});var s=a(14592),r=a(98128),n=a(8810),i=a(18666),d=a(98496),t=a(73225),o=a(49450);const c=[{value:"mysql",label:"MariaDB/MySQL"},{value:"sqlite3",label:"SQLite"},{value:"postgres",label:"PostgreSQL"}],u=[{value:"require"},{value:"verify-ca"},{value:"verify-full"}],v=({visible:e,data:l,changeCallback:a,nextCallback:v})=>{const{t:m}=(0,d.B)("translation",{keyPrefix:"install"});return e?(0,o.jsxs)(s.A,{noValidate:!0,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),(()=>{let e=!0;const{db_type:s,db_username:r,db_password:n,db_host:i,db_name:d,db_file:t}=l;return"sqlite3"!==s.value?(r.value||(e=!1,l.db_username={value:"",isInvalid:!0,errorMsg:m("db_username.msg")}),n.value||(e=!1,l.db_password={value:"",isInvalid:!0,errorMsg:m("db_password.msg")}),i.value||(e=!1,l.db_host={value:"",isInvalid:!0,errorMsg:m("db_host.msg")}),d.value||(e=!1,l.db_name={value:"",isInvalid:!0,errorMsg:m("db_name.msg")})):t.value||(e=!1,l.db_file={value:"",isInvalid:!0,errorMsg:m("db_file.msg")}),a({...l}),e})()&&v()},children:[(0,o.jsxs)(s.A.Group,{controlId:"database_engine",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("db_type.label")}),(0,o.jsx)(s.A.Select,{value:l.db_type.value,isInvalid:l.db_type.isInvalid,onChange:e=>{a({db_type:{value:e.target.value,isInvalid:!1,errorMsg:""}})},children:c.map((e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),"sqlite3"!==l.db_type.value?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.A.Group,{controlId:"username",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("db_username.label")}),(0,o.jsx)(s.A.Control,{required:!0,placeholder:m("db_username.placeholder"),value:l.db_username.value,isInvalid:l.db_username.isInvalid,onChange:e=>{a({db_username:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.db_username.errorMsg})]}),(0,o.jsxs)(s.A.Group,{controlId:"db_password",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("db_password.label")}),(0,o.jsx)(s.A.Control,{required:!0,value:l.db_password.value,isInvalid:l.db_password.isInvalid,onChange:e=>{a({db_password:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.db_password.errorMsg})]}),"postgres"===l.db_type.value&&(0,o.jsxs)(s.A.Group,{controlId:"ssl_enabled",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("ssl_enabled.label")}),(0,o.jsx)(s.A.Check,{type:"switch",label:`${l.ssl_enabled.value?m("ssl_enabled_on.label"):m("ssl_enabled_off.label")}`,checked:l.ssl_enabled.value,onChange:e=>{a({ssl_enabled:{value:e.target.checked,isInvalid:!1,errorMsg:""},ssl_mode:{value:"require",isInvalid:!1,errorMsg:""},ssl_root_cert:{value:"",isInvalid:!1,errorMsg:""},ssl_cert:{value:"",isInvalid:!1,errorMsg:""},ssl_key:{value:"",isInvalid:!1,errorMsg:""}})}})]}),"postgres"===l.db_type.value&&l.ssl_enabled.value&&(0,o.jsxs)(s.A.Group,{controlId:"sslmodeOptionsDropdown",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("ssl_mode.label")}),(0,o.jsx)(s.A.Select,{value:l.ssl_mode.value,onChange:e=>{a({ssl_mode:{value:e.target.value,isInvalid:!1,errorMsg:""}})},children:u.map((e=>(0,o.jsx)("option",{value:e.value,children:e.value},e.value)))})]}),"postgres"===l.db_type.value&&l.ssl_enabled.value&&("verify-ca"===l.ssl_mode.value||"verify-full"===l.ssl_mode.value)&&(0,o.jsxs)(r.A,{className:"mb-3",children:[(0,o.jsxs)(s.A.Group,{as:n.A,controlId:"ssl_root_cert",children:[(0,o.jsx)(s.A.Control,{placeholder:m("ssl_root_cert.placeholder"),"aria-label":"ssl_root_cert","aria-describedby":"basic-addon1",isInvalid:l.ssl_root_cert.isInvalid,onChange:e=>{a({ssl_root_cert:{value:e.target.value,isInvalid:!1,errorMsg:""}})},required:!0}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:`${l.ssl_root_cert.errorMsg}`})]}),(0,o.jsxs)(s.A.Group,{as:n.A,controlId:"ssl_cert",children:[(0,o.jsx)(s.A.Control,{placeholder:m("ssl_cert.placeholder"),"aria-label":"ssl_cert","aria-describedby":"basic-addon1",isInvalid:l.ssl_cert.isInvalid,onChange:e=>{a({ssl_cert:{value:e.target.value,isInvalid:!1,errorMsg:""}})},required:!0}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:`${l.ssl_cert.errorMsg}`})]}),(0,o.jsxs)(s.A.Group,{as:n.A,controlId:"ssl_key",children:[(0,o.jsx)(s.A.Control,{placeholder:m("ssl_key.placeholder"),"aria-label":"ssl_key","aria-describedby":"basic-addon1",isInvalid:l.ssl_key.isInvalid,onChange:e=>{a({ssl_key:{value:e.target.value,isInvalid:!1,errorMsg:""}})},required:!0}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:`${l.ssl_key.errorMsg}`})]})]}),(0,o.jsxs)(s.A.Group,{controlId:"db_host",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("db_host.label")}),(0,o.jsx)(s.A.Control,{required:!0,placeholder:m("db_host.placeholder"),value:l.db_host.value,isInvalid:l.db_host.isInvalid,onChange:e=>{a({db_host:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.db_host.errorMsg})]}),(0,o.jsxs)(s.A.Group,{controlId:"name",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("db_name.label")}),(0,o.jsx)(s.A.Control,{required:!0,placeholder:m("db_name.placeholder"),value:l.db_name.value,isInvalid:l.db_name.isInvalid,onChange:e=>{a({db_name:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.db_name.errorMsg})]})]}):(0,o.jsxs)(s.A.Group,{controlId:"file",className:"mb-3",children:[(0,o.jsx)(s.A.Label,{children:m("db_file.label")}),(0,o.jsx)(s.A.Control,{required:!0,placeholder:m("db_file.placeholder"),value:l.db_file.value,isInvalid:l.db_file.isInvalid,onChange:e=>{a({db_file:{value:e.target.value,isInvalid:!1,errorMsg:""}})}}),(0,o.jsx)(s.A.Control.Feedback,{type:"invalid",children:l.db_file.errorMsg})]}),(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,o.jsx)(t.default,{step:2}),(0,o.jsx)(i.A,{type:"submit",children:m("next")})]})]}):null}},51177:(e,l,a)=>{a.r(l),a.d(l,{default:()=>c});var s=a(9849),r=a(14592),n=a(18666),i=a(98496),d=a(28446),t=a(73225),o=a(49450);const c=({visible:e,errorMsg:l,nextCallback:a})=>{var c;const{t:u}=(0,i.B)("translation",{keyPrefix:"install"});return e?(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{children:u("config_yaml.title")}),(null===l||void 0===l||null===(c=l.msg)||void 0===c?void 0:c.length)>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"fmt",children:(0,o.jsx)("p",{children:(0,o.jsx)(d.x,{i18nKey:"install.config_yaml.desc",components:{1:(0,o.jsx)("code",{})}})})}),(0,o.jsx)(s.A,{className:"mb-3",children:(0,o.jsx)(r.A.Control,{type:"text",as:"textarea",rows:8,className:"small",value:null===l||void 0===l?void 0:l.default_config})}),(0,o.jsx)("div",{className:"mb-3",children:u("config_yaml.info")})]}):(0,o.jsx)("div",{className:"mb-3",children:u("config_yaml.label")}),(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,o.jsx)(t.default,{step:3}),(0,o.jsx)(n.A,{onClick:a,children:u("next")})]})]}):null}},76907:(e,l,a)=>{a.r(l),a.d(l,{Fifth:()=>d.default,FirstStep:()=>s.default,FourthStep:()=>i.default,SecondStep:()=>r.default,ThirdStep:()=>n.default});var s=a(50104),r=a(63326),n=a(51177),i=a(69998),d=a(8293)},98128:(e,l,a)=>{a.d(l,{A:()=>o});var s=a(59660),r=a.n(s),n=a(12162),i=a(42700),d=a(49450);const t=n.forwardRef((({bsPrefix:e,className:l,as:a="div",...s},n)=>{const t=(0,i.oU)(e,"row"),o=(0,i.gy)(),c=(0,i.Jm)(),u=`${t}-cols`,v=[];return o.forEach((e=>{const l=s[e];let a;delete s[e],null!=l&&"object"===typeof l?({cols:a}=l):a=l;const r=e!==c?`-${e}`:"";null!=a&&v.push(`${u}${r}-${a}`)})),(0,d.jsx)(a,{ref:n,...s,className:r()(l,t,...v)})}));t.displayName="Row";const o=t}}]);
//# sourceMappingURL=6907.93df765b.chunk.js.map