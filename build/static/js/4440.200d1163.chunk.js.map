{"version":3,"file":"static/js/4440.200d1163.chunk.js","mappings":"qPA6BA,MAqGA,EArGkBA,KAChB,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,GAAe,cAAe,CAC1CC,UAAW,cAEPC,GAAQC,EAAAA,EAAAA,MACRC,EAAqB,CACzBC,MAAON,EAAE,cACTO,WAAY,CACVC,UAAW,CACTC,KAAM,SACNH,MAAON,EAAE,mBACTU,YAAaV,EAAE,kBACfW,KAAM,CAAC,EAAG,EAAG,EAAG,GAChBC,UAAW,CACT,kBACA,6BACA,+BACA,2CAEFC,QAAS,GAEXC,OAAQ,CACNL,KAAM,SACNH,MAAON,EAAE,gBACTU,YAAaV,EAAE,mBAgBde,EAAUC,IAAeC,EAAAA,EAAAA,WAASC,EAAAA,EAAAA,IAAab,KA6BtDc,EAAAA,EAAAA,YAAU,MACRC,EAAAA,EAAAA,MAAgBC,MAAMC,IACpB,GAAIA,EAAS,CACX,MAAMC,EAAW,IAAKR,GACtBQ,EAAST,OAAOU,MAAQF,EAAQR,OAChCS,EAASf,UAAUgB,MAAQF,EAAQd,UAC9B,SAASiB,KAAKF,EAASf,UAAUgB,SACpCD,EAASf,UAAUgB,MAAQ,GAE7BR,EAAYO,EACd,IACA,GACD,IAMH,OACEG,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,OAAMF,SAAE5B,EAAE,iBACxB6B,EAAAA,EAAAA,KAACE,EAAAA,EAAU,CACT1B,OAAQA,EACRU,SAAUA,EACViB,SAnDYC,IAChBA,EAAIC,iBACJD,EAAIE,kBAEJ,MAAMC,EAAmC,CACvC5B,UAAW6B,OAAOtB,EAASP,UAAUgB,OACrCV,OAAQC,EAASD,OAAOU,QAG1Bc,EAAAA,EAAAA,IAAcF,GACXf,MAAK,KACJlB,EAAMoC,OAAO,CACXC,IAAKxC,EAAE,SAAU,CAAEE,UAAW,UAC9BuC,QAAS,YAEXC,EAAAA,GAAgBC,WAAWC,OAAOR,EAAU,IAE7CS,OAAOC,IACN,GAAIA,EAAIC,QAAS,CACf,MAAMC,GAAOC,EAAAA,EAAAA,IAAgBH,EAAK/B,GAClCC,EAAY,IAAKgC,IACjB,MAAME,EAAMC,SAASC,eAAeN,EAAIO,KAAK,GAAGC,cAChDC,EAAAA,EAAAA,IAAmBL,EACrB,IACA,EA4BAM,SAlEqB,CACzBhD,UAAW,CACT,YAAa,UAEfM,OAAQ,CACN,YAAa,WACb,aAAc,CACZ2C,KAAM,GACN3B,UAAW,oBA2DX4B,SAZkBV,IACtBhC,EAAYgC,EAAK,MAad,C","sources":["pages/Admin/Seo/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport type * as Type from '@/common/interface';\nimport { getSeoSetting, putSeoSetting } from '@/services';\nimport { SchemaForm, JSONSchema, initFormData, UISchema } from '@/components';\nimport { useToast } from '@/hooks';\nimport { handleFormError, scrollToElementTop } from '@/utils';\nimport { seoSettingStore } from '@/stores';\n\nconst Index: FC = () => {\n  const { t } = useTranslation('translation', {\n    keyPrefix: 'admin.seo',\n  });\n  const Toast = useToast();\n  const schema: JSONSchema = {\n    title: t('page_title'),\n    properties: {\n      permalink: {\n        type: 'number',\n        title: t('permalink.label'),\n        description: t('permalink.text'),\n        enum: [4, 3, 2, 1],\n        enumNames: [\n          '/questions/D1D1',\n          '/questions/D1D1/post-title',\n          '/questions/10010000000000001',\n          '/questions/10010000000000001/post-title',\n        ],\n        default: 4,\n      },\n      robots: {\n        type: 'string',\n        title: t('robots.label'),\n        description: t('robots.text'),\n      },\n    },\n  };\n  const uiSchema: UISchema = {\n    permalink: {\n      'ui:widget': 'select',\n    },\n    robots: {\n      'ui:widget': 'textarea',\n      'ui:options': {\n        rows: 10,\n        className: 'font-monospace',\n      },\n    },\n  };\n  const [formData, setFormData] = useState(initFormData(schema));\n\n  const onSubmit = (evt) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    const reqParams: Type.AdminSettingsSeo = {\n      permalink: Number(formData.permalink.value),\n      robots: formData.robots.value,\n    };\n\n    putSeoSetting(reqParams)\n      .then(() => {\n        Toast.onShow({\n          msg: t('update', { keyPrefix: 'toast' }),\n          variant: 'success',\n        });\n        seoSettingStore.getState().update(reqParams);\n      })\n      .catch((err) => {\n        if (err.isError) {\n          const data = handleFormError(err, formData);\n          setFormData({ ...data });\n          const ele = document.getElementById(err.list[0].error_field);\n          scrollToElementTop(ele);\n        }\n      });\n  };\n\n  useEffect(() => {\n    getSeoSetting().then((setting) => {\n      if (setting) {\n        const formMeta = { ...formData };\n        formMeta.robots.value = setting.robots;\n        formMeta.permalink.value = setting.permalink;\n        if (!/[1234]/.test(formMeta.permalink.value)) {\n          formMeta.permalink.value = 4;\n        }\n        setFormData(formMeta);\n      }\n    });\n  }, []);\n\n  const handleOnChange = (data) => {\n    setFormData(data);\n  };\n\n  return (\n    <>\n      <h3 className=\"mb-4\">{t('page_title')}</h3>\n      <SchemaForm\n        schema={schema}\n        formData={formData}\n        onSubmit={onSubmit}\n        uiSchema={uiSchema}\n        onChange={handleOnChange}\n      />\n    </>\n  );\n};\n\nexport default Index;\n"],"names":["Index","t","useTranslation","keyPrefix","Toast","useToast","schema","title","properties","permalink","type","description","enum","enumNames","default","robots","formData","setFormData","useState","initFormData","useEffect","getSeoSetting","then","setting","formMeta","value","test","_jsxs","_Fragment","children","_jsx","className","SchemaForm","onSubmit","evt","preventDefault","stopPropagation","reqParams","Number","putSeoSetting","onShow","msg","variant","seoSettingStore","getState","update","catch","err","isError","data","handleFormError","ele","document","getElementById","list","error_field","scrollToElementTop","uiSchema","rows","onChange"],"sourceRoot":""}