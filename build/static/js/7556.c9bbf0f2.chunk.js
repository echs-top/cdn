"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[6351,7556,8211,9164],{97463:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var i=s(12162),n=s(84873),a=s(68442),l=s(63962),r=s(18666),o=s(98496),d=s(85940),c=s(59660),u=s.n(c),m=s(45558),x=s(10428),v=s(93090),h=s(91374),p=s(98058),j=s(49450);const f=({refreshCount:e})=>{var t,s,c;const[f,_]=(0,d.ok)(),g=f.get("objectId")||"",{t:b}=(0,o.B)("translation",{keyPrefix:"page_review"}),y=(0,i.useRef)(null),[k,N]=(0,i.useState)(!1),[w,A]=(0,i.useState)(!1),[C,P]=(0,i.useState)(1),[S,T]=(0,i.useState)(),q=null===S||void 0===S?void 0:S.list[0],I=(e,t)=>{(0,m.IX)(e,t).then((t=>{((e,t)=>{const{count:s,list:i=[]}=e;if(!i.length&&s&&1!==C)return P(t=1),void I(t,"");t!==C&&P(t),T(e),i.length||N(!0),setTimeout((()=>{(0,v.Mv)()}),150)})(t,e)}))};(0,i.useEffect)((()=>{y.current&&setTimeout((()=>{(0,x._A)(y.current,{copySuccessText:b("copied",{keyPrefix:"messages"}),copyText:b("copy",{keyPrefix:"messages"})})}),70)}),[y.current]),(0,i.useEffect)((()=>{I(C,g)}),[]);const F=t=>{q&&(A(!0),(0,m.j6)({status:t,review_id:null===q||void 0===q?void 0:q.review_id}).then((()=>{e(),I(C,""),g&&(f.delete("objectId"),_(f))})).finally((()=>{A(!1)})))},{object_type:L,author_user_info:$,object_status:z,reason:B}=q||{object_type:"",author_user_info:null,reason:null,object_status:0},{itemLink:E,itemId:H,itemTimePrefix:R}=(0,p.default)(q);return k?null:(0,j.jsxs)(n.A,{children:[(0,j.jsx)(n.A.Header,{children:b("user"!==L?"queued_post":"queued_post_user")}),(0,j.jsxs)(n.A.Body,{className:"p-0",children:[(0,j.jsxs)(a.A,{variant:"info",className:"border-0 rounded-0 mb-0",children:[(0,j.jsxs)(l.A,{direction:"horizontal",gap:1,className:"align-items-center mb-2",children:[(0,j.jsxs)("div",{className:"small d-flex align-items-center",children:[(0,j.jsx)(x.In,{type:"bi",name:"plugin",size:"24px",className:"me-2 lh-1"}),(0,j.jsx)("span",{children:null===q||void 0===q?void 0:q.submitter_display_name})]}),(null===q||void 0===q?void 0:q.submit_at)&&(0,j.jsx)(x.H0,{time:q.submit_at,className:"small text-secondary",preFix:b("proposed")})]}),(0,j.jsx)(l.A,{className:"align-items-start",children:(0,j.jsx)("p",{className:"mb-0",children:B})})]}),(0,j.jsxs)("div",{className:"p-3",children:[(0,j.jsxs)("small",{className:"d-block text-secondary mb-4",children:[(0,j.jsxs)("span",{children:[b(L,{keyPrefix:"btns"})," "]}),(0,j.jsxs)(d.N_,{to:E,target:"_blank",className:"link-secondary",children:["#",H]})]}),"question"===L&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{className:"mb-3",children:null===q||void 0===q?void 0:q.title}),(0,j.jsx)("div",{className:"mb-4",children:null===q||void 0===q||null===(t=q.tags)||void 0===t?void 0:t.map((e=>(0,j.jsx)(x.vw,{className:"me-1",data:e},e.slug_name)))})]}),(0,j.jsx)("div",{className:"small font-monospace",children:(0,j.jsx)(x.EQ,{children:(0,j.jsx)("article",{ref:y,className:"fmt text-break text-wrap",dangerouslySetInnerHTML:{__html:null===q||void 0===q?void 0:q.parsed_text}})})}),(0,j.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between mt-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:u()("badge",null===(s=h.__[z])||void 0===s?void 0:s.variant),children:b(null===(c=h.__[z])||void 0===c?void 0:c.name,{keyPrefix:"btns"})}),2===(null===q||void 0===q?void 0:q.object_show_status)&&(0,j.jsx)("span",{className:u()("ms-1 badge",h.__.unlisted.variant),children:b(h.__.unlisted.name,{keyPrefix:"btns"})})]}),(0,j.jsxs)("div",{className:"d-flex align-items-center small",children:[(0,j.jsx)(x.fZ,{data:$,avatarSize:"24",avatarClass:"me-2"}),(0,j.jsx)(x.H0,{time:Number(null===q||void 0===q?void 0:q.created_at),className:"text-secondary ms-1 flex-shrink-0",preFix:b(R,{keyPrefix:"question_detail"})})]})]})]})]}),(0,j.jsxs)(n.A.Footer,{className:"p-3",children:[(0,j.jsx)("p",{children:b("user"!==L?"approve_post_tip":"approve_user_tip")}),(0,j.jsxs)(l.A,{direction:"horizontal",gap:2,children:[(0,j.jsx)(r.A,{variant:"outline-primary",disabled:w,onClick:()=>F("approve"),children:b("approve",{keyPrefix:"btns"})}),(0,j.jsx)(r.A,{variant:"outline-primary",disabled:w,onClick:()=>F("reject"),children:b("reject",{keyPrefix:"btns"})}),(0,j.jsx)(r.A,{variant:"outline-primary",disabled:w,onClick:()=>{I(C+1,""),g&&(f.delete("objectId"),_(f))},children:b("skip",{keyPrefix:"btns"})})]})]})]})}},26351:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var i=s(84873),n=s(14592),a=s(98496),l=s(49450);const r=({list:e,checked:t,callback:s})=>{const{t:r}=(0,a.B)("translation",{keyPrefix:"page_review"});return(0,l.jsxs)(i.A,{children:[(0,l.jsx)(i.A.Header,{children:r("filter",{keyPrefix:"btns"})}),(0,l.jsx)(i.A.Body,{children:(0,l.jsxs)(n.A.Group,{children:[(0,l.jsx)(n.A.Label,{children:r("filter_label")}),null===e||void 0===e?void 0:e.map((e=>(0,l.jsx)(n.A.Check,{type:"radio",id:e.name,disabled:e.todo_amount<=0,label:`${e.label} (${e.todo_amount})`,checked:t===e.name,onChange:()=>s(e.name)},e.name)))]})})]})}},16602:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var i=s(12162),n=s(84873),a=s(68442),l=s(63962),r=s(18666),o=s(85940),d=s(98496),c=s(10428),u=s(45558),m=s(91408),x=s(93090),v=s(49450);const h=({refreshCount:e})=>{const{t:t}=(0,d.B)("translation",{keyPrefix:"page_review"}),[s,h]=(0,i.useState)(!1),[p,j]=(0,i.useState)(!1),[f,_]=(0,i.useState)(1),[g,b]=(0,i.useState)(),y=null===g||void 0===g?void 0:g.list[0],{info:k,type:N,unreviewed_info:w}=y||{info:null,type:"",unreviewed_info:null},A=e=>{(0,u.Xm)(e).then((t=>{((e,t)=>{const{count:s,list:i=[]}=e;if(!i.length&&s&&1!==f)return _(t=1),void A(t);t!==f&&_(t),b(e),i.length||j(!0),setTimeout((()=>{(0,x.Mv)()}),150)})(t,e)}))},C=null===w||void 0===w?void 0:w.content;let P="",S="",T=null===w||void 0===w?void 0:w.reason;const q=null===w||void 0===w?void 0:w.user_info,I=null===w||void 0===w?void 0:w.create_at;if("question"===N)P=m.w.questionLanding(null===k||void 0===k?void 0:k.object_id,null===k||void 0===k?void 0:k.url_title),S=null===k||void 0===k?void 0:k.object_id,T||=t("edit_question");else if("answer"===N)P=m.w.answerLanding({questionId:w.content.question_id,slugTitle:null===k||void 0===k?void 0:k.url_title,answerId:w.object_id}),S=w.object_id,T||=t("edit_answer");else if("tag"===N){const e=w.content;P=m.w.tagLanding(e.slug_name),S=(null===e||void 0===e?void 0:e.tag_id)||e.slug_name,T||=t("edit_tag")}if((0,i.useEffect)((()=>{A(f)}),[]),p)return null;let F={},L={},$={showTitle:!0,showTagUrlSlug:!0};return"question"===N&&k&&C&&"content"in C&&(F={title:C.title,original_text:C.content,tags:C.tags},L={title:k.title,original_text:k.content,tags:k.tags}),"answer"===N&&k&&C&&"content"in C&&(F={original_text:C.content},L={original_text:k.content}),"tag"===N&&k&&C&&(F={original_text:C.original_text},L={original_text:k.content},$={showTitle:!1,showTagUrlSlug:!1}),(0,v.jsxs)(n.A,{children:[(0,v.jsx)(n.A.Header,{children:t("suggest_edits")}),(0,v.jsxs)(n.A.Body,{className:"p-0",children:[(0,v.jsxs)(a.A,{variant:"info",className:"border-0 rounded-0 mb-0",children:[(0,v.jsxs)(l.A,{direction:"horizontal",gap:1,className:"align-items-center mb-2",children:[(0,v.jsx)(c.fZ,{data:q,avatarSize:"24",avatarClass:"me-2"}),I&&(0,v.jsx)(c.H0,{time:I,className:"small text-secondary",preFix:t("proposed")})]}),(0,v.jsx)(l.A,{className:"align-items-start",children:(0,v.jsx)("p",{className:"mb-0",children:T})})]}),(0,v.jsxs)("div",{className:"p-3",children:[(0,v.jsxs)("small",{className:"d-block text-secondary mb-4",children:[(0,v.jsxs)("span",{children:[t(N,{keyPrefix:"btns"})," "]}),(0,v.jsxs)(o.N_,{to:P,target:"_blank",className:"link-secondary",children:["#",S]})]}),(0,v.jsx)(c.V$,{className:"mt-2",objectType:N,newData:F,oldData:L,opts:$})]})]}),(0,v.jsxs)(n.A.Footer,{className:"p-3",children:[(0,v.jsx)("p",{children:t("approve_revision_tip")}),(0,v.jsxs)(l.A,{direction:"horizontal",gap:2,children:[(0,v.jsx)(r.A,{variant:"outline-primary",disabled:s,onClick:()=>{w&&(h(!0),(0,u.LG)(w.id,"approve").then((()=>{e(),A(f)})).finally((()=>{h(!1)})))},children:t("approve",{keyPrefix:"btns"})}),(0,v.jsx)(r.A,{variant:"outline-primary",disabled:s,onClick:()=>{w&&(h(!0),(0,u.LG)(w.id,"reject").then((()=>{e(),A(f)})).catch((e=>{console.error("revisionAudit reject error: ",e)})).finally((()=>{h(!1)})))},children:t("reject",{keyPrefix:"btns"})}),(0,v.jsx)(r.A,{variant:"outline-primary",disabled:s,onClick:()=>{A(f+1)},children:t("skip",{keyPrefix:"btns"})})]})]})]})}},65084:(e,t,s)=>{s.r(t),s.d(t,{ApproveDropdown:()=>n.default,EditPostModal:()=>a.default,FlagContent:()=>r.default,QueuedContent:()=>o.default,ReviewType:()=>i.default,SuggestContent:()=>l.default});var i=s(26351),n=s(8653),a=s(27768),l=s(16602),r=s(64800),o=s(97463)},47849:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var i=s(12162),n=s(98128),a=s(8810),l=s(98496),r=s(85940),o=s(28093),d=s(10428),c=s(45558),u=s(65084),m=s(49450);const x=()=>{const[e,t]=(0,r.ok)(),s=e.get("type"),{t:x}=(0,l.B)("translation",{keyPrefix:"page_review"}),[v,h]=(0,i.useState)(),[p,j]=(0,i.useState)(""),[f,_]=(0,i.useState)(!1),g=e=>{(0,c.pb)().then((t=>{if(s){const e=t.find((e=>e.name===s));Number(null===e||void 0===e?void 0:e.todo_amount)>0?j((null===e||void 0===e?void 0:e.name)||""):_(!0)}else{const s=t.filter((e=>e.todo_amount>0));if(s.length>0)if(e)j(s[0].name);else{const e=t.find((e=>e.name===p));0===(null===e||void 0===e?void 0:e.todo_amount)&&j(s[0].name)}else _(!0)}h(t)})).catch((e=>{console.error("getReviewType error: ",e)}))};return(0,i.useEffect)((()=>{g(!0)}),[]),(0,o.M4)({title:x("review")}),(0,m.jsxs)(n.A,{className:"pt-4 mb-5",children:[(0,m.jsx)("h3",{className:"mb-4",children:x("review")}),(0,m.jsxs)(a.A,{className:"page-main flex-auto",children:["suggested_post_edit"===p&&(0,m.jsx)(u.SuggestContent,{refreshCount:()=>g(!1)}),"flagged_post"===p&&(0,m.jsx)(u.FlagContent,{refreshCount:()=>g(!1)}),"queued_post"===p&&(0,m.jsx)(u.QueuedContent,{refreshCount:()=>g(!1)}),f&&(0,m.jsx)(d.Sv,{children:x("empty")})]}),(0,m.jsx)(a.A,{className:"page-right-side mt-4 mt-xl-0",children:(0,m.jsx)(u.ReviewType,{list:v,checked:p,callback:s=>{e.delete("type"),t(e),j(s)}})})]})}},98128:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(59660),n=s.n(i),a=s(12162),l=s(42700),r=s(49450);const o=a.forwardRef((({bsPrefix:e,className:t,as:s="div",...i},a)=>{const o=(0,l.oU)(e,"row"),d=(0,l.gy)(),c=(0,l.Jm)(),u=`${o}-cols`,m=[];return d.forEach((e=>{const t=i[e];let s;delete i[e],null!=t&&"object"===typeof t?({cols:s}=t):s=t;const n=e!==c?`-${e}`:"";null!=s&&m.push(`${u}${n}-${s}`)})),(0,r.jsx)(s,{ref:a,...i,className:n()(t,o,...m)})}));o.displayName="Row";const d=o}}]);
//# sourceMappingURL=7556.c9bbf0f2.chunk.js.map