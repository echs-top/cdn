{"version":3,"file":"static/js/8211.9c9a5685.chunk.js","mappings":"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","sources":["pages/Review/components/QueuedContent/index.tsx","pages/Review/components/ReviewType/index.tsx","pages/Review/components/SuggestContent/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC, useEffect, useState, useRef } from 'react';\nimport { Card, Alert, Stack, Button } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { Link, useSearchParams } from 'react-router-dom';\n\nimport classNames from 'classnames';\n\nimport { getPendingReviewPostList, putPendingReviewAction } from '@/services';\nimport {\n  BaseUserCard,\n  Tag,\n  FormatTime,\n  Icon,\n  ImgViewer,\n  htmlRender,\n} from '@/components';\nimport { scrollToDocTop } from '@/utils';\nimport type * as Type from '@/common/interface';\nimport { ADMIN_LIST_STATUS } from '@/common/constants';\nimport generateData from '../../utils/generateData';\n\ninterface IProps {\n  refreshCount: () => void;\n}\n\nconst Index: FC<IProps> = ({ refreshCount }) => {\n  const [urlSearch, setUrlSearchParams] = useSearchParams();\n  const objectId = urlSearch.get('objectId') || '';\n  const { t } = useTranslation('translation', { keyPrefix: 'page_review' });\n  const ref = useRef<HTMLDivElement>(null);\n  const [noTasks, setNoTasks] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [reviewResp, setReviewResp] = useState<Type.QuestionDetailRes>();\n  const flagItemData = reviewResp?.list[0] as Type.QueuedReviewItem;\n\n  const resolveNextOne = (resp, pageNumber) => {\n    const { count, list = [] } = resp;\n    // auto rollback\n    if (!list.length && count && page !== 1) {\n      pageNumber = 1;\n      setPage(pageNumber);\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      queryNextOne(pageNumber, '');\n      return;\n    }\n    if (pageNumber !== page) {\n      setPage(pageNumber);\n    }\n    setReviewResp(resp);\n    if (!list.length) {\n      setNoTasks(true);\n    }\n    setTimeout(() => {\n      scrollToDocTop();\n    }, 150);\n  };\n\n  const queryNextOne = (pageNumber, id) => {\n    getPendingReviewPostList(pageNumber, id).then((resp) => {\n      resolveNextOne(resp, pageNumber);\n    });\n  };\n\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    setTimeout(() => {\n      htmlRender(ref.current, {\n        copySuccessText: t('copied', { keyPrefix: 'messages' }),\n        copyText: t('copy', { keyPrefix: 'messages' }),\n      });\n    }, 70);\n  }, [ref.current]);\n\n  useEffect(() => {\n    queryNextOne(page, objectId);\n  }, []);\n\n  const handleAction = (type: 'approve' | 'reject') => {\n    if (!flagItemData) {\n      return;\n    }\n    setIsLoading(true);\n    putPendingReviewAction({\n      status: type,\n      review_id: flagItemData?.review_id,\n    })\n      .then(() => {\n        refreshCount();\n        queryNextOne(page, '');\n        if (objectId) {\n          urlSearch.delete('objectId');\n          setUrlSearchParams(urlSearch);\n        }\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handlingSkip = () => {\n    queryNextOne(page + 1, '');\n    if (objectId) {\n      urlSearch.delete('objectId');\n      setUrlSearchParams(urlSearch);\n    }\n  };\n\n  const { object_type, author_user_info, object_status, reason } =\n    flagItemData || {\n      object_type: '',\n      author_user_info: null,\n      reason: null,\n      object_status: 0,\n    };\n\n  const { itemLink, itemId, itemTimePrefix } = generateData(flagItemData);\n\n  if (noTasks) return null;\n  return (\n    <Card>\n      <Card.Header>\n        {object_type !== 'user' ? t('queued_post') : t('queued_post_user')}\n      </Card.Header>\n      <Card.Body className=\"p-0\">\n        <Alert variant=\"info\" className=\"border-0 rounded-0 mb-0\">\n          <Stack\n            direction=\"horizontal\"\n            gap={1}\n            className=\"align-items-center mb-2\">\n            <div className=\"small d-flex align-items-center\">\n              <Icon type=\"bi\" name=\"plugin\" size=\"24px\" className=\"me-2 lh-1\" />\n              <span>{flagItemData?.submitter_display_name}</span>\n            </div>\n            {flagItemData?.submit_at && (\n              <FormatTime\n                time={flagItemData.submit_at}\n                className=\"small text-secondary\"\n                preFix={t('proposed')}\n              />\n            )}\n          </Stack>\n          <Stack className=\"align-items-start\">\n            <p className=\"mb-0\">{reason}</p>\n          </Stack>\n        </Alert>\n        <div className=\"p-3\">\n          <small className=\"d-block text-secondary mb-4\">\n            <span>{t(object_type, { keyPrefix: 'btns' })} </span>\n            <Link to={itemLink} target=\"_blank\" className=\"link-secondary\">\n              #{itemId}\n            </Link>\n          </small>\n          {object_type === 'question' && (\n            <>\n              <h5 className=\"mb-3\">{flagItemData?.title}</h5>\n              <div className=\"mb-4\">\n                {flagItemData?.tags?.map((item) => {\n                  return (\n                    <Tag key={item.slug_name} className=\"me-1\" data={item} />\n                  );\n                })}\n              </div>\n            </>\n          )}\n          <div className=\"small font-monospace\">\n            <ImgViewer>\n              <article\n                ref={ref}\n                className=\"fmt text-break text-wrap\"\n                dangerouslySetInnerHTML={{ __html: flagItemData?.parsed_text }}\n              />\n            </ImgViewer>\n          </div>\n          <div className=\"d-flex flex-wrap align-items-center justify-content-between mt-4\">\n            <div>\n              <span\n                className={classNames(\n                  'badge',\n                  ADMIN_LIST_STATUS[object_status]?.variant,\n                )}>\n                {t(ADMIN_LIST_STATUS[object_status]?.name, {\n                  keyPrefix: 'btns',\n                })}\n              </span>\n              {flagItemData?.object_show_status === 2 && (\n                <span\n                  className={classNames(\n                    'ms-1 badge',\n                    ADMIN_LIST_STATUS.unlisted.variant,\n                  )}>\n                  {t(ADMIN_LIST_STATUS.unlisted.name, { keyPrefix: 'btns' })}\n                </span>\n              )}\n            </div>\n            <div className=\"d-flex align-items-center small\">\n              <BaseUserCard\n                data={author_user_info}\n                avatarSize=\"24\"\n                avatarClass=\"me-2\"\n              />\n              <FormatTime\n                time={Number(flagItemData?.created_at)}\n                className=\"text-secondary ms-1 flex-shrink-0\"\n                preFix={t(itemTimePrefix, { keyPrefix: 'question_detail' })}\n              />\n            </div>\n          </div>\n        </div>\n      </Card.Body>\n\n      <Card.Footer className=\"p-3\">\n        <p>\n          {object_type !== 'user'\n            ? t('approve_post_tip')\n            : t('approve_user_tip')}\n        </p>\n        <Stack direction=\"horizontal\" gap={2}>\n          <Button\n            variant=\"outline-primary\"\n            disabled={isLoading}\n            onClick={() => handleAction('approve')}>\n            {t('approve', { keyPrefix: 'btns' })}\n          </Button>\n          <Button\n            variant=\"outline-primary\"\n            disabled={isLoading}\n            onClick={() => handleAction('reject')}>\n            {t('reject', { keyPrefix: 'btns' })}\n          </Button>\n\n          <Button\n            variant=\"outline-primary\"\n            disabled={isLoading}\n            onClick={handlingSkip}>\n            {t('skip', { keyPrefix: 'btns' })}\n          </Button>\n        </Stack>\n      </Card.Footer>\n    </Card>\n  );\n};\n\nexport default Index;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC } from 'react';\nimport { Card, Form } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\n\nimport * as Type from '@/common/interface';\n\ninterface IProps {\n  list: Type.ReviewTypeItem[] | undefined;\n  checked: string;\n  callback: (type: string) => void;\n}\n\nconst Index: FC<IProps> = ({ list, checked, callback }) => {\n  const { t } = useTranslation('translation', { keyPrefix: 'page_review' });\n  return (\n    <Card>\n      <Card.Header>{t('filter', { keyPrefix: 'btns' })}</Card.Header>\n      <Card.Body>\n        <Form.Group>\n          <Form.Label>{t('filter_label')}</Form.Label>\n          {list?.map((item) => {\n            return (\n              <Form.Check\n                key={item.name}\n                type=\"radio\"\n                id={item.name}\n                disabled={item.todo_amount <= 0}\n                label={`${item.label} (${item.todo_amount})`}\n                checked={checked === item.name}\n                onChange={() => callback(item.name)}\n              />\n            );\n          })}\n        </Form.Group>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default Index;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC, useEffect, useState } from 'react';\nimport { Alert, Stack, Button, Card } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { BaseUserCard, FormatTime, DiffContent } from '@/components';\nimport { getSuggestReviewList, revisionAudit } from '@/services';\nimport { pathFactory } from '@/router/pathFactory';\nimport { scrollToDocTop } from '@/utils';\nimport type * as Type from '@/common/interface';\n\ninterface IProps {\n  refreshCount: () => void;\n}\n\nconst Index: FC<IProps> = ({ refreshCount }) => {\n  const { t } = useTranslation('translation', { keyPrefix: 'page_review' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [noTasks, setNoTasks] = useState(false);\n  const [page, setPage] = useState(1);\n  const [reviewResp, setReviewResp] = useState<Type.SuggestReviewResp>();\n  const ro = reviewResp?.list[0];\n  const { info, type, unreviewed_info } = ro || {\n    info: null,\n    type: '',\n    unreviewed_info: null,\n  };\n  const resolveNextOne = (resp, pageNumber) => {\n    const { count, list = [] } = resp;\n    // auto rollback\n    if (!list.length && count && page !== 1) {\n      pageNumber = 1;\n      setPage(pageNumber);\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      queryNextOne(pageNumber);\n      return;\n    }\n    if (pageNumber !== page) {\n      setPage(pageNumber);\n    }\n    setReviewResp(resp);\n    if (!list.length) {\n      setNoTasks(true);\n    }\n    setTimeout(() => {\n      scrollToDocTop();\n    }, 150);\n  };\n  const queryNextOne = (pageNumber) => {\n    getSuggestReviewList(pageNumber).then((resp) => {\n      resolveNextOne(resp, pageNumber);\n    });\n  };\n  const reviewInfo = unreviewed_info?.content;\n\n  const handlingApprove = () => {\n    if (!unreviewed_info) {\n      return;\n    }\n    setIsLoading(true);\n    revisionAudit(unreviewed_info.id, 'approve')\n      .then(() => {\n        refreshCount();\n        queryNextOne(page);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handlingReject = () => {\n    if (!unreviewed_info) {\n      return;\n    }\n    setIsLoading(true);\n    revisionAudit(unreviewed_info.id, 'reject')\n      .then(() => {\n        refreshCount();\n        queryNextOne(page);\n      })\n      .catch((ex) => {\n        console.error('revisionAudit reject error: ', ex);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handlingSkip = () => {\n    queryNextOne(page + 1);\n  };\n\n  let itemLink = '';\n  let itemId = '';\n  let editSummary = unreviewed_info?.reason;\n  const editor = unreviewed_info?.user_info;\n  const editTime = unreviewed_info?.create_at;\n  if (type === 'question') {\n    itemLink = pathFactory.questionLanding(info?.object_id, info?.url_title);\n    itemId = info?.object_id;\n    editSummary ||= t('edit_question');\n  } else if (type === 'answer') {\n    itemLink = pathFactory.answerLanding({\n      // @ts-ignore\n      questionId: unreviewed_info.content.question_id,\n      slugTitle: info?.url_title,\n      answerId: unreviewed_info.object_id,\n    });\n    itemId = unreviewed_info.object_id;\n    editSummary ||= t('edit_answer');\n  } else if (type === 'tag') {\n    const tagInfo = unreviewed_info.content as Type.Tag;\n    itemLink = pathFactory.tagLanding(tagInfo.slug_name);\n    itemId = tagInfo?.tag_id || tagInfo.slug_name;\n    editSummary ||= t('edit_tag');\n  }\n  useEffect(() => {\n    queryNextOne(page);\n  }, []);\n\n  if (noTasks) return null;\n\n  let newData: Record<string, any> = {};\n  let oldData: Record<string, any> = {};\n  let diffOpts: Partial<{\n    showTitle: boolean;\n    showTagUrlSlug: boolean;\n  }> = {\n    showTitle: true,\n    showTagUrlSlug: true,\n  };\n  if (type === 'question' && info && reviewInfo && 'content' in reviewInfo) {\n    newData = {\n      title: reviewInfo.title,\n      original_text: reviewInfo.content,\n      tags: reviewInfo.tags,\n    };\n    oldData = {\n      title: info.title,\n      original_text: info.content,\n      tags: info.tags,\n    };\n  }\n  if (type === 'answer' && info && reviewInfo && 'content' in reviewInfo) {\n    newData = {\n      original_text: reviewInfo.content,\n    };\n    oldData = {\n      original_text: info.content,\n    };\n  }\n\n  if (type === 'tag' && info && reviewInfo) {\n    newData = {\n      original_text: reviewInfo.original_text,\n    };\n    oldData = {\n      original_text: info.content,\n    };\n    diffOpts = { showTitle: false, showTagUrlSlug: false };\n  }\n\n  return (\n    <Card>\n      <Card.Header>{t('suggest_edits')}</Card.Header>\n      <Card.Body className=\"p-0\">\n        <Alert variant=\"info\" className=\"border-0 rounded-0 mb-0\">\n          <Stack\n            direction=\"horizontal\"\n            gap={1}\n            className=\"align-items-center mb-2\">\n            <BaseUserCard data={editor} avatarSize=\"24\" avatarClass=\"me-2\" />\n            {editTime && (\n              <FormatTime\n                time={editTime}\n                className=\"small text-secondary\"\n                preFix={t('proposed')}\n              />\n            )}\n          </Stack>\n          <Stack className=\"align-items-start\">\n            <p className=\"mb-0\">{editSummary}</p>\n          </Stack>\n        </Alert>\n        <div className=\"p-3\">\n          <small className=\"d-block text-secondary mb-4\">\n            <span>{t(type, { keyPrefix: 'btns' })} </span>\n            <Link to={itemLink} target=\"_blank\" className=\"link-secondary\">\n              #{itemId}\n            </Link>\n          </small>\n\n          <DiffContent\n            className=\"mt-2\"\n            objectType={type}\n            newData={newData}\n            oldData={oldData}\n            opts={diffOpts}\n          />\n        </div>\n      </Card.Body>\n      <Card.Footer className=\"p-3\">\n        <p>{t('approve_revision_tip')}</p>\n        <Stack direction=\"horizontal\" gap={2}>\n          <Button\n            variant=\"outline-primary\"\n            disabled={isLoading}\n            onClick={handlingApprove}>\n            {t('approve', { keyPrefix: 'btns' })}\n          </Button>\n          <Button\n            variant=\"outline-primary\"\n            disabled={isLoading}\n            onClick={handlingReject}>\n            {t('reject', { keyPrefix: 'btns' })}\n          </Button>\n          <Button\n            variant=\"outline-primary\"\n            disabled={isLoading}\n            onClick={handlingSkip}>\n            {t('skip', { keyPrefix: 'btns' })}\n          </Button>\n        </Stack>\n      </Card.Footer>\n    </Card>\n  );\n};\n\nexport default Index;\n"],"names":["Index","refreshCount","_flagItemData$tags","_ADMIN_LIST_STATUS$ob","_ADMIN_LIST_STATUS$ob2","urlSearch","setUrlSearchParams","useSearchParams","objectId","get","t","useTranslation","keyPrefix","ref","useRef","noTasks","setNoTasks","useState","isLoading","setIsLoading","page","setPage","reviewResp","setReviewResp","flagItemData","list","queryNextOne","pageNumber","id","getPendingReviewPostList","then","resp","resolveNextOne","count","length","setTimeout","scrollToDocTop","useEffect","current","htmlRender","copySuccessText","copyText","handleAction","type","putPendingReviewAction","status","review_id","delete","finally","object_type","author_user_info","object_status","reason","itemLink","itemId","itemTimePrefix","generateData","_jsxs","Card","children","_jsx","Header","Body","className","Alert","variant","Stack","direction","gap","Icon","name","size","submitter_display_name","submit_at","FormatTime","time","preFix","Link","to","target","_Fragment","title","tags","map","item","Tag","data","slug_name","ImgViewer","dangerouslySetInnerHTML","__html","parsed_text","classNames","ADMIN_LIST_STATUS","object_show_status","unlisted","BaseUserCard","avatarSize","avatarClass","Number","created_at","Footer","Button","disabled","onClick","handlingSkip","checked","callback","Form","Group","Label","Check","todo_amount","label","onChange","ro","info","unreviewed_info","getSuggestReviewList","reviewInfo","content","editSummary","editor","user_info","editTime","create_at","pathFactory","questionLanding","object_id","url_title","answerLanding","questionId","question_id","slugTitle","answerId","tagInfo","tagLanding","tag_id","newData","oldData","diffOpts","showTitle","showTagUrlSlug","original_text","DiffContent","objectType","opts","handlingApprove","revisionAudit","handlingReject","catch","ex","console","error"],"sourceRoot":""}