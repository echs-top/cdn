"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[3953],{53953:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(12162),n=s(5423),t=s(8810),i=s(14592),r=s(18666),o=s(85940),c=s(98496),d=s(28446),u=s(28093),m=s(10428),p=s(59304),v=s(93090),g=s(32563),h=s(45558),x=s(3176),_=s(49450);const b=()=>{const{t:e}=(0,c.B)("translation",{keyPrefix:"login"}),a=(0,o.Zp)(),[s]=(0,o.ok)(),{user:b,update:y}=(0,p.bb)((e=>e)),j=(0,p.vu)((e=>e.login)),f=(0,p.ym)().agent;let I;null!==f&&void 0!==f&&f.enabled&&null!==f&&void 0!==f&&f.agent_info&&(I=f.agent_info);const C=(!I||I.enabled_original_user_system)&&j.allow_password_login,[N,k]=(0,l.useState)({e_mail:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""}}),[w,A]=(0,l.useState)(1),E=e=>{k({...N,...e})},M=(0,g.T5)("password"),P=e=>{e&&e.preventDefault();const s={e_mail:N.e_mail.value,pass:N.pass.value},l=null===M||void 0===M?void 0:M.getCaptcha();null!==l&&void 0!==l&&l.verify&&(s.captcha_code=l.captcha_code,s.captcha_id=l.captcha_id),(0,h.iD)(s).then((async e=>{var s;await(null===M||void 0===M||null===(s=M.close)||void 0===s?void 0:s.call(M)),y(e),(0,x.setupAppTheme)();v.ah.deriveLoginState().isNotActivated?A(2):v.ah.handleLoginRedirect(a)})).catch((e=>{if(e.isError){var a;const s=(0,v.NC)(e,N);k({...s}),null===M||void 0===M||null===(a=M.handleCaptchaError)||void 0===a||a.call(M,e.list);const l=document.getElementById(e.list[0].error_field);(0,v.qt)(l)}}))};return(0,l.useEffect)((()=>{const e=s.get("status");b.id&&(2===b.mail_status||e)&&A(2)}),[]),(0,u.M4)({title:e("login",{keyPrefix:"page_title"})}),(0,_.jsxs)(n.A,{style:{paddingTop:"4rem",paddingBottom:"5rem"},children:[(0,_.jsx)(m.vU,{}),1===w?(0,_.jsxs)(t.A,{className:"mx-auto",md:6,lg:4,xl:3,children:[(0,_.jsx)(m.Y8,{type:g.QE.Captcha,slug_name:"captcha_basic",className:"mb-5"}),(0,_.jsx)(m.Y8,{type:g.QE.Captcha,slug_name:"captcha_google_v2",className:"mb-5"}),I?(0,_.jsx)(m.Y8,{type:g.QE.Connector,slug_name:"hosting_connector",className:"mb-5"}):(0,_.jsx)(m.Y8,{type:g.QE.Connector,slug_name:"third_party_connector",className:"mb-5"}),C?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(i.A,{noValidate:!0,onSubmit:async a=>{var s;a.preventDefault(),a.stopPropagation(),(()=>{let a=!0;const{e_mail:s,pass:l}=N;if(s.value||(a=!1,N.e_mail={value:"",isInvalid:!0,errorMsg:e("email.msg.empty")}),l.value||(a=!1,N.pass={value:"",isInvalid:!0,errorMsg:e("password.msg.empty")}),k({...N}),!a){const e=Object.keys(N).filter((e=>N[e].isInvalid)),a=document.getElementById(e[0]);(0,v.qt)(a)}return a})()&&(M?null===M||void 0===M||null===(s=M.check)||void 0===s||s.call(M,(()=>{P()})):P())},children:[(0,_.jsxs)(i.A.Group,{controlId:"email",className:"mb-3",children:[(0,_.jsx)(i.A.Label,{children:e("email.label")}),(0,_.jsx)(i.A.Control,{required:!0,tabIndex:1,type:"email",value:N.e_mail.value,isInvalid:N.e_mail.isInvalid,onChange:e=>E({e_mail:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,_.jsx)(i.A.Control.Feedback,{type:"invalid",children:N.e_mail.errorMsg})]}),(0,_.jsxs)(i.A.Group,{controlId:"pass",className:"mb-3",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)(i.A.Label,{children:e("password.label")}),(0,_.jsx)(o.N_,{to:"/users/account-recovery",tabIndex:2,children:(0,_.jsx)("small",{children:e("forgot_pass")})})]}),(0,_.jsx)(i.A.Control,{required:!0,tabIndex:1,type:"password",isInvalid:N.pass.isInvalid,onChange:e=>E({pass:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,_.jsx)(i.A.Control.Feedback,{type:"invalid",children:N.pass.errorMsg})]}),(0,_.jsx)("div",{className:"d-grid",children:(0,_.jsx)(r.A,{variant:"primary",type:"submit",tabIndex:1,children:e("login",{keyPrefix:"btns"})})})]}),j.allow_new_registrations&&(0,_.jsx)("div",{className:"text-center mt-5",children:(0,_.jsxs)(d.x,{i18nKey:"login.info_sign",ns:"translation",children:["Don't have an account?",(0,_.jsx)(o.N_,{to:v.Rh.getSignUpUrl(),tabIndex:2,onClick:v.Jg.handleRouteLinkClick,children:"Sign up"})]})})]}):null]}):null,2===w&&(0,_.jsx)(m.RP,{visible:2===w})]})},y=l.memo(b)},5423:(e,a,s)=>{s.d(a,{A:()=>c});var l=s(59660),n=s.n(l),t=s(12162),i=s(42700),r=s(49450);const o=t.forwardRef((({bsPrefix:e,fluid:a=!1,as:s="div",className:l,...t},o)=>{const c=(0,i.oU)(e,"container"),d="string"===typeof a?`-${a}`:"-fluid";return(0,r.jsx)(s,{ref:o,...t,className:n()(l,a?`${c}${d}`:c)})}));o.displayName="Container";const c=o}}]);
//# sourceMappingURL=3953.09f46e39.chunk.js.map