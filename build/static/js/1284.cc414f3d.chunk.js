"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[1284],{81284:(e,i,l)=>{l.r(i),l.d(i,{default:()=>d});var a=l(12162),t=l(98496),o=l(45558),s=l(10428),r=l(28093),n=l(93090),_=l(59304),w=l(49450);const d=()=>{const{t:e}=(0,t.B)("translation",{keyPrefix:"admin.login"}),i=(0,r.dj)(),l={title:e("page_title"),properties:{allow_new_registrations:{type:"boolean",title:e("membership.title"),description:e("membership.text"),default:!0},allow_email_registrations:{type:"boolean",title:e("email_registration.title"),description:e("email_registration.text"),default:!0},allow_password_login:{type:"boolean",title:e("password_login.title"),description:e("password_login.text"),default:!0},allow_email_domains:{type:"string",title:e("allowed_email_domains.title"),description:e("allowed_email_domains.text")},login_required:{type:"boolean",title:e("private.title"),description:e("private.text"),default:!1}}},d={allow_new_registrations:{"ui:widget":"switch","ui:options":{label:e("membership.label")}},allow_email_registrations:{"ui:widget":"switch","ui:options":{label:e("email_registration.label")}},allow_password_login:{"ui:widget":"switch","ui:options":{label:e("password_login.label")}},allow_email_domains:{"ui:widget":"textarea"},login_required:{"ui:widget":"switch","ui:options":{label:e("private.label")}}},[m,u]=(0,a.useState)((0,s.pw)(l)),{update:g}=(0,_.vu)((e=>e));(0,a.useEffect)((()=>{(0,o.sr)().then((e=>{if(e){const i={...m};i.allow_new_registrations.value=e.allow_new_registrations,i.allow_email_registrations.value=e.allow_email_registrations,i.allow_email_domains.value="",Array.isArray(e.allow_email_domains)&&(i.allow_email_domains.value=e.allow_email_domains.join("\n")),i.login_required.value=e.login_required,i.allow_password_login.value=e.allow_password_login,u({...i})}}))}),[]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h3",{className:"mb-4",children:e("page_title")}),(0,w.jsx)(s.q,{schema:l,formData:m,onSubmit:l=>{l.preventDefault(),l.stopPropagation();const a=[];if(m.allow_email_domains.value){m.allow_email_domains.value.split("\n").forEach((e=>{(e=e.trim())&&a.push(e)}))}const t={allow_new_registrations:m.allow_new_registrations.value,allow_email_registrations:m.allow_email_registrations.value,allow_email_domains:a,login_required:m.login_required.value,allow_password_login:m.allow_password_login.value};(0,o.Tz)(t).then((()=>{i.onShow({msg:e("update",{keyPrefix:"toast"}),variant:"success"}),g(t)})).catch((e=>{if(e.isError){const i=(0,n.NC)(e,m);u({...i});const l=document.getElementById(e.list[0].error_field);(0,n.qt)(l)}}))},uiSchema:d,onChange:e=>{u(e)}})]})}}}]);
//# sourceMappingURL=1284.cc414f3d.chunk.js.map