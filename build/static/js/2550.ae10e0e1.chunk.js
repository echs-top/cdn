"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[2550],{82550:(a,e,t)=>{t.r(e),t.d(e,{default:()=>p});var l=t(12162),i=t(98496),u=t(28093),n=t(59304),r=t(10428),s=t(91374),o=t(45558),v=t(3176),d=t(93090),g=t(49450);const p=()=>{var a,e;const{t:t}=(0,i.B)("translation",{keyPrefix:"admin.interface"}),p=n.$n.getState().interface,_=(0,u.dj)(),[c,m]=(0,l.useState)(),{data:f}=(0,o.Zo)(),b={title:t("page_title"),properties:{language:{type:"string",title:t("language.label"),description:t("language.text"),enum:null===c||void 0===c?void 0:c.map((a=>a.value)),enumNames:null===c||void 0===c?void 0:c.map((a=>a.label)),default:(null===f||void 0===f?void 0:f.language)||p.language||(null===c||void 0===c||null===(a=c[0])||void 0===a?void 0:a.value)},time_zone:{type:"string",title:t("time_zone.label"),description:t("time_zone.text"),default:(null===f||void 0===f?void 0:f.time_zone)||s.GI},default_avatar:{type:"string",title:t("avatar.label"),description:t("avatar.text"),enum:null===s.p4||void 0===s.p4?void 0:s.p4.map((a=>a.value)),enumNames:null===s.p4||void 0===s.p4?void 0:s.p4.map((a=>a.label)),default:(null===f||void 0===f?void 0:f.default_avatar)||"system"},gravatar_base_url:{type:"string",title:t("gravatar_base_url.label"),description:t("gravatar_base_url.text"),default:(null===f||void 0===f?void 0:f.gravatar_base_url)||""}}},[h,w]=(0,l.useState)({language:{value:(null===f||void 0===f?void 0:f.language)||p.language||(null===c||void 0===c||null===(e=c[0])||void 0===e?void 0:e.value),isInvalid:!1,errorMsg:""},time_zone:{value:(null===f||void 0===f?void 0:f.time_zone)||s.GI,isInvalid:!1,errorMsg:""},default_avatar:{value:(null===f||void 0===f?void 0:f.default_avatar)||"system",isInvalid:!1,errorMsg:""},gravatar_base_url:{value:(null===f||void 0===f?void 0:f.gravatar_base_url)||"",isInvalid:!1,errorMsg:""}});(0,l.useEffect)((()=>{if(f){const a={};Object.keys(f).forEach((e=>{let t=f[e];"default_avatar"!==e||t||(t="system"),"gravatar_base_url"!==e||t||(t=""),a[e]={...h[e],value:t}})),w({...h,...a})}}),[f]),(0,l.useEffect)((()=>{(async()=>{const a=await(0,v.loadLanguageOptions)(!0);m(a)})()}),[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h3",{className:"mb-4",children:t("page_title")}),(0,g.jsx)(r.q,{schema:b,uiSchema:{language:{"ui:widget":"select"},time_zone:{"ui:widget":"timezone"},default_avatar:{"ui:widget":"select"},gravatar_base_url:{"ui:widget":"input","ui:options":{placeholder:"https://www.gravatar.com/avatar/"}}},formData:h,onSubmit:a=>{if(a.preventDefault(),a.stopPropagation(),!1===(()=>{let a=!0;const{language:e}=h,l={...h};return e.value||(a=!1,l.language={value:"",isInvalid:!0,errorMsg:t("language.msg")}),w({...l}),a})())return;const e={language:h.language.value,time_zone:h.time_zone.value,default_avatar:h.default_avatar.value,gravatar_base_url:h.gravatar_base_url.value};(0,o.Lt)(e).then((()=>{n.$n.getState().update(e),(0,v.setupAppLanguage)(),(0,v.setupAppTimeZone)(),(0,o.aV)().then((a=>{n.bb.getState().update(a)})),_.onShow({msg:t("update",{keyPrefix:"toast"}),variant:"success"})})).catch((a=>{if(a.isError){const e=(0,d.NC)(a,h);w({...e});const t=document.getElementById(a.list[0].error_field);(0,d.qt)(t)}}))},onChange:a=>{w(a)}})]})}}}]);
//# sourceMappingURL=2550.ae10e0e1.chunk.js.map